{"mappings":"C,A,W,S,E,C,C,C,C,C,C,C,E,O,c,C,E,E,C,I,E,I,E,W,C,E,a,C,C,E,C,I,E,A,a,O,W,W,A,a,O,K,K,A,a,O,O,O,A,a,O,O,O,C,E,E,C,E,E,C,E,E,E,iB,A,O,I,A,C,E,S,C,E,G,K,E,O,C,C,E,C,O,C,G,K,E,C,I,E,C,C,E,A,Q,C,C,E,C,I,E,C,G,E,Q,C,C,E,O,C,C,E,C,E,E,I,C,E,O,C,E,E,O,E,E,O,A,C,I,E,A,M,uB,E,I,O,E,I,C,mB,C,C,E,Q,C,S,C,C,C,E,C,C,E,C,C,E,E,iB,C,G,I,E,E,Q,C,E,Q,S,C,C,C,E,E,E,O,C,W,W,O,C,E,S,C,E,O,E,C,G,E,E,O,C,U,W,O,C,E,S,C,E,O,E,C,GCEA,IAgBA,EACA,EAjBI,EAAU,IAAI,IAgBlB,EAfA,SAAkB,CAAO,CAAE,CAAQ,EACjC,IAAK,IAAI,EAAI,EAAG,EAAI,EAAS,MAAM,CAAG,EAAG,GAAK,EAC5C,EAAQ,GAAG,CAAC,CAAQ,CAAC,EAAE,CAAE,CACvB,QAAS,EACT,KAAM,CAAQ,CAAC,EAAI,EAAE,AACvB,EAEJ,EASA,EARA,SAAiB,CAAE,EACjB,IAAI,EAAW,EAAQ,GAAG,CAAC,GAC3B,GAAI,AAAY,MAAZ,EACF,MAAM,AAAI,MAAM,oCAAsC,GAExD,OAAO,IAAI,IAAI,EAAS,IAAI,CAAE,EAAS,OAAO,EAAE,QAAQ,EAC1D,C,G,E,Q,S,C,C,C,E,E,E,O,C,e,W,O,C,E,S,C,E,O,E,C,GCfA,IAkCA,EAlCI,EAAY,CAAC,EAkCjB,EAjCA,SAA4B,CAAE,EAC5B,IAAI,EAAQ,CAAS,CAAC,EAAG,CAKzB,OAJK,IACH,EAAQ,AAKZ,WACE,GAAI,CACF,MAAM,AAAI,OACZ,CAAE,MAAO,EAAK,CACZ,IAAI,EAAW,AAAA,CAAA,GAAK,EAAI,KAAI,AAAJ,EAAO,KAAK,CAAC,oEACrC,GAAI,EAGF,MAMI,AAAA,CAAA,GANc,CAAO,CAAC,EAAE,AAMnB,EAAK,OAAO,CAAC,0EAA2E,MAAQ,GAJ7G,CACA,MAAO,GACT,IAhBI,CAAS,CAAC,EAAG,CAAG,GAEX,CACT,C,G,E,Q,S,C,C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","sources":["<anon>","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-6358b611de66b7eb.js","node_modules/@parcel/runtime-js/lib/helpers/browser/js-loader.js","node_modules/@parcel/runtime-js/lib/helpers/cacheLoader.js","node_modules/@parcel/runtime-js/lib/runtime-f9a4effb10eaceb8.js","node_modules/@parcel/runtime-js/lib/runtime-3429c0c325a44bfb.js","node_modules/@parcel/runtime-js/lib/runtime-0bb7a57ecd598c57.js","node_modules/@parcel/runtime-js/lib/runtime-d6d516a65a77a8d3.js","node_modules/@parcel/runtime-js/lib/runtime-75ee8a53000d090b.js","node_modules/@parcel/runtime-js/lib/runtime-c8b8db0d6f478472.js","node_modules/@parcel/runtime-js/lib/runtime-512a069ab27d563b.js","node_modules/@parcel/runtime-js/lib/runtime-83a6416b1941e5af.js","src/assets/js/swup.js","node_modules/swup/dist/Swup.module.js","node_modules/swup/src/helpers/classify.ts","node_modules/swup/src/helpers/getCurrentUrl.ts","node_modules/swup/src/helpers/history.ts","node_modules/swup/src/helpers/delegateEvent.ts","node_modules/swup/src/helpers/Location.ts","node_modules/swup/src/helpers/matchPath.ts","node_modules/swup/src/modules/fetchPage.ts","node_modules/swup/src/modules/Cache.ts","node_modules/swup/src/utils/index.ts","node_modules/swup/src/modules/Classes.ts","node_modules/swup/src/modules/Visit.ts","node_modules/swup/src/modules/Hooks.ts","node_modules/swup/src/modules/getAnchorElement.ts","node_modules/swup/src/modules/awaitAnimations.ts","node_modules/swup/src/modules/navigate.ts","node_modules/swup/src/modules/animatePageOut.ts","node_modules/swup/src/modules/replaceContent.ts","node_modules/swup/src/modules/scrollToContent.ts","node_modules/swup/src/modules/animatePageIn.ts","node_modules/swup/src/modules/renderPage.ts","node_modules/swup/src/modules/plugins.ts","node_modules/swup/src/modules/resolveUrl.ts","node_modules/swup/src/Swup.ts","node_modules/delegate-it/index.js","node_modules/delegate-it/delegate.js","node_modules/delegate-it/one-event.js","node_modules/path-to-regexp/dist.es2015/index.js","node_modules/path-to-regexp/src/index.ts","node_modules/@swup/head-plugin/dist/index.module.js","node_modules/@swup/head-plugin/src/mergeHeadContents.ts","node_modules/@swup/head-plugin/src/waitForAssets.ts","node_modules/@swup/head-plugin/src/index.ts","node_modules/@swup/head-plugin/src/updateLangAttribute.ts","node_modules/@swup/head-plugin/src/waitForStylesheet.ts","node_modules/@swup/plugin/dist/index.module.js","node_modules/@swup/plugin/src/versionSatisfies.ts","node_modules/@swup/plugin/src/index.ts","node_modules/@swup/plugin/src/pluginRequirements.ts","node_modules/@swup/scripts-plugin/dist/index.module.js","node_modules/@swup/scripts-plugin/src/index.ts","node_modules/@swup/a11y-plugin/dist/index.module.js","node_modules/@swup/a11y-plugin/src/util.ts","node_modules/@swup/a11y-plugin/src/announcements.ts","node_modules/@swup/a11y-plugin/src/focus.ts","node_modules/@swup/a11y-plugin/src/index.ts","node_modules/focus-options-polyfill/index.js"],"sourcesContent":["(function () {\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global =\n        typeof globalThis !== 'undefined'\n          ? globalThis\n          : typeof self !== 'undefined'\n          ? self\n          : typeof window !== 'undefined'\n          ? window\n          : typeof global !== 'undefined'\n          ? global\n          : {};\n  \nvar $parcel$modules = {};\nvar $parcel$inits = {};\n\nvar parcelRequire = $parcel$global[\"parcelRequireb18d\"];\n\nif (parcelRequire == null) {\n  parcelRequire = function(id) {\n    if (id in $parcel$modules) {\n      return $parcel$modules[id].exports;\n    }\n    if (id in $parcel$inits) {\n      var init = $parcel$inits[id];\n      delete $parcel$inits[id];\n      var module = {id: id, exports: {}};\n      $parcel$modules[id] = module;\n      init.call(module.exports, module, module.exports);\n      return module.exports;\n    }\n    var err = new Error(\"Cannot find module '\" + id + \"'\");\n    err.code = 'MODULE_NOT_FOUND';\n    throw err;\n  };\n\n  parcelRequire.register = function register(id, init) {\n    $parcel$inits[id] = init;\n  };\n\n  $parcel$global[\"parcelRequireb18d\"] = parcelRequire;\n}\n\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"02gTD\", function(module, exports) {\n\n$parcel$export(module.exports, \"register\", function () { return $006d4b43846b4e5a$export$6503ec6e8aabbaf; }, function (v) { return $006d4b43846b4e5a$export$6503ec6e8aabbaf = v; });\n$parcel$export(module.exports, \"resolve\", function () { return $006d4b43846b4e5a$export$f7ad0328861e2f03; }, function (v) { return $006d4b43846b4e5a$export$f7ad0328861e2f03 = v; });\nvar $006d4b43846b4e5a$export$6503ec6e8aabbaf;\nvar $006d4b43846b4e5a$export$f7ad0328861e2f03;\n\"use strict\";\nvar $006d4b43846b4e5a$var$mapping = new Map();\nfunction $006d4b43846b4e5a$var$register(baseUrl, manifest) {\n    for(var i = 0; i < manifest.length - 1; i += 2)$006d4b43846b4e5a$var$mapping.set(manifest[i], {\n        baseUrl: baseUrl,\n        path: manifest[i + 1]\n    });\n}\nfunction $006d4b43846b4e5a$var$resolve(id) {\n    var resolved = $006d4b43846b4e5a$var$mapping.get(id);\n    if (resolved == null) throw new Error(\"Could not resolve bundle with id \" + id);\n    return new URL(resolved.path, resolved.baseUrl).toString();\n}\n$006d4b43846b4e5a$export$6503ec6e8aabbaf = $006d4b43846b4e5a$var$register;\n$006d4b43846b4e5a$export$f7ad0328861e2f03 = $006d4b43846b4e5a$var$resolve;\n\n});\n\nparcelRegister(\"3E9rI\", function(module, exports) {\n\n$parcel$export(module.exports, \"getBundleURL\", function () { return $2a7c6f5202362115$export$bdfd709ae4826697; }, function (v) { return $2a7c6f5202362115$export$bdfd709ae4826697 = v; });\nvar $2a7c6f5202362115$export$bdfd709ae4826697;\nvar $2a7c6f5202362115$export$c9e73fbda7da57b6;\nvar $2a7c6f5202362115$export$5a759dc7a1cfb72a;\n\"use strict\";\nvar $2a7c6f5202362115$var$bundleURL = {};\nfunction $2a7c6f5202362115$var$getBundleURLCached(id) {\n    var value = $2a7c6f5202362115$var$bundleURL[id];\n    if (!value) {\n        value = $2a7c6f5202362115$var$getBundleURL();\n        $2a7c6f5202362115$var$bundleURL[id] = value;\n    }\n    return value;\n}\nfunction $2a7c6f5202362115$var$getBundleURL() {\n    try {\n        throw new Error();\n    } catch (err) {\n        var matches = (\"\" + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g);\n        if (matches) // The first two stack frames will be this function and getBundleURLCached.\n        // Use the 3rd one, which will be a runtime in the original bundle.\n        return $2a7c6f5202362115$var$getBaseURL(matches[2]);\n    }\n    return \"/\";\n}\nfunction $2a7c6f5202362115$var$getBaseURL(url) {\n    return (\"\" + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/.+)\\/[^/]+$/, \"$1\") + \"/\";\n}\n// TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\nfunction $2a7c6f5202362115$var$getOrigin(url) {\n    var matches = (\"\" + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^/]+/);\n    if (!matches) throw new Error(\"Origin not found\");\n    return matches[0];\n}\n$2a7c6f5202362115$export$bdfd709ae4826697 = $2a7c6f5202362115$var$getBundleURLCached;\n$2a7c6f5202362115$export$c9e73fbda7da57b6 = $2a7c6f5202362115$var$getBaseURL;\n$2a7c6f5202362115$export$5a759dc7a1cfb72a = $2a7c6f5202362115$var$getOrigin;\n\n});\n\nparcelRegister(\"gbcZ9\", function(module, exports) {\n\n\nmodule.exports = (parcelRequire(\"4ReQy\"))((parcelRequire(\"02gTD\")).resolve(\"6UcPc\")).then(()=>parcelRequire(\"aci17\"));\n\n});\nparcelRegister(\"4ReQy\", function(module, exports) {\n\"use strict\";\n\nvar $igfKR = parcelRequire(\"igfKR\");\nmodule.exports = $igfKR(function(bundle) {\n    return new Promise(function(resolve, reject) {\n        // Don't insert the same script twice (e.g. if it was already in the HTML)\n        var existingScripts = document.getElementsByTagName(\"script\");\n        if ([].concat(existingScripts).some(function isCurrentBundle(script) {\n            return script.src === bundle;\n        })) {\n            resolve();\n            return;\n        }\n        var preloadLink = document.createElement(\"link\");\n        preloadLink.href = bundle;\n        preloadLink.rel = \"preload\";\n        preloadLink.as = \"script\";\n        document.head.appendChild(preloadLink);\n        var script = document.createElement(\"script\");\n        script.async = true;\n        script.type = \"text/javascript\";\n        script.src = bundle;\n        script.onerror = function(e) {\n            var error = new TypeError(\"Failed to fetch dynamically imported module: \".concat(bundle, \". Error: \").concat(e.message));\n            script.onerror = script.onload = null;\n            script.remove();\n            reject(error);\n        };\n        script.onload = function() {\n            script.onerror = script.onload = null;\n            resolve();\n        };\n        document.getElementsByTagName(\"head\")[0].appendChild(script);\n    });\n});\n\n});\nparcelRegister(\"igfKR\", function(module, exports) {\n\"use strict\";\nvar $d4b5f137e6587370$var$cachedBundles = {};\nvar $d4b5f137e6587370$var$cachedPreloads = {};\nvar $d4b5f137e6587370$var$cachedPrefetches = {};\nfunction $d4b5f137e6587370$var$getCache(type) {\n    switch(type){\n        case \"preload\":\n            return $d4b5f137e6587370$var$cachedPreloads;\n        case \"prefetch\":\n            return $d4b5f137e6587370$var$cachedPrefetches;\n        default:\n            return $d4b5f137e6587370$var$cachedBundles;\n    }\n}\nmodule.exports = function(loader, type) {\n    return function(bundle) {\n        var cache = $d4b5f137e6587370$var$getCache(type);\n        if (cache[bundle]) return cache[bundle];\n        return cache[bundle] = loader.apply(null, arguments).catch(function(e) {\n            delete cache[bundle];\n            throw e;\n        });\n    };\n};\n\n});\n\n\n\nparcelRegister(\"4BdB9\", function(module, exports) {\n\n\nmodule.exports = (parcelRequire(\"4ReQy\"))((parcelRequire(\"02gTD\")).resolve(\"1g79i\")).then(()=>parcelRequire(\"1NUJT\"));\n\n});\n\nparcelRegister(\"gnsqx\", function(module, exports) {\n\n\nmodule.exports = (parcelRequire(\"4ReQy\"))((parcelRequire(\"02gTD\")).resolve(\"A68i4\")).then(()=>parcelRequire(\"iofW6\"));\n\n});\n\nparcelRegister(\"8v2jD\", function(module, exports) {\n\n\nmodule.exports = (parcelRequire(\"4ReQy\"))((parcelRequire(\"02gTD\")).resolve(\"cynWl\")).then(()=>parcelRequire(\"5rB28\"));\n\n});\n\nparcelRegister(\"kmWZY\", function(module, exports) {\n\n\nmodule.exports = (parcelRequire(\"4ReQy\"))((parcelRequire(\"02gTD\")).resolve(\"1yLHV\")).then(()=>parcelRequire(\"2hgwE\"));\n\n});\n\nparcelRegister(\"iNGzu\", function(module, exports) {\n\n\n\n\nmodule.exports = Promise.all([\n    (parcelRequire(\"4ReQy\"))((parcelRequire(\"02gTD\")).resolve(\"1B69D\")),\n    (parcelRequire(\"4ReQy\"))((parcelRequire(\"02gTD\")).resolve(\"9Y5Ex\"))\n]).then(()=>parcelRequire(\"1FWyb\"));\n\n});\n\nparcelRegister(\"jaESz\", function(module, exports) {\n\n\nmodule.exports = (parcelRequire(\"4ReQy\"))((parcelRequire(\"02gTD\")).resolve(\"1K2Wg\")).then(()=>parcelRequire(\"bATWL\"));\n\n});\n\nparcelRegister(\"h01UM\", function(module, exports) {\n\n\n\n\nmodule.exports = Promise.all([\n    (parcelRequire(\"4ReQy\"))((parcelRequire(\"02gTD\")).resolve(\"1B69D\")),\n    (parcelRequire(\"4ReQy\"))((parcelRequire(\"02gTD\")).resolve(\"bXdr1\"))\n]).then(()=>parcelRequire(\"Jj56w\"));\n\n});\n\nvar $8d72b2ca874e40e5$exports = {};\n\n\n(parcelRequire(\"02gTD\")).register((parcelRequire(\"3E9rI\")).getBundleURL(\"krAda\"), JSON.parse('[\"krAda\",\"swup.js\",\"bXdr1\",\"../dragAndDrop.createDraggables.bfc3e51c.js\",\"1B69D\",\"../dragAndDrop.createDraggables.e5bf5573.js\",\"6UcPc\",\"../lazyLoad.69f65a3c.js\",\"1g79i\",\"../menu.a7fa81fa.js\",\"A68i4\",\"../bookmarks.607ad781.js\",\"cynWl\",\"../viewToggle.1078dc4b.js\",\"1yLHV\",\"../taskButtons.8d01a1c5.js\",\"9Y5Ex\",\"../minimizeWindows.9ec107dc.js\",\"1K2Wg\",\"../windowManager.4bb4f0db.js\"]'));\n\n/** Keeps track of raw listeners added to the base elements to avoid duplication */ const $0866d6a7a27b1ca1$var$ledger = new WeakMap();\nfunction $0866d6a7a27b1ca1$var$editLedger(wanted, baseElement, callback, setup) {\n    if (!wanted && !$0866d6a7a27b1ca1$var$ledger.has(baseElement)) return false;\n    const elementMap = $0866d6a7a27b1ca1$var$ledger.get(baseElement) ?? new WeakMap();\n    $0866d6a7a27b1ca1$var$ledger.set(baseElement, elementMap);\n    const setups = elementMap.get(callback) ?? new Set();\n    elementMap.set(callback, setups);\n    const existed = setups.has(setup);\n    if (wanted) setups.add(setup);\n    else setups.delete(setup);\n    return existed && wanted;\n}\nfunction $0866d6a7a27b1ca1$var$safeClosest(event, selector) {\n    let target = event.target;\n    if (target instanceof Text) target = target.parentElement;\n    if (target instanceof Element && event.currentTarget instanceof Element) {\n        // `.closest()` may match ancestors of `currentTarget` but we only need its children\n        const closest = target.closest(selector);\n        if (closest && event.currentTarget.contains(closest)) return closest;\n    }\n}\n// This type isn't exported as a declaration, so it needs to be duplicated above\nfunction $0866d6a7a27b1ca1$var$delegate(selector, type, callback, options = {}) {\n    const { signal: signal, base: base = document } = options;\n    if (signal?.aborted) return;\n    // Don't pass `once` to `addEventListener` because it needs to be handled in `delegate-it`\n    const { once: once, ...nativeListenerOptions } = options;\n    // `document` should never be the base, it's just an easy way to define \"global event listeners\"\n    const baseElement = base instanceof Document ? base.documentElement : base;\n    // Handle the regular Element usage\n    const capture = Boolean(typeof options === \"object\" ? options.capture : options);\n    const listenerFunction = (event)=>{\n        const delegateTarget = $0866d6a7a27b1ca1$var$safeClosest(event, selector);\n        if (delegateTarget) {\n            const delegateEvent = Object.assign(event, {\n                delegateTarget: delegateTarget\n            });\n            callback.call(baseElement, delegateEvent);\n            if (once) {\n                baseElement.removeEventListener(type, listenerFunction, nativeListenerOptions);\n                $0866d6a7a27b1ca1$var$editLedger(false, baseElement, callback, setup);\n            }\n        }\n    };\n    const setup = JSON.stringify({\n        selector: selector,\n        type: type,\n        capture: capture\n    });\n    const isAlreadyListening = $0866d6a7a27b1ca1$var$editLedger(true, baseElement, callback, setup);\n    if (!isAlreadyListening) baseElement.addEventListener(type, listenerFunction, nativeListenerOptions);\n    signal?.addEventListener(\"abort\", ()=>{\n        $0866d6a7a27b1ca1$var$editLedger(false, baseElement, callback, setup);\n    });\n}\nvar $0866d6a7a27b1ca1$export$2e2bcd8739ae039 = $0866d6a7a27b1ca1$var$delegate;\n\n\n\n// This type isn't exported as a declaration, so it needs to be duplicated above\nasync function $65e92a7a055c1058$var$oneEvent(selector, type, options = {}) {\n    return new Promise((resolve)=>{\n        options.once = true;\n        if (options.signal?.aborted) resolve(undefined);\n        options.signal?.addEventListener(\"abort\", ()=>{\n            resolve(undefined);\n        });\n        (0, $0866d6a7a27b1ca1$export$2e2bcd8739ae039)(selector, type, resolve, options);\n    });\n}\nvar $65e92a7a055c1058$export$2e2bcd8739ae039 = $65e92a7a055c1058$var$oneEvent;\n\n\n\n\n/**\n * Tokenize input string.\n */ function $142de243bb9d2467$var$lexer(str) {\n    var tokens = [];\n    var i = 0;\n    while(i < str.length){\n        var char = str[i];\n        if (char === \"*\" || char === \"+\" || char === \"?\") {\n            tokens.push({\n                type: \"MODIFIER\",\n                index: i,\n                value: str[i++]\n            });\n            continue;\n        }\n        if (char === \"\\\\\") {\n            tokens.push({\n                type: \"ESCAPED_CHAR\",\n                index: i++,\n                value: str[i++]\n            });\n            continue;\n        }\n        if (char === \"{\") {\n            tokens.push({\n                type: \"OPEN\",\n                index: i,\n                value: str[i++]\n            });\n            continue;\n        }\n        if (char === \"}\") {\n            tokens.push({\n                type: \"CLOSE\",\n                index: i,\n                value: str[i++]\n            });\n            continue;\n        }\n        if (char === \":\") {\n            var name = \"\";\n            var j = i + 1;\n            while(j < str.length){\n                var code = str.charCodeAt(j);\n                if (// `0-9`\n                code >= 48 && code <= 57 || // `A-Z`\n                code >= 65 && code <= 90 || // `a-z`\n                code >= 97 && code <= 122 || // `_`\n                code === 95) {\n                    name += str[j++];\n                    continue;\n                }\n                break;\n            }\n            if (!name) throw new TypeError(\"Missing parameter name at \".concat(i));\n            tokens.push({\n                type: \"NAME\",\n                index: i,\n                value: name\n            });\n            i = j;\n            continue;\n        }\n        if (char === \"(\") {\n            var count = 1;\n            var pattern = \"\";\n            var j = i + 1;\n            if (str[j] === \"?\") throw new TypeError('Pattern cannot start with \"?\" at '.concat(j));\n            while(j < str.length){\n                if (str[j] === \"\\\\\") {\n                    pattern += str[j++] + str[j++];\n                    continue;\n                }\n                if (str[j] === \")\") {\n                    count--;\n                    if (count === 0) {\n                        j++;\n                        break;\n                    }\n                } else if (str[j] === \"(\") {\n                    count++;\n                    if (str[j + 1] !== \"?\") throw new TypeError(\"Capturing groups are not allowed at \".concat(j));\n                }\n                pattern += str[j++];\n            }\n            if (count) throw new TypeError(\"Unbalanced pattern at \".concat(i));\n            if (!pattern) throw new TypeError(\"Missing pattern at \".concat(i));\n            tokens.push({\n                type: \"PATTERN\",\n                index: i,\n                value: pattern\n            });\n            i = j;\n            continue;\n        }\n        tokens.push({\n            type: \"CHAR\",\n            index: i,\n            value: str[i++]\n        });\n    }\n    tokens.push({\n        type: \"END\",\n        index: i,\n        value: \"\"\n    });\n    return tokens;\n}\nfunction $142de243bb9d2467$export$98e6a39c04603d36(str, options) {\n    if (options === void 0) options = {};\n    var tokens = $142de243bb9d2467$var$lexer(str);\n    var _a = options.prefixes, prefixes = _a === void 0 ? \"./\" : _a;\n    var defaultPattern = \"[^\".concat($142de243bb9d2467$var$escapeString(options.delimiter || \"/#?\"), \"]+?\");\n    var result = [];\n    var key = 0;\n    var i = 0;\n    var path = \"\";\n    var tryConsume = function(type) {\n        if (i < tokens.length && tokens[i].type === type) return tokens[i++].value;\n    };\n    var mustConsume = function(type) {\n        var value = tryConsume(type);\n        if (value !== undefined) return value;\n        var _a = tokens[i], nextType = _a.type, index = _a.index;\n        throw new TypeError(\"Unexpected \".concat(nextType, \" at \").concat(index, \", expected \").concat(type));\n    };\n    var consumeText = function() {\n        var result = \"\";\n        var value;\n        while(value = tryConsume(\"CHAR\") || tryConsume(\"ESCAPED_CHAR\"))result += value;\n        return result;\n    };\n    while(i < tokens.length){\n        var char = tryConsume(\"CHAR\");\n        var name = tryConsume(\"NAME\");\n        var pattern = tryConsume(\"PATTERN\");\n        if (name || pattern) {\n            var prefix = char || \"\";\n            if (prefixes.indexOf(prefix) === -1) {\n                path += prefix;\n                prefix = \"\";\n            }\n            if (path) {\n                result.push(path);\n                path = \"\";\n            }\n            result.push({\n                name: name || key++,\n                prefix: prefix,\n                suffix: \"\",\n                pattern: pattern || defaultPattern,\n                modifier: tryConsume(\"MODIFIER\") || \"\"\n            });\n            continue;\n        }\n        var value = char || tryConsume(\"ESCAPED_CHAR\");\n        if (value) {\n            path += value;\n            continue;\n        }\n        if (path) {\n            result.push(path);\n            path = \"\";\n        }\n        var open = tryConsume(\"OPEN\");\n        if (open) {\n            var prefix = consumeText();\n            var name_1 = tryConsume(\"NAME\") || \"\";\n            var pattern_1 = tryConsume(\"PATTERN\") || \"\";\n            var suffix = consumeText();\n            mustConsume(\"CLOSE\");\n            result.push({\n                name: name_1 || (pattern_1 ? key++ : \"\"),\n                pattern: name_1 && !pattern_1 ? defaultPattern : pattern_1,\n                prefix: prefix,\n                suffix: suffix,\n                modifier: tryConsume(\"MODIFIER\") || \"\"\n            });\n            continue;\n        }\n        mustConsume(\"END\");\n    }\n    return result;\n}\nfunction $142de243bb9d2467$export$ef7acd7185315e22(str, options) {\n    return $142de243bb9d2467$export$5b9bad9e403cf3d9($142de243bb9d2467$export$98e6a39c04603d36(str, options), options);\n}\nfunction $142de243bb9d2467$export$5b9bad9e403cf3d9(tokens, options) {\n    if (options === void 0) options = {};\n    var reFlags = $142de243bb9d2467$var$flags(options);\n    var _a = options.encode, encode = _a === void 0 ? function(x) {\n        return x;\n    } : _a, _b = options.validate, validate = _b === void 0 ? true : _b;\n    // Compile all the tokens into regexps.\n    var matches = tokens.map(function(token) {\n        if (typeof token === \"object\") return new RegExp(\"^(?:\".concat(token.pattern, \")$\"), reFlags);\n    });\n    return function(data) {\n        var path = \"\";\n        for(var i = 0; i < tokens.length; i++){\n            var token = tokens[i];\n            if (typeof token === \"string\") {\n                path += token;\n                continue;\n            }\n            var value = data ? data[token.name] : undefined;\n            var optional = token.modifier === \"?\" || token.modifier === \"*\";\n            var repeat = token.modifier === \"*\" || token.modifier === \"+\";\n            if (Array.isArray(value)) {\n                if (!repeat) throw new TypeError('Expected \"'.concat(token.name, '\" to not repeat, but got an array'));\n                if (value.length === 0) {\n                    if (optional) continue;\n                    throw new TypeError('Expected \"'.concat(token.name, '\" to not be empty'));\n                }\n                for(var j = 0; j < value.length; j++){\n                    var segment = encode(value[j], token);\n                    if (validate && !matches[i].test(segment)) throw new TypeError('Expected all \"'.concat(token.name, '\" to match \"').concat(token.pattern, '\", but got \"').concat(segment, '\"'));\n                    path += token.prefix + segment + token.suffix;\n                }\n                continue;\n            }\n            if (typeof value === \"string\" || typeof value === \"number\") {\n                var segment = encode(String(value), token);\n                if (validate && !matches[i].test(segment)) throw new TypeError('Expected \"'.concat(token.name, '\" to match \"').concat(token.pattern, '\", but got \"').concat(segment, '\"'));\n                path += token.prefix + segment + token.suffix;\n                continue;\n            }\n            if (optional) continue;\n            var typeOfMessage = repeat ? \"an array\" : \"a string\";\n            throw new TypeError('Expected \"'.concat(token.name, '\" to be ').concat(typeOfMessage));\n        }\n        return path;\n    };\n}\nfunction $142de243bb9d2467$export$4659b591c19bdf3d(str, options) {\n    var keys = [];\n    var re = $142de243bb9d2467$export$71304158c7e35877(str, keys, options);\n    return $142de243bb9d2467$export$968e97c88708237a(re, keys, options);\n}\nfunction $142de243bb9d2467$export$968e97c88708237a(re, keys, options) {\n    if (options === void 0) options = {};\n    var _a = options.decode, decode = _a === void 0 ? function(x) {\n        return x;\n    } : _a;\n    return function(pathname) {\n        var m = re.exec(pathname);\n        if (!m) return false;\n        var path = m[0], index = m.index;\n        var params = Object.create(null);\n        var _loop_1 = function(i) {\n            if (m[i] === undefined) return \"continue\";\n            var key = keys[i - 1];\n            if (key.modifier === \"*\" || key.modifier === \"+\") params[key.name] = m[i].split(key.prefix + key.suffix).map(function(value) {\n                return decode(value, key);\n            });\n            else params[key.name] = decode(m[i], key);\n        };\n        for(var i = 1; i < m.length; i++)_loop_1(i);\n        return {\n            path: path,\n            index: index,\n            params: params\n        };\n    };\n}\n/**\n * Escape a regular expression string.\n */ function $142de243bb9d2467$var$escapeString(str) {\n    return str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n}\n/**\n * Get the flags for a regexp from the options.\n */ function $142de243bb9d2467$var$flags(options) {\n    return options && options.sensitive ? \"\" : \"i\";\n}\n/**\n * Pull out keys from a regexp.\n */ function $142de243bb9d2467$var$regexpToRegexp(path, keys) {\n    if (!keys) return path;\n    var groupsRegex = /\\((?:\\?<(.*?)>)?(?!\\?)/g;\n    var index = 0;\n    var execResult = groupsRegex.exec(path.source);\n    while(execResult){\n        keys.push({\n            // Use parenthesized substring match if available, index otherwise\n            name: execResult[1] || index++,\n            prefix: \"\",\n            suffix: \"\",\n            modifier: \"\",\n            pattern: \"\"\n        });\n        execResult = groupsRegex.exec(path.source);\n    }\n    return path;\n}\n/**\n * Transform an array into a regexp.\n */ function $142de243bb9d2467$var$arrayToRegexp(paths, keys, options) {\n    var parts = paths.map(function(path) {\n        return $142de243bb9d2467$export$71304158c7e35877(path, keys, options).source;\n    });\n    return new RegExp(\"(?:\".concat(parts.join(\"|\"), \")\"), $142de243bb9d2467$var$flags(options));\n}\n/**\n * Create a path regexp from string input.\n */ function $142de243bb9d2467$var$stringToRegexp(path, keys, options) {\n    return $142de243bb9d2467$export$9a9303716def6456($142de243bb9d2467$export$98e6a39c04603d36(path, options), keys, options);\n}\nfunction $142de243bb9d2467$export$9a9303716def6456(tokens, keys, options) {\n    if (options === void 0) options = {};\n    var _a = options.strict, strict = _a === void 0 ? false : _a, _b = options.start, start = _b === void 0 ? true : _b, _c = options.end, end = _c === void 0 ? true : _c, _d = options.encode, encode = _d === void 0 ? function(x) {\n        return x;\n    } : _d, _e = options.delimiter, delimiter = _e === void 0 ? \"/#?\" : _e, _f = options.endsWith, endsWith = _f === void 0 ? \"\" : _f;\n    var endsWithRe = \"[\".concat($142de243bb9d2467$var$escapeString(endsWith), \"]|$\");\n    var delimiterRe = \"[\".concat($142de243bb9d2467$var$escapeString(delimiter), \"]\");\n    var route = start ? \"^\" : \"\";\n    // Iterate over the tokens and create our regexp string.\n    for(var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++){\n        var token = tokens_1[_i];\n        if (typeof token === \"string\") route += $142de243bb9d2467$var$escapeString(encode(token));\n        else {\n            var prefix = $142de243bb9d2467$var$escapeString(encode(token.prefix));\n            var suffix = $142de243bb9d2467$var$escapeString(encode(token.suffix));\n            if (token.pattern) {\n                if (keys) keys.push(token);\n                if (prefix || suffix) {\n                    if (token.modifier === \"+\" || token.modifier === \"*\") {\n                        var mod = token.modifier === \"*\" ? \"?\" : \"\";\n                        route += \"(?:\".concat(prefix, \"((?:\").concat(token.pattern, \")(?:\").concat(suffix).concat(prefix, \"(?:\").concat(token.pattern, \"))*)\").concat(suffix, \")\").concat(mod);\n                    } else route += \"(?:\".concat(prefix, \"(\").concat(token.pattern, \")\").concat(suffix, \")\").concat(token.modifier);\n                } else if (token.modifier === \"+\" || token.modifier === \"*\") route += \"((?:\".concat(token.pattern, \")\").concat(token.modifier, \")\");\n                else route += \"(\".concat(token.pattern, \")\").concat(token.modifier);\n            } else route += \"(?:\".concat(prefix).concat(suffix, \")\").concat(token.modifier);\n        }\n    }\n    if (end) {\n        if (!strict) route += \"\".concat(delimiterRe, \"?\");\n        route += !options.endsWith ? \"$\" : \"(?=\".concat(endsWithRe, \")\");\n    } else {\n        var endToken = tokens[tokens.length - 1];\n        var isEndDelimited = typeof endToken === \"string\" ? delimiterRe.indexOf(endToken[endToken.length - 1]) > -1 : endToken === undefined;\n        if (!strict) route += \"(?:\".concat(delimiterRe, \"(?=\").concat(endsWithRe, \"))?\");\n        if (!isEndDelimited) route += \"(?=\".concat(delimiterRe, \"|\").concat(endsWithRe, \")\");\n    }\n    return new RegExp(route, $142de243bb9d2467$var$flags(options));\n}\nfunction $142de243bb9d2467$export$71304158c7e35877(path, keys, options) {\n    if (path instanceof RegExp) return $142de243bb9d2467$var$regexpToRegexp(path, keys);\n    if (Array.isArray(path)) return $142de243bb9d2467$var$arrayToRegexp(path, keys, options);\n    return $142de243bb9d2467$var$stringToRegexp(path, keys, options);\n}\n\n\nconst $6c9437c8078b0d3b$export$b04d9b8d414ba5e8 = (t, e)=>String(t).toLowerCase().replace(/[\\s/_.]+/g, \"-\").replace(/[^\\w-]+/g, \"\").replace(/--+/g, \"-\").replace(/^-+|-+$/g, \"\") || e || \"\", $6c9437c8078b0d3b$export$dc90482e4ef07afd = ({ hash: t } = {})=>window.location.pathname + window.location.search + (t ? window.location.hash : \"\"), $6c9437c8078b0d3b$export$c38a4311235454af = (t, e = {})=>{\n    const n = {\n        url: t = t || $6c9437c8078b0d3b$export$dc90482e4ef07afd({\n            hash: !0\n        }),\n        random: Math.random(),\n        source: \"swup\",\n        ...e\n    };\n    window.history.pushState(n, \"\", t);\n}, $6c9437c8078b0d3b$export$9dd2847e0d2d8b0 = (t = null, e = {})=>{\n    t = t || $6c9437c8078b0d3b$export$dc90482e4ef07afd({\n        hash: !0\n    });\n    const n = {\n        ...window.history.state || {},\n        url: t,\n        random: Math.random(),\n        source: \"swup\",\n        ...e\n    };\n    window.history.replaceState(n, \"\", t);\n}, $6c9437c8078b0d3b$export$b93d41a1bb659592 = (e, n, o, r)=>{\n    const i = new AbortController;\n    return r = {\n        ...r,\n        signal: i.signal\n    }, (0, $0866d6a7a27b1ca1$export$2e2bcd8739ae039)(e, n, o, r), {\n        destroy: ()=>i.abort()\n    };\n};\nclass $6c9437c8078b0d3b$export$18a2be9195644f38 extends URL {\n    constructor(t, e = document.baseURI){\n        super(t.toString(), e), Object.setPrototypeOf(this, $6c9437c8078b0d3b$export$18a2be9195644f38.prototype);\n    }\n    get url() {\n        return this.pathname + this.search;\n    }\n    static fromElement(t) {\n        const e = t.getAttribute(\"href\") || t.getAttribute(\"xlink:href\") || \"\";\n        return new $6c9437c8078b0d3b$export$18a2be9195644f38(e);\n    }\n    static fromUrl(t) {\n        return new $6c9437c8078b0d3b$export$18a2be9195644f38(t);\n    }\n}\nconst $6c9437c8078b0d3b$export$81336c211d5ff295 = (t, n)=>{\n    try {\n        return (0, $142de243bb9d2467$export$4659b591c19bdf3d)(t, n);\n    } catch (e) {\n        throw new Error(`[swup] Error parsing path \"${String(t)}\":\\n${String(e)}`);\n    }\n}, $6c9437c8078b0d3b$var$l = function(t, e = {}) {\n    try {\n        const o = this;\n        function n(n) {\n            const { status: i, url: s } = u;\n            return Promise.resolve(u.text()).then(function(n) {\n                if (500 === i) throw o.hooks.call(\"fetch:error\", r, {\n                    status: i,\n                    response: u,\n                    url: s\n                }), new $6c9437c8078b0d3b$var$h(`Server error: ${s}`, {\n                    status: i,\n                    url: s\n                });\n                if (!n) throw new $6c9437c8078b0d3b$var$h(`Empty response: ${s}`, {\n                    status: i,\n                    url: s\n                });\n                const { url: c } = $6c9437c8078b0d3b$export$18a2be9195644f38.fromUrl(s), l = {\n                    url: c,\n                    html: n\n                };\n                return !r.cache.write || e.method && \"GET\" !== e.method || t !== c || o.cache.set(l.url, l), l;\n            });\n        }\n        t = $6c9437c8078b0d3b$export$18a2be9195644f38.fromUrl(t).url;\n        const { visit: r = o.visit } = e, i = {\n            ...o.options.requestHeaders,\n            ...e.headers\n        }, s = e.timeout ?? o.options.timeout, c = new AbortController, { signal: l } = c;\n        e = {\n            ...e,\n            headers: i,\n            signal: l\n        };\n        let u, d = !1, m = null;\n        s && s > 0 && (m = setTimeout(()=>{\n            d = !0, c.abort(\"timeout\");\n        }, s));\n        const f = function(n, i) {\n            try {\n                var s = Promise.resolve(o.hooks.call(\"fetch:request\", r, {\n                    url: t,\n                    options: e\n                }, (t, { url: e, options: n })=>fetch(e, n))).then(function(t) {\n                    u = t, m && clearTimeout(m);\n                });\n            } catch (t) {\n                return i(t);\n            }\n            return s && s.then ? s.then(void 0, i) : s;\n        }(0, function(e) {\n            if (d) throw o.hooks.call(\"fetch:timeout\", r, {\n                url: t\n            }), new $6c9437c8078b0d3b$var$h(`Request timed out: ${t}`, {\n                url: t,\n                timedOut: d\n            });\n            if (\"AbortError\" === e?.name || l.aborted) throw new $6c9437c8078b0d3b$var$h(`Request aborted: ${t}`, {\n                url: t,\n                aborted: !0\n            });\n            throw e;\n        });\n        return Promise.resolve(f && f.then ? f.then(n) : n());\n    } catch (p) {\n        return Promise.reject(p);\n    }\n};\nclass $6c9437c8078b0d3b$var$h extends Error {\n    constructor(t, e){\n        super(t), this.url = void 0, this.status = void 0, this.aborted = void 0, this.timedOut = void 0, this.name = \"FetchError\", this.url = e.url, this.status = e.status, this.aborted = e.aborted || !1, this.timedOut = e.timedOut || !1;\n    }\n}\nclass $6c9437c8078b0d3b$var$u {\n    constructor(t){\n        this.swup = void 0, this.pages = new Map, this.swup = t;\n    }\n    get size() {\n        return this.pages.size;\n    }\n    get all() {\n        const t = new Map;\n        return this.pages.forEach((e, n)=>{\n            t.set(n, {\n                ...e\n            });\n        }), t;\n    }\n    has(t) {\n        return this.pages.has(this.resolve(t));\n    }\n    get(t) {\n        const e = this.pages.get(this.resolve(t));\n        return e ? {\n            ...e\n        } : e;\n    }\n    set(t, e) {\n        t = this.resolve(t), e = {\n            ...e,\n            url: t\n        }, this.pages.set(t, e), this.swup.hooks.callSync(\"cache:set\", void 0, {\n            page: e\n        });\n    }\n    update(t, e) {\n        t = this.resolve(t);\n        const n = {\n            ...this.get(t),\n            ...e,\n            url: t\n        };\n        this.pages.set(t, n);\n    }\n    delete(t) {\n        this.pages.delete(this.resolve(t));\n    }\n    clear() {\n        this.pages.clear(), this.swup.hooks.callSync(\"cache:clear\", void 0, void 0);\n    }\n    prune(t) {\n        this.pages.forEach((e, n)=>{\n            t(n, e) && this.delete(n);\n        });\n    }\n    resolve(t) {\n        const { url: e } = $6c9437c8078b0d3b$export$18a2be9195644f38.fromUrl(t);\n        return this.swup.resolveUrl(e);\n    }\n}\nconst $6c9437c8078b0d3b$export$2fa187e846a241c4 = (t, e = document)=>e.querySelector(t), $6c9437c8078b0d3b$export$dcd0d083aa86c355 = (t, e = document)=>Array.from(e.querySelectorAll(t)), $6c9437c8078b0d3b$export$bdd553fddd433dcb = ()=>new Promise((t)=>{\n        requestAnimationFrame(()=>{\n            requestAnimationFrame(()=>{\n                t();\n            });\n        });\n    });\nfunction $6c9437c8078b0d3b$export$4369c812aac99591(t) {\n    return !!t && (\"object\" == typeof t || \"function\" == typeof t) && \"function\" == typeof t.then;\n}\nfunction $6c9437c8078b0d3b$export$8586fbe018c72b76(t, e = []) {\n    return new Promise((n, o)=>{\n        const r = t(...e);\n        $6c9437c8078b0d3b$export$4369c812aac99591(r) ? r.then(n, o) : n(r);\n    });\n}\nfunction $6c9437c8078b0d3b$export$7d26bbb1236dafd6(t) {\n    t = t || document.body, t?.getBoundingClientRect();\n}\nclass $6c9437c8078b0d3b$var$w {\n    constructor(t){\n        this.swup = void 0, this.swupClasses = [\n            \"to-\",\n            \"is-changing\",\n            \"is-rendering\",\n            \"is-popstate\",\n            \"is-animating\",\n            \"is-leaving\"\n        ], this.swup = t;\n    }\n    get selectors() {\n        const { scope: t } = this.swup.visit.animation;\n        return \"containers\" === t ? this.swup.visit.containers : \"html\" === t ? [\n            \"html\"\n        ] : Array.isArray(t) ? t : [];\n    }\n    get selector() {\n        return this.selectors.join(\",\");\n    }\n    get targets() {\n        return this.selector.trim() ? $6c9437c8078b0d3b$export$dcd0d083aa86c355(this.selector) : [];\n    }\n    add() {\n        this.targets.forEach((t)=>t.classList.add(...[].slice.call(arguments)));\n    }\n    remove() {\n        this.targets.forEach((t)=>t.classList.remove(...[].slice.call(arguments)));\n    }\n    clear() {\n        this.targets.forEach((t)=>{\n            const e = t.className.split(\" \").filter((t)=>this.isSwupClass(t));\n            t.classList.remove(...e);\n        });\n    }\n    isSwupClass(t) {\n        return this.swupClasses.some((e)=>t.startsWith(e));\n    }\n}\nclass $6c9437c8078b0d3b$var$y {\n    constructor(t, e){\n        this.id = void 0, this.state = void 0, this.from = void 0, this.to = void 0, this.containers = void 0, this.animation = void 0, this.trigger = void 0, this.cache = void 0, this.history = void 0, this.scroll = void 0;\n        const { to: n, from: o = t.currentPageUrl, hash: r, el: i, event: s } = e;\n        this.id = Math.random(), this.state = 1, this.from = {\n            url: o\n        }, this.to = {\n            url: n,\n            hash: r\n        }, this.containers = t.options.containers, this.animation = {\n            animate: !0,\n            wait: !1,\n            name: void 0,\n            native: t.options.native,\n            scope: t.options.animationScope,\n            selector: t.options.animationSelector\n        }, this.trigger = {\n            el: i,\n            event: s\n        }, this.cache = {\n            read: t.options.cache,\n            write: t.options.cache\n        }, this.history = {\n            action: \"push\",\n            popstate: !1,\n            direction: void 0\n        }, this.scroll = {\n            reset: !0,\n            target: void 0\n        };\n    }\n    advance(t) {\n        this.state < t && (this.state = t);\n    }\n    abort() {\n        this.state = 8;\n    }\n    get done() {\n        return this.state >= 7;\n    }\n}\nfunction $6c9437c8078b0d3b$var$P(t) {\n    return new $6c9437c8078b0d3b$var$y(this, t);\n}\nconst $6c9437c8078b0d3b$var$k = \"undefined\" != typeof Symbol ? Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\")) : \"@@iterator\";\nfunction $6c9437c8078b0d3b$var$b(t, e, n) {\n    if (!t.s) {\n        if (n instanceof $6c9437c8078b0d3b$var$S) {\n            if (!n.s) return void (n.o = $6c9437c8078b0d3b$var$b.bind(null, t, e));\n            1 & e && (e = n.s), n = n.v;\n        }\n        if (n && n.then) return void n.then($6c9437c8078b0d3b$var$b.bind(null, t, e), $6c9437c8078b0d3b$var$b.bind(null, t, 2));\n        t.s = e, t.v = n;\n        const o = t.o;\n        o && o(t);\n    }\n}\nconst $6c9437c8078b0d3b$var$S = /*#__PURE__*/ function() {\n    function t() {}\n    return t.prototype.then = function(e, n) {\n        const o = new t, r = this.s;\n        if (r) {\n            const t = 1 & r ? e : n;\n            if (t) {\n                try {\n                    $6c9437c8078b0d3b$var$b(o, 1, t(this.v));\n                } catch (t) {\n                    $6c9437c8078b0d3b$var$b(o, 2, t);\n                }\n                return o;\n            }\n            return this;\n        }\n        return this.o = function(t) {\n            try {\n                const r = t.v;\n                1 & t.s ? $6c9437c8078b0d3b$var$b(o, 1, e ? e(r) : r) : n ? $6c9437c8078b0d3b$var$b(o, 1, n(r)) : $6c9437c8078b0d3b$var$b(o, 2, r);\n            } catch (t) {\n                $6c9437c8078b0d3b$var$b(o, 2, t);\n            }\n        }, o;\n    }, t;\n}();\nfunction $6c9437c8078b0d3b$var$E(t) {\n    return t instanceof $6c9437c8078b0d3b$var$S && 1 & t.s;\n}\nclass $6c9437c8078b0d3b$var$U {\n    constructor(t){\n        this.swup = void 0, this.registry = new Map, this.hooks = [\n            \"animation:out:start\",\n            \"animation:out:await\",\n            \"animation:out:end\",\n            \"animation:in:start\",\n            \"animation:in:await\",\n            \"animation:in:end\",\n            \"animation:skip\",\n            \"cache:clear\",\n            \"cache:set\",\n            \"content:replace\",\n            \"content:scroll\",\n            \"enable\",\n            \"disable\",\n            \"fetch:request\",\n            \"fetch:error\",\n            \"fetch:timeout\",\n            \"history:popstate\",\n            \"link:click\",\n            \"link:self\",\n            \"link:anchor\",\n            \"link:newtab\",\n            \"page:load\",\n            \"page:view\",\n            \"scroll:top\",\n            \"scroll:anchor\",\n            \"visit:start\",\n            \"visit:transition\",\n            \"visit:abort\",\n            \"visit:end\"\n        ], this.swup = t, this.init();\n    }\n    init() {\n        this.hooks.forEach((t)=>this.create(t));\n    }\n    create(t) {\n        this.registry.has(t) || this.registry.set(t, new Map);\n    }\n    exists(t) {\n        return this.registry.has(t);\n    }\n    get(t) {\n        const e = this.registry.get(t);\n        if (e) return e;\n        console.error(`Unknown hook '${t}'`);\n    }\n    clear() {\n        this.registry.forEach((t)=>t.clear());\n    }\n    on(t, e, n = {}) {\n        const o = this.get(t);\n        if (!o) return console.warn(`Hook '${t}' not found.`), ()=>{};\n        const r = {\n            ...n,\n            id: o.size + 1,\n            hook: t,\n            handler: e\n        };\n        return o.set(e, r), ()=>this.off(t, e);\n    }\n    before(t, e, n = {}) {\n        return this.on(t, e, {\n            ...n,\n            before: !0\n        });\n    }\n    replace(t, e, n = {}) {\n        return this.on(t, e, {\n            ...n,\n            replace: !0\n        });\n    }\n    once(t, e, n = {}) {\n        return this.on(t, e, {\n            ...n,\n            once: !0\n        });\n    }\n    off(t, e) {\n        const n = this.get(t);\n        n && e ? n.delete(e) || console.warn(`Handler for hook '${t}' not found.`) : n && n.clear();\n    }\n    call(t, e, n, o) {\n        try {\n            const r = this, [i, s, a] = r.parseCallArgs(t, e, n, o), { before: c, handler: l, after: h } = r.getHandlers(t, a);\n            return Promise.resolve(r.run(c, i, s)).then(function() {\n                return Promise.resolve(r.run(l, i, s, !0)).then(function([e]) {\n                    return Promise.resolve(r.run(h, i, s)).then(function() {\n                        return r.dispatchDomEvent(t, i, s), e;\n                    });\n                });\n            });\n        } catch (t) {\n            return Promise.reject(t);\n        }\n    }\n    callSync(t, e, n, o) {\n        const [r, i, s] = this.parseCallArgs(t, e, n, o), { before: a, handler: c, after: l } = this.getHandlers(t, s);\n        this.runSync(a, r, i);\n        const [h] = this.runSync(c, r, i, !0);\n        return this.runSync(l, r, i), this.dispatchDomEvent(t, r, i), h;\n    }\n    parseCallArgs(t, e, n, o) {\n        return e instanceof $6c9437c8078b0d3b$var$y || \"object\" != typeof e && \"function\" != typeof n ? [\n            e,\n            n,\n            o\n        ] : [\n            void 0,\n            e,\n            n\n        ];\n    }\n    run(t, e, n, o = !1) {\n        try {\n            let r;\n            const i = this;\n            void 0 === e && (e = i.swup.visit);\n            const s = [], a = function(t, e, n) {\n                if (\"function\" == typeof t[$6c9437c8078b0d3b$var$k]) {\n                    var o, r, i, s = t[$6c9437c8078b0d3b$var$k]();\n                    if (function t(a) {\n                        try {\n                            for(; !((o = s.next()).done || n && n());)if ((a = e(o.value)) && a.then) {\n                                if (!$6c9437c8078b0d3b$var$E(a)) return void a.then(t, i || (i = $6c9437c8078b0d3b$var$b.bind(null, r = new $6c9437c8078b0d3b$var$S, 2)));\n                                a = a.v;\n                            }\n                            r ? $6c9437c8078b0d3b$var$b(r, 1, a) : r = a;\n                        } catch (t) {\n                            $6c9437c8078b0d3b$var$b(r || (r = new $6c9437c8078b0d3b$var$S), 2, t);\n                        }\n                    }(), s.return) {\n                        var a = function(t) {\n                            try {\n                                o.done || s.return();\n                            } catch (t) {}\n                            return t;\n                        };\n                        if (r && r.then) return r.then(a, function(t) {\n                            throw a(t);\n                        });\n                        a();\n                    }\n                    return r;\n                }\n                if (!(\"length\" in t)) throw new TypeError(\"Object is not iterable\");\n                for(var c = [], l = 0; l < t.length; l++)c.push(t[l]);\n                return function(t, e, n) {\n                    var o, r, i = -1;\n                    return function s(a) {\n                        try {\n                            for(; ++i < t.length && (!n || !n());)if ((a = e(i)) && a.then) {\n                                if (!$6c9437c8078b0d3b$var$E(a)) return void a.then(s, r || (r = $6c9437c8078b0d3b$var$b.bind(null, o = new $6c9437c8078b0d3b$var$S, 2)));\n                                a = a.v;\n                            }\n                            o ? $6c9437c8078b0d3b$var$b(o, 1, a) : o = a;\n                        } catch (t) {\n                            $6c9437c8078b0d3b$var$b(o || (o = new $6c9437c8078b0d3b$var$S), 2, t);\n                        }\n                    }(), o;\n                }(c, function(t) {\n                    return e(c[t]);\n                }, n);\n            }(t, function({ hook: t, handler: r, defaultHandler: a, once: c }) {\n                if (!e?.done) return c && i.off(t, r), function(t, o) {\n                    try {\n                        var i = Promise.resolve($6c9437c8078b0d3b$export$8586fbe018c72b76(r, [\n                            e,\n                            n,\n                            a\n                        ])).then(function(t) {\n                            s.push(t);\n                        });\n                    } catch (t) {\n                        return o(t);\n                    }\n                    return i && i.then ? i.then(void 0, o) : i;\n                }(0, function(e) {\n                    if (o) throw e;\n                    console.error(`Error in hook '${t}':`, e);\n                });\n            }, function() {\n                return r;\n            });\n            return Promise.resolve(a && a.then ? a.then(function(t) {\n                return r ? t : s;\n            }) : r ? a : s);\n        } catch (t) {\n            return Promise.reject(t);\n        }\n    }\n    runSync(t, e = this.swup.visit, n, o = !1) {\n        const r = [];\n        for (const { hook: i, handler: s, defaultHandler: a, once: c } of t)if (!e?.done) {\n            c && this.off(i, s);\n            try {\n                const t = s(e, n, a);\n                r.push(t), $6c9437c8078b0d3b$export$4369c812aac99591(t) && console.warn(`Swup will not await Promises in handler for synchronous hook '${i}'.`);\n            } catch (t) {\n                if (o) throw t;\n                console.error(`Error in hook '${i}':`, t);\n            }\n        }\n        return r;\n    }\n    getHandlers(t, e) {\n        const n = this.get(t);\n        if (!n) return {\n            found: !1,\n            before: [],\n            handler: [],\n            after: [],\n            replaced: !1\n        };\n        const o = Array.from(n.values()), r = this.sortRegistrations, i = o.filter(({ before: t, replace: e })=>t && !e).sort(r), s = o.filter(({ replace: t })=>t).filter((t)=>!0).sort(r), a = o.filter(({ before: t, replace: e })=>!t && !e).sort(r), c = s.length > 0;\n        let l = [];\n        if (e && (l = [\n            {\n                id: 0,\n                hook: t,\n                handler: e\n            }\n        ], c)) {\n            const n = s.length - 1, o = (t)=>{\n                const n = s[t - 1];\n                return n ? (e, r)=>n.handler(e, r, o(t - 1)) : e;\n            };\n            l = [\n                {\n                    id: 0,\n                    hook: t,\n                    handler: s[n].handler,\n                    defaultHandler: o(n)\n                }\n            ];\n        }\n        return {\n            found: !0,\n            before: i,\n            handler: l,\n            after: a,\n            replaced: c\n        };\n    }\n    sortRegistrations(t, e) {\n        return (t.priority ?? 0) - (e.priority ?? 0) || t.id - e.id || 0;\n    }\n    dispatchDomEvent(t, e, n) {\n        if (e?.done) return;\n        const o = {\n            hook: t,\n            args: n,\n            visit: e || this.swup.visit\n        };\n        document.dispatchEvent(new CustomEvent(\"swup:any\", {\n            detail: o,\n            bubbles: !0\n        })), document.dispatchEvent(new CustomEvent(`swup:${t}`, {\n            detail: o,\n            bubbles: !0\n        }));\n    }\n}\nconst $6c9437c8078b0d3b$var$C = (t)=>{\n    if (t && \"#\" === t.charAt(0) && (t = t.substring(1)), !t) return null;\n    const e = decodeURIComponent(t);\n    let n = document.getElementById(t) || document.getElementById(e) || $6c9437c8078b0d3b$export$2fa187e846a241c4(`a[name='${CSS.escape(t)}']`) || $6c9437c8078b0d3b$export$2fa187e846a241c4(`a[name='${CSS.escape(e)}']`);\n    return n || \"top\" !== t || (n = document.body), n;\n}, $6c9437c8078b0d3b$var$$ = function({ elements: t, selector: e }) {\n    try {\n        if (!1 === e && !t) return Promise.resolve();\n        let n = [];\n        if (t) n = Array.from(t);\n        else if (e && (n = $6c9437c8078b0d3b$export$dcd0d083aa86c355(e, document.body), !n.length)) return console.warn(`[swup] No elements found matching animationSelector \\`${e}\\``), Promise.resolve();\n        const o = n.map((t)=>(function(t) {\n                const { type: e, timeout: n, propCount: o } = function(t) {\n                    const e = window.getComputedStyle(t), n = $6c9437c8078b0d3b$var$H(e, `${$6c9437c8078b0d3b$var$x}Delay`), o = $6c9437c8078b0d3b$var$H(e, `${$6c9437c8078b0d3b$var$x}Duration`), r = $6c9437c8078b0d3b$var$j(n, o), i = $6c9437c8078b0d3b$var$H(e, `${$6c9437c8078b0d3b$var$A}Delay`), s = $6c9437c8078b0d3b$var$H(e, `${$6c9437c8078b0d3b$var$A}Duration`), a = $6c9437c8078b0d3b$var$j(i, s), c = Math.max(r, a), l = c > 0 ? r > a ? $6c9437c8078b0d3b$var$x : $6c9437c8078b0d3b$var$A : null;\n                    return {\n                        type: l,\n                        timeout: c,\n                        propCount: l ? l === $6c9437c8078b0d3b$var$x ? o.length : s.length : 0\n                    };\n                }(t);\n                return !(!e || !n) && new Promise((r)=>{\n                    const i = `${e}end`, s = performance.now();\n                    let a = 0;\n                    const c = ()=>{\n                        t.removeEventListener(i, l), r();\n                    }, l = (e)=>{\n                        if (e.target === t) {\n                            if (!function(t) {\n                                return [\n                                    `${$6c9437c8078b0d3b$var$x}end`,\n                                    `${$6c9437c8078b0d3b$var$A}end`\n                                ].includes(t.type);\n                            }(e)) throw new Error(\"Not a transition or animation event.\");\n                            (performance.now() - s) / 1e3 < e.elapsedTime || ++a >= o && c();\n                        }\n                    };\n                    setTimeout(()=>{\n                        a < o && c();\n                    }, n + 1), t.addEventListener(i, l);\n                });\n            })(t));\n        return o.filter(Boolean).length > 0 ? Promise.resolve(Promise.all(o)).then(function() {}) : (e && console.warn(`[swup] No CSS animation duration defined on elements matching \\`${e}\\``), Promise.resolve());\n    } catch (t) {\n        return Promise.reject(t);\n    }\n}, $6c9437c8078b0d3b$var$x = \"transition\", $6c9437c8078b0d3b$var$A = \"animation\";\nfunction $6c9437c8078b0d3b$var$H(t, e) {\n    return (t[e] || \"\").split(\", \");\n}\nfunction $6c9437c8078b0d3b$var$j(t, e) {\n    for(; t.length < e.length;)t = t.concat(t);\n    return Math.max(...e.map((e, n)=>$6c9437c8078b0d3b$var$V(e) + $6c9437c8078b0d3b$var$V(t[n])));\n}\nfunction $6c9437c8078b0d3b$var$V(t) {\n    return 1e3 * parseFloat(t);\n}\nconst $6c9437c8078b0d3b$var$I = function(t, e = {}) {\n    try {\n        let a;\n        const c = this;\n        function s(s) {\n            if (a) return s;\n            c.navigating = !0, c.visit = t;\n            const { el: l } = t.trigger;\n            e.referrer = e.referrer || c.currentPageUrl, !1 === e.animate && (t.animation.animate = !1), t.animation.animate || c.classes.clear();\n            const h = e.history || l?.getAttribute(\"data-swup-history\") || void 0;\n            h && [\n                \"push\",\n                \"replace\"\n            ].includes(h) && (t.history.action = h);\n            const u = e.animation || l?.getAttribute(\"data-swup-animation\") || void 0;\n            return u && (t.animation.name = u), \"object\" == typeof e.cache ? (t.cache.read = e.cache.read ?? t.cache.read, t.cache.write = e.cache.write ?? t.cache.write) : void 0 !== e.cache && (t.cache = {\n                read: !!e.cache,\n                write: !!e.cache\n            }), delete e.cache, function(s, a) {\n                try {\n                    var l = function(s, a) {\n                        try {\n                            var l = Promise.resolve(c.hooks.call(\"visit:start\", t, void 0)).then(function() {\n                                function s() {\n                                    if (!t.done) return Promise.resolve(c.hooks.call(\"visit:transition\", t, void 0, function() {\n                                        try {\n                                            let n;\n                                            function e(e) {\n                                                return n ? e : (t.advance(4), Promise.resolve(c.animatePageOut(t)).then(function() {\n                                                    function e() {\n                                                        return Promise.resolve(c.animatePageIn(t)).then(function() {});\n                                                    }\n                                                    const n = function() {\n                                                        if (t.animation.native && document.startViewTransition) return Promise.resolve(document.startViewTransition(function() {\n                                                            try {\n                                                                const e = c.renderPage;\n                                                                return Promise.resolve(a).then(function(n) {\n                                                                    return Promise.resolve(e.call(c, t, n));\n                                                                });\n                                                            } catch (t) {\n                                                                return Promise.reject(t);\n                                                            }\n                                                        }).finished).then(function() {});\n                                                        {\n                                                            const e = c.renderPage;\n                                                            return Promise.resolve(a).then(function(n) {\n                                                                return Promise.resolve(e.call(c, t, n)).then(function() {});\n                                                            });\n                                                        }\n                                                    }();\n                                                    return n && n.then ? n.then(e) : e();\n                                                }));\n                                            }\n                                            const o = function() {\n                                                if (!t.animation.animate) return Promise.resolve(c.hooks.call(\"animation:skip\", void 0)).then(function() {\n                                                    const e = c.renderPage;\n                                                    return Promise.resolve(a).then(function(o) {\n                                                        return Promise.resolve(e.call(c, t, o)).then(function() {\n                                                            n = 1;\n                                                        });\n                                                    });\n                                                });\n                                            }();\n                                            return Promise.resolve(o && o.then ? o.then(e) : e(o));\n                                        } catch (r) {\n                                            return Promise.reject(r);\n                                        }\n                                    })).then(function() {\n                                        if (!t.done) return Promise.resolve(c.hooks.call(\"visit:end\", t, void 0, ()=>c.classes.clear())).then(function() {\n                                            t.state = 7, c.navigating = !1, c.onVisitEnd && (c.onVisitEnd(), c.onVisitEnd = void 0);\n                                        });\n                                    });\n                                }\n                                t.state = 3;\n                                const a = c.hooks.call(\"page:load\", t, {\n                                    options: e\n                                }, function(t, e) {\n                                    try {\n                                        function n(t) {\n                                            return e.page = t, e.cache = !!o, e.page;\n                                        }\n                                        let o;\n                                        return t.cache.read && (o = c.cache.get(t.to.url)), Promise.resolve(o ? n(o) : Promise.resolve(c.fetchPage(t.to.url, e.options)).then(n));\n                                    } catch (r) {\n                                        return Promise.reject(r);\n                                    }\n                                });\n                                if (a.then(({ html: e })=>{\n                                    t.advance(5), t.to.html = e, t.to.document = (new DOMParser).parseFromString(e, \"text/html\");\n                                }), !t.history.popstate) {\n                                    const e = t.to.url + t.to.hash;\n                                    \"replace\" === t.history.action || t.to.url === c.currentPageUrl ? $6c9437c8078b0d3b$export$9dd2847e0d2d8b0(e) : (c.currentHistoryIndex++, $6c9437c8078b0d3b$export$c38a4311235454af(e, {\n                                        index: c.currentHistoryIndex\n                                    }));\n                                }\n                                c.currentPageUrl = $6c9437c8078b0d3b$export$dc90482e4ef07afd(), t.history.popstate && c.classes.add(\"is-popstate\"), t.animation.name && c.classes.add(`to-${$6c9437c8078b0d3b$export$b04d9b8d414ba5e8(t.animation.name)}`);\n                                const l = function() {\n                                    if (t.animation.wait) return Promise.resolve(a).then(function() {});\n                                }();\n                                return l && l.then ? l.then(s) : s();\n                            });\n                        } catch (t) {\n                            return a(t);\n                        }\n                        return l && l.then ? l.then(void 0, a) : l;\n                    }(0, function(e) {\n                        e && !e?.aborted ? (t.state = 9, console.error(e), c.options.skipPopStateHandling = ()=>(window.location.assign(t.to.url + t.to.hash), !0), window.history.back()) : t.state = 8;\n                    });\n                } catch (t) {\n                    return a(!0, t);\n                }\n                return l && l.then ? l.then(a.bind(null, !1), a.bind(null, !0)) : a(!1, l);\n            }(0, function(e, n) {\n                if (delete t.to.document, e) throw n;\n                return n;\n            });\n        }\n        const l = function() {\n            if (c.navigating) return function() {\n                if (!(c.visit.state >= 6)) return Promise.resolve(c.hooks.call(\"visit:abort\", c.visit, void 0)).then(function() {\n                    delete c.visit.to.document, c.visit.state = 8;\n                });\n                t.state = 2, c.onVisitEnd = ()=>c.performNavigation(t, e), a = 1;\n            }();\n        }();\n        return Promise.resolve(l && l.then ? l.then(s) : s(l));\n    } catch (h) {\n        return Promise.reject(h);\n    }\n};\nfunction $6c9437c8078b0d3b$var$L(t, e = {}, n = {}) {\n    if (\"string\" != typeof t) throw new Error(\"swup.navigate() requires a URL parameter\");\n    if (this.shouldIgnoreVisit(t, {\n        el: n.el,\n        event: n.event\n    })) return void window.location.assign(t);\n    const { url: o, hash: r } = $6c9437c8078b0d3b$export$18a2be9195644f38.fromUrl(t), i = this.createVisit({\n        ...n,\n        to: o,\n        hash: r\n    });\n    this.performNavigation(i, e);\n}\nconst $6c9437c8078b0d3b$var$T = function(t) {\n    try {\n        const e = this;\n        return Promise.resolve(e.hooks.call(\"animation:out:start\", t, void 0, ()=>{\n            e.classes.add(\"is-changing\", \"is-animating\", \"is-leaving\");\n        })).then(function() {\n            return Promise.resolve(e.hooks.call(\"animation:out:await\", t, {\n                skip: !1\n            }, (t, { skip: n })=>{\n                if (!n) return e.awaitAnimations({\n                    selector: t.animation.selector\n                });\n            })).then(function() {\n                return Promise.resolve(e.hooks.call(\"animation:out:end\", t, void 0)).then(function() {});\n            });\n        });\n    } catch (t) {\n        return Promise.reject(t);\n    }\n}, $6c9437c8078b0d3b$var$q = function(t) {\n    const e = t.to.document;\n    if (!e) return !1;\n    const n = e.querySelector(\"title\")?.innerText || \"\";\n    document.title = n;\n    const o = $6c9437c8078b0d3b$export$dcd0d083aa86c355('[data-swup-persist]:not([data-swup-persist=\"\"])'), r = t.containers.map((t)=>{\n        const n = document.querySelector(t), o = e.querySelector(t);\n        return n && o ? (n.replaceWith(o.cloneNode(!0)), !0) : (n || console.warn(`[swup] Container missing in current document: ${t}`), o || console.warn(`[swup] Container missing in incoming document: ${t}`), !1);\n    }).filter(Boolean);\n    return o.forEach((t)=>{\n        const e = t.getAttribute(\"data-swup-persist\"), n = $6c9437c8078b0d3b$export$2fa187e846a241c4(`[data-swup-persist=\"${e}\"]`);\n        n && n !== t && n.replaceWith(t);\n    }), r.length === t.containers.length;\n}, $6c9437c8078b0d3b$var$R = function(t) {\n    const e = {\n        behavior: \"auto\"\n    }, { target: n, reset: o } = t.scroll, r = n ?? t.to.hash;\n    let i = !1;\n    return r && (i = this.hooks.callSync(\"scroll:anchor\", t, {\n        hash: r,\n        options: e\n    }, (t, { hash: e, options: n })=>{\n        const o = this.getAnchorElement(e);\n        return o && o.scrollIntoView(n), !!o;\n    })), o && !i && (i = this.hooks.callSync(\"scroll:top\", t, {\n        options: e\n    }, (t, { options: e })=>(window.scrollTo({\n            top: 0,\n            left: 0,\n            ...e\n        }), !0))), i;\n}, $6c9437c8078b0d3b$var$N = function(t) {\n    try {\n        const e = this;\n        if (t.done) return Promise.resolve();\n        const n = e.hooks.call(\"animation:in:await\", t, {\n            skip: !1\n        }, (t, { skip: n })=>{\n            if (!n) return e.awaitAnimations({\n                selector: t.animation.selector\n            });\n        });\n        return Promise.resolve($6c9437c8078b0d3b$export$bdd553fddd433dcb()).then(function() {\n            return Promise.resolve(e.hooks.call(\"animation:in:start\", t, void 0, ()=>{\n                e.classes.remove(\"is-animating\");\n            })).then(function() {\n                return Promise.resolve(n).then(function() {\n                    return Promise.resolve(e.hooks.call(\"animation:in:end\", t, void 0)).then(function() {});\n                });\n            });\n        });\n    } catch (t) {\n        return Promise.reject(t);\n    }\n}, $6c9437c8078b0d3b$var$D = function(t, e) {\n    try {\n        const r = this;\n        if (t.done) return Promise.resolve();\n        t.advance(6);\n        const { url: s } = e;\n        return r.isSameResolvedUrl($6c9437c8078b0d3b$export$dc90482e4ef07afd(), s) || ($6c9437c8078b0d3b$export$9dd2847e0d2d8b0(s), r.currentPageUrl = $6c9437c8078b0d3b$export$dc90482e4ef07afd(), t.to.url = r.currentPageUrl), Promise.resolve(r.hooks.call(\"content:replace\", t, {\n            page: e\n        }, (t, {})=>{\n            if (r.classes.remove(\"is-leaving\"), t.animation.animate && r.classes.add(\"is-rendering\"), !r.replaceContent(t)) throw new Error(\"[swup] Container mismatch, aborting\");\n            t.animation.animate && (r.classes.add(\"is-changing\", \"is-animating\", \"is-rendering\"), t.animation.name && r.classes.add(`to-${$6c9437c8078b0d3b$export$b04d9b8d414ba5e8(t.animation.name)}`));\n        })).then(function() {\n            return Promise.resolve(r.hooks.call(\"content:scroll\", t, void 0, ()=>r.scrollToContent(t))).then(function() {\n                return Promise.resolve(r.hooks.call(\"page:view\", t, {\n                    url: r.currentPageUrl,\n                    title: document.title\n                })).then(function() {});\n            });\n        });\n    } catch (t) {\n        return Promise.reject(t);\n    }\n}, $6c9437c8078b0d3b$var$M = function(t) {\n    var e;\n    if (e = t, Boolean(e?.isSwupPlugin)) {\n        if (t.swup = this, !t._checkRequirements || t._checkRequirements()) return t._beforeMount && t._beforeMount(), t.mount(), this.plugins.push(t), this.plugins;\n    } else console.error(\"Not a swup plugin instance\", t);\n};\nfunction $6c9437c8078b0d3b$var$O(t) {\n    const e = this.findPlugin(t);\n    if (e) return e.unmount(), e._afterUnmount && e._afterUnmount(), this.plugins = this.plugins.filter((t)=>t !== e), this.plugins;\n    console.error(\"No such plugin\", e);\n}\nfunction $6c9437c8078b0d3b$var$W(t) {\n    return this.plugins.find((e)=>e === t || e.name === t || e.name === `Swup${String(t)}`);\n}\nfunction $6c9437c8078b0d3b$var$B(t) {\n    if (\"function\" != typeof this.options.resolveUrl) return console.warn(\"[swup] options.resolveUrl expects a callback function.\"), t;\n    const e = this.options.resolveUrl(t);\n    return e && \"string\" == typeof e ? e.startsWith(\"//\") || e.startsWith(\"http\") ? (console.warn(\"[swup] options.resolveUrl needs to return a relative url\"), t) : e : (console.warn(\"[swup] options.resolveUrl needs to return a url\"), t);\n}\nfunction $6c9437c8078b0d3b$var$_(t, e) {\n    return this.resolveUrl(t) === this.resolveUrl(e);\n}\nconst $6c9437c8078b0d3b$var$F = {\n    animateHistoryBrowsing: !1,\n    animationSelector: '[class*=\"transition-\"]',\n    animationScope: \"html\",\n    cache: !0,\n    containers: [\n        \"#swup\"\n    ],\n    ignoreVisit: (t, { el: e } = {})=>!!e?.closest(\"[data-no-swup]\"),\n    linkSelector: \"a[href]\",\n    linkToSelf: \"scroll\",\n    native: !1,\n    plugins: [],\n    resolveUrl: (t)=>t,\n    requestHeaders: {\n        \"X-Requested-With\": \"swup\",\n        Accept: \"text/html, application/xhtml+xml\"\n    },\n    skipPopStateHandling: (t)=>\"swup\" !== t.state?.source,\n    timeout: 0\n};\nclass $6c9437c8078b0d3b$export$2e2bcd8739ae039 {\n    constructor(t = {}){\n        this.version = \"4.6.1\", this.options = void 0, this.defaults = $6c9437c8078b0d3b$var$F, this.plugins = [], this.visit = void 0, this.cache = void 0, this.hooks = void 0, this.classes = void 0, this.currentPageUrl = $6c9437c8078b0d3b$export$dc90482e4ef07afd(), this.currentHistoryIndex = void 0, this.clickDelegate = void 0, this.navigating = !1, this.onVisitEnd = void 0, this.use = $6c9437c8078b0d3b$var$M, this.unuse = $6c9437c8078b0d3b$var$O, this.findPlugin = $6c9437c8078b0d3b$var$W, this.log = ()=>{}, this.navigate = $6c9437c8078b0d3b$var$L, this.performNavigation = $6c9437c8078b0d3b$var$I, this.createVisit = $6c9437c8078b0d3b$var$P, this.delegateEvent = $6c9437c8078b0d3b$export$b93d41a1bb659592, this.fetchPage = $6c9437c8078b0d3b$var$l, this.awaitAnimations = $6c9437c8078b0d3b$var$$, this.renderPage = $6c9437c8078b0d3b$var$D, this.replaceContent = $6c9437c8078b0d3b$var$q, this.animatePageIn = $6c9437c8078b0d3b$var$N, this.animatePageOut = $6c9437c8078b0d3b$var$T, this.scrollToContent = $6c9437c8078b0d3b$var$R, this.getAnchorElement = $6c9437c8078b0d3b$var$C, this.getCurrentUrl = $6c9437c8078b0d3b$export$dc90482e4ef07afd, this.resolveUrl = $6c9437c8078b0d3b$var$B, this.isSameResolvedUrl = $6c9437c8078b0d3b$var$_, this.options = {\n            ...this.defaults,\n            ...t\n        }, this.handleLinkClick = this.handleLinkClick.bind(this), this.handlePopState = this.handlePopState.bind(this), this.cache = new $6c9437c8078b0d3b$var$u(this), this.classes = new $6c9437c8078b0d3b$var$w(this), this.hooks = new $6c9437c8078b0d3b$var$U(this), this.visit = this.createVisit({\n            to: \"\"\n        }), this.currentHistoryIndex = window.history.state?.index ?? 1, this.enable();\n    }\n    enable() {\n        try {\n            const t = this, { linkSelector: e } = t.options;\n            return t.clickDelegate = t.delegateEvent(e, \"click\", t.handleLinkClick), window.addEventListener(\"popstate\", t.handlePopState), t.options.animateHistoryBrowsing && (window.history.scrollRestoration = \"manual\"), t.options.native = t.options.native && !!document.startViewTransition, t.options.plugins.forEach((e)=>t.use(e)), \"swup\" !== window.history.state?.source && $6c9437c8078b0d3b$export$9dd2847e0d2d8b0(null, {\n                index: t.currentHistoryIndex\n            }), Promise.resolve($6c9437c8078b0d3b$export$bdd553fddd433dcb()).then(function() {\n                return Promise.resolve(t.hooks.call(\"enable\", void 0, void 0, ()=>{\n                    const e = document.documentElement;\n                    e.classList.add(\"swup-enabled\"), e.classList.toggle(\"swup-native\", t.options.native);\n                })).then(function() {});\n            });\n        } catch (t) {\n            return Promise.reject(t);\n        }\n    }\n    destroy() {\n        try {\n            const t = this;\n            return t.clickDelegate.destroy(), window.removeEventListener(\"popstate\", t.handlePopState), t.cache.clear(), t.options.plugins.forEach((e)=>t.unuse(e)), Promise.resolve(t.hooks.call(\"disable\", void 0, void 0, ()=>{\n                const t = document.documentElement;\n                t.classList.remove(\"swup-enabled\"), t.classList.remove(\"swup-native\");\n            })).then(function() {\n                t.hooks.clear();\n            });\n        } catch (t) {\n            return Promise.reject(t);\n        }\n    }\n    shouldIgnoreVisit(t, { el: e, event: n } = {}) {\n        const { origin: o, url: r, hash: i } = $6c9437c8078b0d3b$export$18a2be9195644f38.fromUrl(t);\n        return o !== window.location.origin || !(!e || !this.triggerWillOpenNewWindow(e)) || !!this.options.ignoreVisit(r + i, {\n            el: e,\n            event: n\n        });\n    }\n    handleLinkClick(t) {\n        const e = t.delegateTarget, { href: n, url: o, hash: r } = $6c9437c8078b0d3b$export$18a2be9195644f38.fromElement(e);\n        if (this.shouldIgnoreVisit(n, {\n            el: e,\n            event: t\n        })) return;\n        if (this.navigating && o === this.visit.to.url) return void t.preventDefault();\n        const s = this.createVisit({\n            to: o,\n            hash: r,\n            el: e,\n            event: t\n        });\n        t.metaKey || t.ctrlKey || t.shiftKey || t.altKey ? this.hooks.callSync(\"link:newtab\", s, {\n            href: n\n        }) : 0 === t.button && this.hooks.callSync(\"link:click\", s, {\n            el: e,\n            event: t\n        }, ()=>{\n            const e = s.from.url ?? \"\";\n            t.preventDefault(), o && o !== e ? this.isSameResolvedUrl(o, e) || this.performNavigation(s) : r ? this.hooks.callSync(\"link:anchor\", s, {\n                hash: r\n            }, ()=>{\n                $6c9437c8078b0d3b$export$9dd2847e0d2d8b0(o + r), this.scrollToContent(s);\n            }) : this.hooks.callSync(\"link:self\", s, void 0, ()=>{\n                \"navigate\" === this.options.linkToSelf ? this.performNavigation(s) : ($6c9437c8078b0d3b$export$9dd2847e0d2d8b0(o), this.scrollToContent(s));\n            });\n        });\n    }\n    handlePopState(t) {\n        const e = t.state?.url ?? window.location.href;\n        if (this.options.skipPopStateHandling(t)) return;\n        if (this.isSameResolvedUrl($6c9437c8078b0d3b$export$dc90482e4ef07afd(), this.currentPageUrl)) return;\n        const { url: n, hash: r } = $6c9437c8078b0d3b$export$18a2be9195644f38.fromUrl(e), i = this.createVisit({\n            to: n,\n            hash: r,\n            event: t\n        });\n        i.history.popstate = !0;\n        const s = t.state?.index ?? 0;\n        s && s !== this.currentHistoryIndex && (i.history.direction = s - this.currentHistoryIndex > 0 ? \"forwards\" : \"backwards\", this.currentHistoryIndex = s), i.animation.animate = !1, i.scroll.reset = !1, i.scroll.target = !1, this.options.animateHistoryBrowsing && (i.animation.animate = !0, i.scroll.reset = !0), this.hooks.callSync(\"history:popstate\", i, {\n            event: t\n        }, ()=>{\n            this.performNavigation(i);\n        });\n    }\n    triggerWillOpenNewWindow(t) {\n        return !!t.matches('[download], [target=\"_blank\"]');\n    }\n}\n\n\nconst $a0934a80bbb330d2$var$r = (r)=>String(r).split(\".\").map((r)=>String(parseInt(r || \"0\", 10))).concat([\n        \"0\",\n        \"0\"\n    ]).slice(0, 3).join(\".\");\nclass $a0934a80bbb330d2$export$2e2bcd8739ae039 {\n    constructor(){\n        this.isSwupPlugin = !0, this.swup = void 0, this.version = void 0, this.requires = {}, this.handlersToUnregister = [];\n    }\n    mount() {}\n    unmount() {\n        this.handlersToUnregister.forEach((r)=>r()), this.handlersToUnregister = [];\n    }\n    _beforeMount() {\n        if (!this.name) throw new Error(\"You must define a name of plugin when creating a class.\");\n    }\n    _afterUnmount() {}\n    _checkRequirements() {\n        return \"object\" != typeof this.requires || Object.entries(this.requires).forEach((e)=>{\n            let [t, n] = e;\n            if (n = Array.isArray(n) ? n : [\n                n\n            ], !function(e, t, n) {\n                const s = function(r, e) {\n                    if (\"swup\" === r) return e.version ?? \"\";\n                    {\n                        const t = e.findPlugin(r);\n                        return t?.version ?? \"\";\n                    }\n                }(e, n);\n                return !!s && ((e, t)=>t.every((t)=>{\n                        const [, n, s] = t.match(/^([\\D]+)?(.*)$/) || [];\n                        var o, i;\n                        return ((r, e)=>{\n                            const t = {\n                                \"\": (r)=>0 === r,\n                                \">\": (r)=>r > 0,\n                                \">=\": (r)=>r >= 0,\n                                \"<\": (r)=>r < 0,\n                                \"<=\": (r)=>r <= 0\n                            };\n                            return (t[e] || t[\"\"])(r);\n                        })((i = s, o = $a0934a80bbb330d2$var$r(o = e), i = $a0934a80bbb330d2$var$r(i), o.localeCompare(i, void 0, {\n                            numeric: !0\n                        })), n || \">=\");\n                    }))(s, t);\n            }(t, n, this.swup)) {\n                const r = `${t} ${n.join(\", \")}`;\n                throw new Error(`Plugin version mismatch: ${this.name} requires ${r}`);\n            }\n        }), !0;\n    }\n    on(r, e, t) {\n        var n;\n        void 0 === t && (t = {}), e = !(n = e).name.startsWith(\"bound \") || n.hasOwnProperty(\"prototype\") ? e.bind(this) : e;\n        const s = this.swup.hooks.on(r, e, t);\n        return this.handlersToUnregister.push(s), s;\n    }\n    once(r, e, t) {\n        return void 0 === t && (t = {}), this.on(r, e, {\n            ...t,\n            once: !0\n        });\n    }\n    before(r, e, t) {\n        return void 0 === t && (t = {}), this.on(r, e, {\n            ...t,\n            before: !0\n        });\n    }\n    replace(r, e, t) {\n        return void 0 === t && (t = {}), this.on(r, e, {\n            ...t,\n            replace: !0\n        });\n    }\n    off(r, e) {\n        return this.swup.hooks.off(r, e);\n    }\n}\n\n\nfunction $f106feef94b846aa$var$t(e) {\n    return \"title\" !== e.localName && !e.matches(\"[data-swup-theme]\");\n}\nfunction $f106feef94b846aa$var$s(e, t) {\n    return e.outerHTML === t.outerHTML;\n}\nfunction $f106feef94b846aa$var$n(e) {\n    return e.matches(\"link[rel=stylesheet][href]\");\n}\nclass $f106feef94b846aa$export$2e2bcd8739ae039 extends (0, $a0934a80bbb330d2$export$2e2bcd8739ae039) {\n    constructor(e = {}){\n        super();\n        const o = this;\n        this.name = \"SwupHeadPlugin\", this.requires = {\n            swup: \">=4.6\"\n        }, this.defaults = {\n            persistTags: !1,\n            persistAssets: !1,\n            awaitAssets: !1,\n            timeout: 3e3\n        }, this.options = void 0, this.updateHead = function(e, {}) {\n            try {\n                const u = e.to.document, { removed: l, added: a } = function(e, n, { shouldPersist: o = ()=>!1 } = {}) {\n                    const r = Array.from(e.children), i = Array.from(n.children), u = (l = r, i.reduce((e, t, n)=>(l.some((e)=>$f106feef94b846aa$var$s(t, e)) || e.push({\n                            el: t,\n                            index: n\n                        }), e), []));\n                    var l;\n                    const a = function(e, t) {\n                        return e.reduce((e, n)=>(t.some((e)=>$f106feef94b846aa$var$s(n, e)) || e.push({\n                                el: n\n                            }), e), []);\n                    }(r, i);\n                    return a.reverse().filter(({ el: e })=>$f106feef94b846aa$var$t(e)).filter(({ el: e })=>!o(e)).forEach(({ el: t })=>e.removeChild(t)), u.filter(({ el: e })=>$f106feef94b846aa$var$t(e)).forEach(({ el: t, index: s = 0 })=>{\n                        e.insertBefore(t.cloneNode(!0), e.children[s + 1] || null);\n                    }), {\n                        removed: a.map(({ el: e })=>e),\n                        added: u.map(({ el: e })=>e)\n                    };\n                }(document.head, u.head, {\n                    shouldPersist: (e)=>o.isPersistentTag(e)\n                });\n                o.swup.log(`Removed ${l.length} / added ${a.length} tags in head`);\n                const c = (r = document.documentElement).lang !== (i = u.documentElement).lang ? (r.lang = i.lang, r.lang) : null;\n                c && o.swup.log(`Updated lang attribute: ${c}`);\n                const d = function() {\n                    if (o.options.awaitAssets) {\n                        const e = function(e, t = 0) {\n                            return e.filter($f106feef94b846aa$var$n).map((e)=>(function(e, t = 0) {\n                                    const s = (t)=>{\n                                        (({ href: e })=>Array.from(document.styleSheets).map(({ href: e })=>e).includes(e))(e) ? t() : setTimeout(()=>s(t), 10);\n                                    };\n                                    return new Promise((e)=>{\n                                        s(e), t > 0 && setTimeout(e, t);\n                                    });\n                                })(e, t));\n                        }(a, o.options.timeout), t = function() {\n                            if (e.length) return o.swup.log(`Waiting for ${e.length} assets to load`), Promise.resolve(Promise.all(e)).then(function() {});\n                        }();\n                        if (t && t.then) return t.then(function() {});\n                    }\n                }();\n                return Promise.resolve(d && d.then ? d.then(function() {}) : void 0);\n            } catch (e) {\n                return Promise.reject(e);\n            }\n            var r, i;\n        }, this.options = {\n            ...this.defaults,\n            ...e\n        }, this.options.persistAssets && !this.options.persistTags && (this.options.persistTags = \"link[rel=stylesheet], script[src], style\");\n    }\n    mount() {\n        this.before(\"content:replace\", this.updateHead);\n    }\n    isPersistentTag(e) {\n        const { persistTags: t } = this.options;\n        return \"function\" == typeof t ? t(e) : \"string\" == typeof t ? e.matches(t) : Boolean(t);\n    }\n}\n\n\n\nclass $9b43daa2dbb615aa$export$2e2bcd8739ae039 extends (0, $a0934a80bbb330d2$export$2e2bcd8739ae039) {\n    constructor(t){\n        void 0 === t && (t = {}), super(), this.name = \"SwupScriptsPlugin\", this.requires = {\n            swup: \">=4\"\n        }, this.defaults = {\n            head: !0,\n            body: !0,\n            optin: !1\n        }, this.options = void 0, this.options = {\n            ...this.defaults,\n            ...t\n        };\n    }\n    mount() {\n        this.on(\"content:replace\", this.runScripts);\n    }\n    runScripts() {\n        const { head: t, body: e, optin: s } = this.options, o = this.getScope({\n            head: t,\n            body: e\n        });\n        if (!o) return;\n        const r = Array.from(o.querySelectorAll(s ? \"script[data-swup-reload-script]\" : \"script:not([data-swup-ignore-script])\"));\n        r.forEach((t)=>this.runScript(t)), this.swup.log(`Executed ${r.length} scripts.`);\n    }\n    runScript(t) {\n        const e = document.createElement(\"script\");\n        for (const { name: s, value: o } of t.attributes)e.setAttribute(s, o);\n        return e.textContent = t.textContent, t.replaceWith(e), e;\n    }\n    getScope(t) {\n        let { head: e, body: s } = t;\n        return e && s ? document : e ? document.head : s ? document.body : null;\n    }\n}\n\n\n\n// focus - focusOptions - preventScroll polyfill\n(function() {\n    if (typeof window === \"undefined\" || typeof document === \"undefined\" || typeof HTMLElement === \"undefined\") return;\n    var supportsPreventScrollOption = false;\n    try {\n        var focusElem = document.createElement(\"div\");\n        focusElem.addEventListener(\"focus\", function(event) {\n            event.preventDefault();\n            event.stopPropagation();\n        }, true);\n        focusElem.focus(Object.defineProperty({}, \"preventScroll\", {\n            get: function() {\n                // Edge v18 gives a false positive for supporting inputs\n                if (navigator && typeof navigator.userAgent !== \"undefined\" && navigator.userAgent && navigator.userAgent.match(/Edge\\/1[7-8]/)) return supportsPreventScrollOption = false;\n                supportsPreventScrollOption = true;\n            }\n        }));\n    } catch (e) {}\n    if (HTMLElement.prototype.nativeFocus === undefined && !supportsPreventScrollOption) {\n        HTMLElement.prototype.nativeFocus = HTMLElement.prototype.focus;\n        var calcScrollableElements = function(element) {\n            var parent = element.parentNode;\n            var scrollableElements = [];\n            var rootScrollingElement = document.scrollingElement || document.documentElement;\n            while(parent && parent !== rootScrollingElement){\n                if (parent.offsetHeight < parent.scrollHeight || parent.offsetWidth < parent.scrollWidth) scrollableElements.push([\n                    parent,\n                    parent.scrollTop,\n                    parent.scrollLeft\n                ]);\n                parent = parent.parentNode;\n            }\n            parent = rootScrollingElement;\n            scrollableElements.push([\n                parent,\n                parent.scrollTop,\n                parent.scrollLeft\n            ]);\n            return scrollableElements;\n        };\n        var restoreScrollPosition = function(scrollableElements) {\n            for(var i = 0; i < scrollableElements.length; i++){\n                scrollableElements[i][0].scrollTop = scrollableElements[i][1];\n                scrollableElements[i][0].scrollLeft = scrollableElements[i][2];\n            }\n            scrollableElements = [];\n        };\n        var patchedFocus = function(args) {\n            if (args && args.preventScroll) {\n                var evScrollableElements = calcScrollableElements(this);\n                if (typeof setTimeout === \"function\") {\n                    var thisElem = this;\n                    setTimeout(function() {\n                        thisElem.nativeFocus();\n                        restoreScrollPosition(evScrollableElements);\n                    }, 0);\n                } else {\n                    this.nativeFocus();\n                    restoreScrollPosition(evScrollableElements);\n                }\n            } else this.nativeFocus();\n        };\n        HTMLElement.prototype.focus = patchedFocus;\n    }\n})();\n\n\n\nfunction $f5c3d6a9f79a08f6$var$n(t, e) {\n    return Object.keys(e).reduce((t, n)=>t.replace(`{${n}}`, e[n] || \"\"), t || \"\");\n}\nclass $f5c3d6a9f79a08f6$var$o {\n    constructor(){\n        this.id = \"swup-announcer\", this.style = \"position:absolute;top:0;left:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;word-wrap:normal;width:1px;height:1px;\", this.region = void 0, this.region = this.getRegion() ?? this.createRegion();\n    }\n    getRegion() {\n        return document.getElementById(this.id);\n    }\n    createRegion() {\n        const t = function(t) {\n            const e = document.createElement(\"template\");\n            return e.innerHTML = t, e.content.children[0];\n        }(`<p aria-live=\"assertive\" aria-atomic=\"true\" id=\"${this.id}\" style=\"${this.style}\"></p>`);\n        return document.body.appendChild(t), t;\n    }\n    announce(t, e = 0) {\n        return new Promise((n)=>{\n            setTimeout(()=>{\n                this.region.textContent === t && (t = `${t}.`), this.region.textContent = \"\", this.region.textContent = t, n();\n            }, e);\n        });\n    }\n}\nfunction $f5c3d6a9f79a08f6$var$i(t) {\n    let e;\n    if (e = \"string\" == typeof t ? document.querySelector(t) : t, !(e instanceof HTMLElement)) return;\n    const n = e.getAttribute(\"tabindex\");\n    e.setAttribute(\"tabindex\", \"-1\"), e.focus({\n        preventScroll: !0\n    }), null !== n && e.setAttribute(\"tabindex\", n);\n}\nclass $f5c3d6a9f79a08f6$export$2e2bcd8739ae039 extends (0, $a0934a80bbb330d2$export$2e2bcd8739ae039) {\n    constructor(t = {}){\n        super(), this.name = \"SwupA11yPlugin\", this.requires = {\n            swup: \">=4\"\n        }, this.defaults = {\n            headingSelector: \"h1\",\n            respectReducedMotion: !0,\n            autofocus: !1,\n            announcements: {\n                visit: \"Navigated to: {title}\",\n                url: \"New page at {url}\"\n            }\n        }, this.options = void 0, this.announcer = void 0, this.announcementDelay = 100, this.rootSelector = \"body\", this.handleAnchorScroll = (t, { hash: e })=>{\n            const n = this.swup.getAnchorElement(e);\n            n instanceof HTMLElement && $f5c3d6a9f79a08f6$var$i(n);\n        }, this.options = {\n            ...this.defaults,\n            ...t\n        }, this.announcer = new $f5c3d6a9f79a08f6$var$o;\n    }\n    mount() {\n        this.swup.hooks.create(\"content:announce\"), this.swup.hooks.create(\"content:focus\"), this.before(\"visit:start\", this.prepareVisit), this.on(\"visit:start\", this.markAsBusy), this.on(\"visit:end\", this.unmarkAsBusy), this.on(\"visit:end\", this.focusContent), this.on(\"visit:end\", this.announceContent), this.on(\"scroll:anchor\", this.handleAnchorScroll), this.before(\"visit:start\", this.disableAnimations), this.before(\"link:self\", this.disableAnimations), this.before(\"link:anchor\", this.disableAnimations), this.swup.announce = this.announce.bind(this);\n    }\n    unmount() {\n        this.swup.announce = void 0;\n    }\n    announce(t) {\n        try {\n            return Promise.resolve(this.announcer.announce(t)).then(function() {});\n        } catch (t) {\n            return Promise.reject(t);\n        }\n    }\n    markAsBusy() {\n        document.documentElement.setAttribute(\"aria-busy\", \"true\");\n    }\n    unmarkAsBusy() {\n        document.documentElement.removeAttribute(\"aria-busy\");\n    }\n    prepareVisit(t) {\n        t.a11y = {\n            announce: void 0,\n            focus: this.rootSelector\n        };\n    }\n    announceContent(t) {\n        this.swup.hooks.callSync(\"content:announce\", t, void 0, (t)=>{\n            void 0 === t.a11y.announce && (t.a11y.announce = this.getPageAnnouncement()), t.a11y.announce && this.announcer.announce(t.a11y.announce, this.announcementDelay);\n        });\n    }\n    focusContent(t) {\n        this.swup.hooks.callSync(\"content:focus\", t, void 0, (t)=>{\n            t.a11y.focus && (this.options.autofocus && !0 === function() {\n                const t = function() {\n                    const t = document.querySelector(\"body [autofocus]\");\n                    if (t && !t.closest('[inert], [aria-disabled], [aria-hidden=\"true\"]')) return t;\n                }();\n                return !!t && (t !== document.activeElement && t.focus(), !0);\n            }() || $f5c3d6a9f79a08f6$var$i(t.a11y.focus));\n        });\n    }\n    getPageAnnouncement() {\n        const { headingSelector: t, announcements: o } = this.options;\n        return function({ headingSelector: t = \"h1\", announcements: o = {} }) {\n            const i = document.documentElement.lang || \"*\", { href: s, url: r, pathname: u } = (0, $6c9437c8078b0d3b$export$18a2be9195644f38).fromUrl(window.location.href), c = o[i] ?? o[\"*\"] ?? o;\n            if (\"object\" != typeof c) return;\n            const a = document.querySelector(t);\n            a || console.warn(`SwupA11yPlugin: No main heading (${t}) found on new page`);\n            const h = a?.getAttribute(\"aria-label\") || a?.textContent || document.title || $f5c3d6a9f79a08f6$var$n(c.url, {\n                href: s,\n                url: r,\n                path: u\n            });\n            return $f5c3d6a9f79a08f6$var$n(c.visit, {\n                title: h,\n                href: s,\n                url: r,\n                path: u\n            });\n        }({\n            headingSelector: t,\n            announcements: o\n        });\n    }\n    disableAnimations(t) {\n        this.options.respectReducedMotion && window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches && (t.animation.animate = !1, t.scroll.animate = !1);\n    }\n}\n\n\nconst $8e91ccc6b8b0af63$var$swup = new (0, $6c9437c8078b0d3b$export$2e2bcd8739ae039)({\n    containers: [\n        \"#content\",\n        \"#page-hook\",\n        \"footer\"\n    ],\n    plugins: [\n        new (0, $f106feef94b846aa$export$2e2bcd8739ae039)(),\n        new (0, $9b43daa2dbb615aa$export$2e2bcd8739ae039)({\n            body: false\n        }),\n        new (0, $f5c3d6a9f79a08f6$export$2e2bcd8739ae039)()\n    ]\n});\n\n\n\n\n\n\n\n\n$8e91ccc6b8b0af63$var$swup.hooks.on(\"page:view\", async ()=>{\n    const main = document.querySelector(\".main\");\n    main.scrollIntoView({\n        block: \"start\"\n    });\n    try {\n        const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);\n        const { lazyLoadImages: lazyLoadImages } = await (parcelRequire(\"gbcZ9\"));\n        const { default: Menu } = await (parcelRequire(\"4BdB9\"));\n        const { default: Bookmarks } = await (parcelRequire(\"gnsqx\"));\n        const { default: ViewToggle } = await (parcelRequire(\"8v2jD\"));\n        const { default: TaskButtons } = await (parcelRequire(\"kmWZY\"));\n        const { default: MinimizeWindows } = await (parcelRequire(\"iNGzu\"));\n        const { default: WindowManager } = await (parcelRequire(\"jaESz\"));\n        if (document.querySelector(\".bookmarks\")) new Bookmarks();\n        if (vw >= 700) (parcelRequire(\"h01UM\")).then((createDraggables)=>{\n            createDraggables.default();\n        });\n        new Menu();\n        new WindowManager();\n        new TaskButtons();\n        new MinimizeWindows();\n        new ViewToggle();\n        lazyLoadImages();\n        console.log(\"Modules loaded successfully.\");\n    } catch (error) {\n        console.error(\"Error loading modules:\", error);\n    }\n});\n\n})();\n//# sourceMappingURL=swup.js.map\n","\"use strict\";\n\nvar mapping = new Map();\nfunction register(baseUrl, manifest) {\n  for (var i = 0; i < manifest.length - 1; i += 2) {\n    mapping.set(manifest[i], {\n      baseUrl: baseUrl,\n      path: manifest[i + 1]\n    });\n  }\n}\nfunction resolve(id) {\n  var resolved = mapping.get(id);\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n  return new URL(resolved.path, resolved.baseUrl).toString();\n}\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","\"use strict\";\n\nvar bundleURL = {};\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n  return value;\n}\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^)\\n]+/g);\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n  return '/';\n}\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n}\n\n// TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp|(chrome|moz|safari-web)-extension):\\/\\/[^/]+/);\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n  return matches[0];\n}\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","module.exports = (require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-manifest').resolve(\"6UcPc\"))).then(() => parcelRequire('aci17'));","\"use strict\";\n\nvar cacheLoader = require('../cacheLoader');\nmodule.exports = cacheLoader(function (bundle) {\n  return new Promise(function (resolve, reject) {\n    // Don't insert the same script twice (e.g. if it was already in the HTML)\n    var existingScripts = document.getElementsByTagName('script');\n    if ([].concat(existingScripts).some(function isCurrentBundle(script) {\n      return script.src === bundle;\n    })) {\n      resolve();\n      return;\n    }\n    var preloadLink = document.createElement('link');\n    preloadLink.href = bundle;\n    preloadLink.rel = 'preload';\n    preloadLink.as = 'script';\n    document.head.appendChild(preloadLink);\n    var script = document.createElement('script');\n    script.async = true;\n    script.type = 'text/javascript';\n    script.src = bundle;\n    script.onerror = function (e) {\n      var error = new TypeError(\"Failed to fetch dynamically imported module: \".concat(bundle, \". Error: \").concat(e.message));\n      script.onerror = script.onload = null;\n      script.remove();\n      reject(error);\n    };\n    script.onload = function () {\n      script.onerror = script.onload = null;\n      resolve();\n    };\n    document.getElementsByTagName('head')[0].appendChild(script);\n  });\n});","\"use strict\";\n\nvar cachedBundles = {};\nvar cachedPreloads = {};\nvar cachedPrefetches = {};\nfunction getCache(type) {\n  switch (type) {\n    case 'preload':\n      return cachedPreloads;\n    case 'prefetch':\n      return cachedPrefetches;\n    default:\n      return cachedBundles;\n  }\n}\nmodule.exports = function (loader, type) {\n  return function (bundle) {\n    var cache = getCache(type);\n    if (cache[bundle]) {\n      return cache[bundle];\n    }\n    return cache[bundle] = loader.apply(null, arguments).catch(function (e) {\n      delete cache[bundle];\n      throw e;\n    });\n  };\n};","module.exports = (require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-manifest').resolve(\"1g79i\"))).then(() => parcelRequire('1NUJT'));","module.exports = (require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-manifest').resolve(\"A68i4\"))).then(() => parcelRequire('iofW6'));","module.exports = (require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-manifest').resolve(\"cynWl\"))).then(() => parcelRequire('5rB28'));","module.exports = (require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-manifest').resolve(\"1yLHV\"))).then(() => parcelRequire('2hgwE'));","module.exports = Promise.all([require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-manifest').resolve(\"1B69D\")), require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-manifest').resolve(\"9Y5Ex\"))]).then(() => parcelRequire('1FWyb'));","module.exports = (require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-manifest').resolve(\"1K2Wg\"))).then(() => parcelRequire('bATWL'));","module.exports = Promise.all([require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-manifest').resolve(\"1B69D\")), require(\"./helpers/browser/js-loader\")(require('./helpers/bundle-manifest').resolve(\"bXdr1\"))]).then(() => parcelRequire('Jj56w'));","require('./helpers/bundle-manifest').register(require('./helpers/bundle-url').getBundleURL('krAda'),JSON.parse(\"[\\\"krAda\\\",\\\"swup.js\\\",\\\"bXdr1\\\",\\\"../dragAndDrop.createDraggables.bfc3e51c.js\\\",\\\"1B69D\\\",\\\"../dragAndDrop.createDraggables.e5bf5573.js\\\",\\\"6UcPc\\\",\\\"../lazyLoad.69f65a3c.js\\\",\\\"1g79i\\\",\\\"../menu.a7fa81fa.js\\\",\\\"A68i4\\\",\\\"../bookmarks.607ad781.js\\\",\\\"cynWl\\\",\\\"../viewToggle.1078dc4b.js\\\",\\\"1yLHV\\\",\\\"../taskButtons.8d01a1c5.js\\\",\\\"9Y5Ex\\\",\\\"../minimizeWindows.9ec107dc.js\\\",\\\"1K2Wg\\\",\\\"../windowManager.4bb4f0db.js\\\"]\"));","import Swup from 'swup';\nimport SwupHeadPlugin from '@swup/head-plugin';\nimport SwupScriptsPlugin from '@swup/scripts-plugin';\nimport SwupA11yPlugin from '@swup/a11y-plugin';\n\nconst swup = new Swup({\n\tcontainers: ['#content', '#page-hook', 'footer'],\n\tplugins: [\n\t\tnew SwupHeadPlugin(),\n\t\tnew SwupScriptsPlugin({ body: false }),\n\t\tnew SwupA11yPlugin(),\n\t],\n});\n\nswup.hooks.on('page:view', async () => {\n\tconst main = document.querySelector('.main');\n\tmain.scrollIntoView({ block: 'start' });\n\n\ttry {\n\t\tconst vw = Math.max(\n\t\t\tdocument.documentElement.clientWidth || 0,\n\t\t\twindow.innerWidth || 0\n\t\t);\n\n\t\tconst { lazyLoadImages } = await import('./modules/lazyLoad.js');\n\t\tconst { default: Menu } = await import('./modules/menu.js');\n\t\tconst { default: Bookmarks } = await import('./modules/bookmarks.js');\n\t\tconst { default: ViewToggle } = await import('./modules/viewToggle.js');\n\t\tconst { default: TaskButtons } = await import('./modules/taskButtons.js');\n\t\tconst { default: MinimizeWindows } = await import(\n\t\t\t'./modules/minimizeWindows.js'\n\t\t);\n\t\tconst { default: WindowManager } = await import(\n\t\t\t'./modules/windowManager.js'\n\t\t);\n\n\t\tif (document.querySelector('.bookmarks')) {\n\t\t\tnew Bookmarks();\n\t\t}\n\n\t\tif (vw >= 700) {\n\t\t\timport('./modules/dragAndDrop.createDraggables.js').then(\n\t\t\t\t(createDraggables) => {\n\t\t\t\t\tcreateDraggables.default();\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tnew Menu();\n\t\tnew WindowManager();\n\t\tnew TaskButtons();\n\t\tnew MinimizeWindows();\n\t\tnew ViewToggle();\n\t\tlazyLoadImages();\n\n\t\tconsole.log('Modules loaded successfully.');\n\t} catch (error) {\n\t\tconsole.error('Error loading modules:', error);\n\t}\n});\n","import t from\"delegate-it\";import{match as e}from\"path-to-regexp\";const n=(t,e)=>String(t).toLowerCase().replace(/[\\s/_.]+/g,\"-\").replace(/[^\\w-]+/g,\"\").replace(/--+/g,\"-\").replace(/^-+|-+$/g,\"\")||e||\"\",o=({hash:t}={})=>window.location.pathname+window.location.search+(t?window.location.hash:\"\"),r=(t,e={})=>{const n={url:t=t||o({hash:!0}),random:Math.random(),source:\"swup\",...e};window.history.pushState(n,\"\",t)},i=(t=null,e={})=>{t=t||o({hash:!0});const n={...window.history.state||{},url:t,random:Math.random(),source:\"swup\",...e};window.history.replaceState(n,\"\",t)},s=(e,n,o,r)=>{const i=new AbortController;return r={...r,signal:i.signal},t(e,n,o,r),{destroy:()=>i.abort()}};class a extends URL{constructor(t,e=document.baseURI){super(t.toString(),e),Object.setPrototypeOf(this,a.prototype)}get url(){return this.pathname+this.search}static fromElement(t){const e=t.getAttribute(\"href\")||t.getAttribute(\"xlink:href\")||\"\";return new a(e)}static fromUrl(t){return new a(t)}}const c=(t,n)=>{try{return e(t,n)}catch(e){throw new Error(`[swup] Error parsing path \"${String(t)}\":\\n${String(e)}`)}},l=function(t,e={}){try{const o=this;function n(n){const{status:i,url:s}=u;return Promise.resolve(u.text()).then(function(n){if(500===i)throw o.hooks.call(\"fetch:error\",r,{status:i,response:u,url:s}),new h(`Server error: ${s}`,{status:i,url:s});if(!n)throw new h(`Empty response: ${s}`,{status:i,url:s});const{url:c}=a.fromUrl(s),l={url:c,html:n};return!r.cache.write||e.method&&\"GET\"!==e.method||t!==c||o.cache.set(l.url,l),l})}t=a.fromUrl(t).url;const{visit:r=o.visit}=e,i={...o.options.requestHeaders,...e.headers},s=e.timeout??o.options.timeout,c=new AbortController,{signal:l}=c;e={...e,headers:i,signal:l};let u,d=!1,m=null;s&&s>0&&(m=setTimeout(()=>{d=!0,c.abort(\"timeout\")},s));const f=function(n,i){try{var s=Promise.resolve(o.hooks.call(\"fetch:request\",r,{url:t,options:e},(t,{url:e,options:n})=>fetch(e,n))).then(function(t){u=t,m&&clearTimeout(m)})}catch(t){return i(t)}return s&&s.then?s.then(void 0,i):s}(0,function(e){if(d)throw o.hooks.call(\"fetch:timeout\",r,{url:t}),new h(`Request timed out: ${t}`,{url:t,timedOut:d});if(\"AbortError\"===e?.name||l.aborted)throw new h(`Request aborted: ${t}`,{url:t,aborted:!0});throw e});return Promise.resolve(f&&f.then?f.then(n):n())}catch(p){return Promise.reject(p)}};class h extends Error{constructor(t,e){super(t),this.url=void 0,this.status=void 0,this.aborted=void 0,this.timedOut=void 0,this.name=\"FetchError\",this.url=e.url,this.status=e.status,this.aborted=e.aborted||!1,this.timedOut=e.timedOut||!1}}class u{constructor(t){this.swup=void 0,this.pages=new Map,this.swup=t}get size(){return this.pages.size}get all(){const t=new Map;return this.pages.forEach((e,n)=>{t.set(n,{...e})}),t}has(t){return this.pages.has(this.resolve(t))}get(t){const e=this.pages.get(this.resolve(t));return e?{...e}:e}set(t,e){t=this.resolve(t),e={...e,url:t},this.pages.set(t,e),this.swup.hooks.callSync(\"cache:set\",void 0,{page:e})}update(t,e){t=this.resolve(t);const n={...this.get(t),...e,url:t};this.pages.set(t,n)}delete(t){this.pages.delete(this.resolve(t))}clear(){this.pages.clear(),this.swup.hooks.callSync(\"cache:clear\",void 0,void 0)}prune(t){this.pages.forEach((e,n)=>{t(n,e)&&this.delete(n)})}resolve(t){const{url:e}=a.fromUrl(t);return this.swup.resolveUrl(e)}}const d=(t,e=document)=>e.querySelector(t),m=(t,e=document)=>Array.from(e.querySelectorAll(t)),f=()=>new Promise(t=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{t()})})});function p(t){return!!t&&(\"object\"==typeof t||\"function\"==typeof t)&&\"function\"==typeof t.then}function v(t,e=[]){return new Promise((n,o)=>{const r=t(...e);p(r)?r.then(n,o):n(r)})}function g(t){t=t||document.body,t?.getBoundingClientRect()}class w{constructor(t){this.swup=void 0,this.swupClasses=[\"to-\",\"is-changing\",\"is-rendering\",\"is-popstate\",\"is-animating\",\"is-leaving\"],this.swup=t}get selectors(){const{scope:t}=this.swup.visit.animation;return\"containers\"===t?this.swup.visit.containers:\"html\"===t?[\"html\"]:Array.isArray(t)?t:[]}get selector(){return this.selectors.join(\",\")}get targets(){return this.selector.trim()?m(this.selector):[]}add(){this.targets.forEach(t=>t.classList.add(...[].slice.call(arguments)))}remove(){this.targets.forEach(t=>t.classList.remove(...[].slice.call(arguments)))}clear(){this.targets.forEach(t=>{const e=t.className.split(\" \").filter(t=>this.isSwupClass(t));t.classList.remove(...e)})}isSwupClass(t){return this.swupClasses.some(e=>t.startsWith(e))}}class y{constructor(t,e){this.id=void 0,this.state=void 0,this.from=void 0,this.to=void 0,this.containers=void 0,this.animation=void 0,this.trigger=void 0,this.cache=void 0,this.history=void 0,this.scroll=void 0;const{to:n,from:o=t.currentPageUrl,hash:r,el:i,event:s}=e;this.id=Math.random(),this.state=1,this.from={url:o},this.to={url:n,hash:r},this.containers=t.options.containers,this.animation={animate:!0,wait:!1,name:void 0,native:t.options.native,scope:t.options.animationScope,selector:t.options.animationSelector},this.trigger={el:i,event:s},this.cache={read:t.options.cache,write:t.options.cache},this.history={action:\"push\",popstate:!1,direction:void 0},this.scroll={reset:!0,target:void 0}}advance(t){this.state<t&&(this.state=t)}abort(){this.state=8}get done(){return this.state>=7}}function P(t){return new y(this,t)}const k=\"undefined\"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol(\"Symbol.iterator\")):\"@@iterator\";function b(t,e,n){if(!t.s){if(n instanceof S){if(!n.s)return void(n.o=b.bind(null,t,e));1&e&&(e=n.s),n=n.v}if(n&&n.then)return void n.then(b.bind(null,t,e),b.bind(null,t,2));t.s=e,t.v=n;const o=t.o;o&&o(t)}}const S=/*#__PURE__*/function(){function t(){}return t.prototype.then=function(e,n){const o=new t,r=this.s;if(r){const t=1&r?e:n;if(t){try{b(o,1,t(this.v))}catch(t){b(o,2,t)}return o}return this}return this.o=function(t){try{const r=t.v;1&t.s?b(o,1,e?e(r):r):n?b(o,1,n(r)):b(o,2,r)}catch(t){b(o,2,t)}},o},t}();function E(t){return t instanceof S&&1&t.s}class U{constructor(t){this.swup=void 0,this.registry=new Map,this.hooks=[\"animation:out:start\",\"animation:out:await\",\"animation:out:end\",\"animation:in:start\",\"animation:in:await\",\"animation:in:end\",\"animation:skip\",\"cache:clear\",\"cache:set\",\"content:replace\",\"content:scroll\",\"enable\",\"disable\",\"fetch:request\",\"fetch:error\",\"fetch:timeout\",\"history:popstate\",\"link:click\",\"link:self\",\"link:anchor\",\"link:newtab\",\"page:load\",\"page:view\",\"scroll:top\",\"scroll:anchor\",\"visit:start\",\"visit:transition\",\"visit:abort\",\"visit:end\"],this.swup=t,this.init()}init(){this.hooks.forEach(t=>this.create(t))}create(t){this.registry.has(t)||this.registry.set(t,new Map)}exists(t){return this.registry.has(t)}get(t){const e=this.registry.get(t);if(e)return e;console.error(`Unknown hook '${t}'`)}clear(){this.registry.forEach(t=>t.clear())}on(t,e,n={}){const o=this.get(t);if(!o)return console.warn(`Hook '${t}' not found.`),()=>{};const r={...n,id:o.size+1,hook:t,handler:e};return o.set(e,r),()=>this.off(t,e)}before(t,e,n={}){return this.on(t,e,{...n,before:!0})}replace(t,e,n={}){return this.on(t,e,{...n,replace:!0})}once(t,e,n={}){return this.on(t,e,{...n,once:!0})}off(t,e){const n=this.get(t);n&&e?n.delete(e)||console.warn(`Handler for hook '${t}' not found.`):n&&n.clear()}call(t,e,n,o){try{const r=this,[i,s,a]=r.parseCallArgs(t,e,n,o),{before:c,handler:l,after:h}=r.getHandlers(t,a);return Promise.resolve(r.run(c,i,s)).then(function(){return Promise.resolve(r.run(l,i,s,!0)).then(function([e]){return Promise.resolve(r.run(h,i,s)).then(function(){return r.dispatchDomEvent(t,i,s),e})})})}catch(t){return Promise.reject(t)}}callSync(t,e,n,o){const[r,i,s]=this.parseCallArgs(t,e,n,o),{before:a,handler:c,after:l}=this.getHandlers(t,s);this.runSync(a,r,i);const[h]=this.runSync(c,r,i,!0);return this.runSync(l,r,i),this.dispatchDomEvent(t,r,i),h}parseCallArgs(t,e,n,o){return e instanceof y||\"object\"!=typeof e&&\"function\"!=typeof n?[e,n,o]:[void 0,e,n]}run(t,e,n,o=!1){try{let r;const i=this;void 0===e&&(e=i.swup.visit);const s=[],a=function(t,e,n){if(\"function\"==typeof t[k]){var o,r,i,s=t[k]();if(function t(a){try{for(;!((o=s.next()).done||n&&n());)if((a=e(o.value))&&a.then){if(!E(a))return void a.then(t,i||(i=b.bind(null,r=new S,2)));a=a.v}r?b(r,1,a):r=a}catch(t){b(r||(r=new S),2,t)}}(),s.return){var a=function(t){try{o.done||s.return()}catch(t){}return t};if(r&&r.then)return r.then(a,function(t){throw a(t)});a()}return r}if(!(\"length\"in t))throw new TypeError(\"Object is not iterable\");for(var c=[],l=0;l<t.length;l++)c.push(t[l]);return function(t,e,n){var o,r,i=-1;return function s(a){try{for(;++i<t.length&&(!n||!n());)if((a=e(i))&&a.then){if(!E(a))return void a.then(s,r||(r=b.bind(null,o=new S,2)));a=a.v}o?b(o,1,a):o=a}catch(t){b(o||(o=new S),2,t)}}(),o}(c,function(t){return e(c[t])},n)}(t,function({hook:t,handler:r,defaultHandler:a,once:c}){if(!e?.done)return c&&i.off(t,r),function(t,o){try{var i=Promise.resolve(v(r,[e,n,a])).then(function(t){s.push(t)})}catch(t){return o(t)}return i&&i.then?i.then(void 0,o):i}(0,function(e){if(o)throw e;console.error(`Error in hook '${t}':`,e)})},function(){return r});return Promise.resolve(a&&a.then?a.then(function(t){return r?t:s}):r?a:s)}catch(t){return Promise.reject(t)}}runSync(t,e=this.swup.visit,n,o=!1){const r=[];for(const{hook:i,handler:s,defaultHandler:a,once:c}of t)if(!e?.done){c&&this.off(i,s);try{const t=s(e,n,a);r.push(t),p(t)&&console.warn(`Swup will not await Promises in handler for synchronous hook '${i}'.`)}catch(t){if(o)throw t;console.error(`Error in hook '${i}':`,t)}}return r}getHandlers(t,e){const n=this.get(t);if(!n)return{found:!1,before:[],handler:[],after:[],replaced:!1};const o=Array.from(n.values()),r=this.sortRegistrations,i=o.filter(({before:t,replace:e})=>t&&!e).sort(r),s=o.filter(({replace:t})=>t).filter(t=>!0).sort(r),a=o.filter(({before:t,replace:e})=>!t&&!e).sort(r),c=s.length>0;let l=[];if(e&&(l=[{id:0,hook:t,handler:e}],c)){const n=s.length-1,o=t=>{const n=s[t-1];return n?(e,r)=>n.handler(e,r,o(t-1)):e};l=[{id:0,hook:t,handler:s[n].handler,defaultHandler:o(n)}]}return{found:!0,before:i,handler:l,after:a,replaced:c}}sortRegistrations(t,e){return(t.priority??0)-(e.priority??0)||t.id-e.id||0}dispatchDomEvent(t,e,n){if(e?.done)return;const o={hook:t,args:n,visit:e||this.swup.visit};document.dispatchEvent(new CustomEvent(\"swup:any\",{detail:o,bubbles:!0})),document.dispatchEvent(new CustomEvent(`swup:${t}`,{detail:o,bubbles:!0}))}}const C=t=>{if(t&&\"#\"===t.charAt(0)&&(t=t.substring(1)),!t)return null;const e=decodeURIComponent(t);let n=document.getElementById(t)||document.getElementById(e)||d(`a[name='${CSS.escape(t)}']`)||d(`a[name='${CSS.escape(e)}']`);return n||\"top\"!==t||(n=document.body),n},$=function({elements:t,selector:e}){try{if(!1===e&&!t)return Promise.resolve();let n=[];if(t)n=Array.from(t);else if(e&&(n=m(e,document.body),!n.length))return console.warn(`[swup] No elements found matching animationSelector \\`${e}\\``),Promise.resolve();const o=n.map(t=>function(t){const{type:e,timeout:n,propCount:o}=function(t){const e=window.getComputedStyle(t),n=H(e,`${x}Delay`),o=H(e,`${x}Duration`),r=j(n,o),i=H(e,`${A}Delay`),s=H(e,`${A}Duration`),a=j(i,s),c=Math.max(r,a),l=c>0?r>a?x:A:null;return{type:l,timeout:c,propCount:l?l===x?o.length:s.length:0}}(t);return!(!e||!n)&&new Promise(r=>{const i=`${e}end`,s=performance.now();let a=0;const c=()=>{t.removeEventListener(i,l),r()},l=e=>{if(e.target===t){if(!function(t){return[`${x}end`,`${A}end`].includes(t.type)}(e))throw new Error(\"Not a transition or animation event.\");(performance.now()-s)/1e3<e.elapsedTime||++a>=o&&c()}};setTimeout(()=>{a<o&&c()},n+1),t.addEventListener(i,l)})}(t));return o.filter(Boolean).length>0?Promise.resolve(Promise.all(o)).then(function(){}):(e&&console.warn(`[swup] No CSS animation duration defined on elements matching \\`${e}\\``),Promise.resolve())}catch(t){return Promise.reject(t)}},x=\"transition\",A=\"animation\";function H(t,e){return(t[e]||\"\").split(\", \")}function j(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((e,n)=>V(e)+V(t[n])))}function V(t){return 1e3*parseFloat(t)}const I=function(t,e={}){try{let a;const c=this;function s(s){if(a)return s;c.navigating=!0,c.visit=t;const{el:l}=t.trigger;e.referrer=e.referrer||c.currentPageUrl,!1===e.animate&&(t.animation.animate=!1),t.animation.animate||c.classes.clear();const h=e.history||l?.getAttribute(\"data-swup-history\")||void 0;h&&[\"push\",\"replace\"].includes(h)&&(t.history.action=h);const u=e.animation||l?.getAttribute(\"data-swup-animation\")||void 0;return u&&(t.animation.name=u),\"object\"==typeof e.cache?(t.cache.read=e.cache.read??t.cache.read,t.cache.write=e.cache.write??t.cache.write):void 0!==e.cache&&(t.cache={read:!!e.cache,write:!!e.cache}),delete e.cache,function(s,a){try{var l=function(s,a){try{var l=Promise.resolve(c.hooks.call(\"visit:start\",t,void 0)).then(function(){function s(){if(!t.done)return Promise.resolve(c.hooks.call(\"visit:transition\",t,void 0,function(){try{let n;function e(e){return n?e:(t.advance(4),Promise.resolve(c.animatePageOut(t)).then(function(){function e(){return Promise.resolve(c.animatePageIn(t)).then(function(){})}const n=function(){if(t.animation.native&&document.startViewTransition)return Promise.resolve(document.startViewTransition(function(){try{const e=c.renderPage;return Promise.resolve(a).then(function(n){return Promise.resolve(e.call(c,t,n))})}catch(t){return Promise.reject(t)}}).finished).then(function(){});{const e=c.renderPage;return Promise.resolve(a).then(function(n){return Promise.resolve(e.call(c,t,n)).then(function(){})})}}();return n&&n.then?n.then(e):e()}))}const o=function(){if(!t.animation.animate)return Promise.resolve(c.hooks.call(\"animation:skip\",void 0)).then(function(){const e=c.renderPage;return Promise.resolve(a).then(function(o){return Promise.resolve(e.call(c,t,o)).then(function(){n=1})})})}();return Promise.resolve(o&&o.then?o.then(e):e(o))}catch(r){return Promise.reject(r)}})).then(function(){if(!t.done)return Promise.resolve(c.hooks.call(\"visit:end\",t,void 0,()=>c.classes.clear())).then(function(){t.state=7,c.navigating=!1,c.onVisitEnd&&(c.onVisitEnd(),c.onVisitEnd=void 0)})})}t.state=3;const a=c.hooks.call(\"page:load\",t,{options:e},function(t,e){try{function n(t){return e.page=t,e.cache=!!o,e.page}let o;return t.cache.read&&(o=c.cache.get(t.to.url)),Promise.resolve(o?n(o):Promise.resolve(c.fetchPage(t.to.url,e.options)).then(n))}catch(r){return Promise.reject(r)}});if(a.then(({html:e})=>{t.advance(5),t.to.html=e,t.to.document=(new DOMParser).parseFromString(e,\"text/html\")}),!t.history.popstate){const e=t.to.url+t.to.hash;\"replace\"===t.history.action||t.to.url===c.currentPageUrl?i(e):(c.currentHistoryIndex++,r(e,{index:c.currentHistoryIndex}))}c.currentPageUrl=o(),t.history.popstate&&c.classes.add(\"is-popstate\"),t.animation.name&&c.classes.add(`to-${n(t.animation.name)}`);const l=function(){if(t.animation.wait)return Promise.resolve(a).then(function(){})}();return l&&l.then?l.then(s):s()})}catch(t){return a(t)}return l&&l.then?l.then(void 0,a):l}(0,function(e){e&&!e?.aborted?(t.state=9,console.error(e),c.options.skipPopStateHandling=()=>(window.location.assign(t.to.url+t.to.hash),!0),window.history.back()):t.state=8})}catch(t){return a(!0,t)}return l&&l.then?l.then(a.bind(null,!1),a.bind(null,!0)):a(!1,l)}(0,function(e,n){if(delete t.to.document,e)throw n;return n})}const l=function(){if(c.navigating)return function(){if(!(c.visit.state>=6))return Promise.resolve(c.hooks.call(\"visit:abort\",c.visit,void 0)).then(function(){delete c.visit.to.document,c.visit.state=8});t.state=2,c.onVisitEnd=()=>c.performNavigation(t,e),a=1}()}();return Promise.resolve(l&&l.then?l.then(s):s(l))}catch(h){return Promise.reject(h)}};function L(t,e={},n={}){if(\"string\"!=typeof t)throw new Error(\"swup.navigate() requires a URL parameter\");if(this.shouldIgnoreVisit(t,{el:n.el,event:n.event}))return void window.location.assign(t);const{url:o,hash:r}=a.fromUrl(t),i=this.createVisit({...n,to:o,hash:r});this.performNavigation(i,e)}const T=function(t){try{const e=this;return Promise.resolve(e.hooks.call(\"animation:out:start\",t,void 0,()=>{e.classes.add(\"is-changing\",\"is-animating\",\"is-leaving\")})).then(function(){return Promise.resolve(e.hooks.call(\"animation:out:await\",t,{skip:!1},(t,{skip:n})=>{if(!n)return e.awaitAnimations({selector:t.animation.selector})})).then(function(){return Promise.resolve(e.hooks.call(\"animation:out:end\",t,void 0)).then(function(){})})})}catch(t){return Promise.reject(t)}},q=function(t){const e=t.to.document;if(!e)return!1;const n=e.querySelector(\"title\")?.innerText||\"\";document.title=n;const o=m('[data-swup-persist]:not([data-swup-persist=\"\"])'),r=t.containers.map(t=>{const n=document.querySelector(t),o=e.querySelector(t);return n&&o?(n.replaceWith(o.cloneNode(!0)),!0):(n||console.warn(`[swup] Container missing in current document: ${t}`),o||console.warn(`[swup] Container missing in incoming document: ${t}`),!1)}).filter(Boolean);return o.forEach(t=>{const e=t.getAttribute(\"data-swup-persist\"),n=d(`[data-swup-persist=\"${e}\"]`);n&&n!==t&&n.replaceWith(t)}),r.length===t.containers.length},R=function(t){const e={behavior:\"auto\"},{target:n,reset:o}=t.scroll,r=n??t.to.hash;let i=!1;return r&&(i=this.hooks.callSync(\"scroll:anchor\",t,{hash:r,options:e},(t,{hash:e,options:n})=>{const o=this.getAnchorElement(e);return o&&o.scrollIntoView(n),!!o})),o&&!i&&(i=this.hooks.callSync(\"scroll:top\",t,{options:e},(t,{options:e})=>(window.scrollTo({top:0,left:0,...e}),!0))),i},N=function(t){try{const e=this;if(t.done)return Promise.resolve();const n=e.hooks.call(\"animation:in:await\",t,{skip:!1},(t,{skip:n})=>{if(!n)return e.awaitAnimations({selector:t.animation.selector})});return Promise.resolve(f()).then(function(){return Promise.resolve(e.hooks.call(\"animation:in:start\",t,void 0,()=>{e.classes.remove(\"is-animating\")})).then(function(){return Promise.resolve(n).then(function(){return Promise.resolve(e.hooks.call(\"animation:in:end\",t,void 0)).then(function(){})})})})}catch(t){return Promise.reject(t)}},D=function(t,e){try{const r=this;if(t.done)return Promise.resolve();t.advance(6);const{url:s}=e;return r.isSameResolvedUrl(o(),s)||(i(s),r.currentPageUrl=o(),t.to.url=r.currentPageUrl),Promise.resolve(r.hooks.call(\"content:replace\",t,{page:e},(t,{})=>{if(r.classes.remove(\"is-leaving\"),t.animation.animate&&r.classes.add(\"is-rendering\"),!r.replaceContent(t))throw new Error(\"[swup] Container mismatch, aborting\");t.animation.animate&&(r.classes.add(\"is-changing\",\"is-animating\",\"is-rendering\"),t.animation.name&&r.classes.add(`to-${n(t.animation.name)}`))})).then(function(){return Promise.resolve(r.hooks.call(\"content:scroll\",t,void 0,()=>r.scrollToContent(t))).then(function(){return Promise.resolve(r.hooks.call(\"page:view\",t,{url:r.currentPageUrl,title:document.title})).then(function(){})})})}catch(t){return Promise.reject(t)}},M=function(t){var e;if(e=t,Boolean(e?.isSwupPlugin)){if(t.swup=this,!t._checkRequirements||t._checkRequirements())return t._beforeMount&&t._beforeMount(),t.mount(),this.plugins.push(t),this.plugins}else console.error(\"Not a swup plugin instance\",t)};function O(t){const e=this.findPlugin(t);if(e)return e.unmount(),e._afterUnmount&&e._afterUnmount(),this.plugins=this.plugins.filter(t=>t!==e),this.plugins;console.error(\"No such plugin\",e)}function W(t){return this.plugins.find(e=>e===t||e.name===t||e.name===`Swup${String(t)}`)}function B(t){if(\"function\"!=typeof this.options.resolveUrl)return console.warn(\"[swup] options.resolveUrl expects a callback function.\"),t;const e=this.options.resolveUrl(t);return e&&\"string\"==typeof e?e.startsWith(\"//\")||e.startsWith(\"http\")?(console.warn(\"[swup] options.resolveUrl needs to return a relative url\"),t):e:(console.warn(\"[swup] options.resolveUrl needs to return a url\"),t)}function _(t,e){return this.resolveUrl(t)===this.resolveUrl(e)}const F={animateHistoryBrowsing:!1,animationSelector:'[class*=\"transition-\"]',animationScope:\"html\",cache:!0,containers:[\"#swup\"],ignoreVisit:(t,{el:e}={})=>!!e?.closest(\"[data-no-swup]\"),linkSelector:\"a[href]\",linkToSelf:\"scroll\",native:!1,plugins:[],resolveUrl:t=>t,requestHeaders:{\"X-Requested-With\":\"swup\",Accept:\"text/html, application/xhtml+xml\"},skipPopStateHandling:t=>\"swup\"!==t.state?.source,timeout:0};class K{constructor(t={}){this.version=\"4.6.1\",this.options=void 0,this.defaults=F,this.plugins=[],this.visit=void 0,this.cache=void 0,this.hooks=void 0,this.classes=void 0,this.currentPageUrl=o(),this.currentHistoryIndex=void 0,this.clickDelegate=void 0,this.navigating=!1,this.onVisitEnd=void 0,this.use=M,this.unuse=O,this.findPlugin=W,this.log=()=>{},this.navigate=L,this.performNavigation=I,this.createVisit=P,this.delegateEvent=s,this.fetchPage=l,this.awaitAnimations=$,this.renderPage=D,this.replaceContent=q,this.animatePageIn=N,this.animatePageOut=T,this.scrollToContent=R,this.getAnchorElement=C,this.getCurrentUrl=o,this.resolveUrl=B,this.isSameResolvedUrl=_,this.options={...this.defaults,...t},this.handleLinkClick=this.handleLinkClick.bind(this),this.handlePopState=this.handlePopState.bind(this),this.cache=new u(this),this.classes=new w(this),this.hooks=new U(this),this.visit=this.createVisit({to:\"\"}),this.currentHistoryIndex=window.history.state?.index??1,this.enable()}enable(){try{const t=this,{linkSelector:e}=t.options;return t.clickDelegate=t.delegateEvent(e,\"click\",t.handleLinkClick),window.addEventListener(\"popstate\",t.handlePopState),t.options.animateHistoryBrowsing&&(window.history.scrollRestoration=\"manual\"),t.options.native=t.options.native&&!!document.startViewTransition,t.options.plugins.forEach(e=>t.use(e)),\"swup\"!==window.history.state?.source&&i(null,{index:t.currentHistoryIndex}),Promise.resolve(f()).then(function(){return Promise.resolve(t.hooks.call(\"enable\",void 0,void 0,()=>{const e=document.documentElement;e.classList.add(\"swup-enabled\"),e.classList.toggle(\"swup-native\",t.options.native)})).then(function(){})})}catch(t){return Promise.reject(t)}}destroy(){try{const t=this;return t.clickDelegate.destroy(),window.removeEventListener(\"popstate\",t.handlePopState),t.cache.clear(),t.options.plugins.forEach(e=>t.unuse(e)),Promise.resolve(t.hooks.call(\"disable\",void 0,void 0,()=>{const t=document.documentElement;t.classList.remove(\"swup-enabled\"),t.classList.remove(\"swup-native\")})).then(function(){t.hooks.clear()})}catch(t){return Promise.reject(t)}}shouldIgnoreVisit(t,{el:e,event:n}={}){const{origin:o,url:r,hash:i}=a.fromUrl(t);return o!==window.location.origin||!(!e||!this.triggerWillOpenNewWindow(e))||!!this.options.ignoreVisit(r+i,{el:e,event:n})}handleLinkClick(t){const e=t.delegateTarget,{href:n,url:o,hash:r}=a.fromElement(e);if(this.shouldIgnoreVisit(n,{el:e,event:t}))return;if(this.navigating&&o===this.visit.to.url)return void t.preventDefault();const s=this.createVisit({to:o,hash:r,el:e,event:t});t.metaKey||t.ctrlKey||t.shiftKey||t.altKey?this.hooks.callSync(\"link:newtab\",s,{href:n}):0===t.button&&this.hooks.callSync(\"link:click\",s,{el:e,event:t},()=>{const e=s.from.url??\"\";t.preventDefault(),o&&o!==e?this.isSameResolvedUrl(o,e)||this.performNavigation(s):r?this.hooks.callSync(\"link:anchor\",s,{hash:r},()=>{i(o+r),this.scrollToContent(s)}):this.hooks.callSync(\"link:self\",s,void 0,()=>{\"navigate\"===this.options.linkToSelf?this.performNavigation(s):(i(o),this.scrollToContent(s))})})}handlePopState(t){const e=t.state?.url??window.location.href;if(this.options.skipPopStateHandling(t))return;if(this.isSameResolvedUrl(o(),this.currentPageUrl))return;const{url:n,hash:r}=a.fromUrl(e),i=this.createVisit({to:n,hash:r,event:t});i.history.popstate=!0;const s=t.state?.index??0;s&&s!==this.currentHistoryIndex&&(i.history.direction=s-this.currentHistoryIndex>0?\"forwards\":\"backwards\",this.currentHistoryIndex=s),i.animation.animate=!1,i.scroll.reset=!1,i.scroll.target=!1,this.options.animateHistoryBrowsing&&(i.animation.animate=!0,i.scroll.reset=!0),this.hooks.callSync(\"history:popstate\",i,{event:t},()=>{this.performNavigation(i)})}triggerWillOpenNewWindow(t){return!!t.matches('[download], [target=\"_blank\"]')}}export{a as Location,n as classify,r as createHistoryRecord,K as default,s as delegateEvent,g as forceReflow,o as getCurrentUrl,p as isPromise,c as matchPath,f as nextTick,d as query,m as queryAll,v as runAsPromise,i as updateHistoryRecord};\n//# sourceMappingURL=Swup.module.js.map\n","/** Turn a string into a slug by lowercasing and replacing whitespace. */\nexport const classify = (text: string, fallback?: string): string => {\n\tconst output = String(text)\n\t\t.toLowerCase()\n\t\t// .normalize('NFD') // split an accented letter in the base letter and the acent\n\t\t// .replace(/[\\u0300-\\u036f]/g, '') // remove all previously split accents\n\t\t.replace(/[\\s/_.]+/g, '-') // replace spaces and _./ with '-'\n\t\t.replace(/[^\\w-]+/g, '') // remove all non-word chars\n\t\t.replace(/--+/g, '-') // replace repeating '-' with single '-'\n\t\t.replace(/^-+|-+$/g, ''); // trim '-' from edges\n\treturn output || fallback || '';\n};\n","/** Get the current page URL: path name + query params. Optionally including hash. */\nexport const getCurrentUrl = ({ hash }: { hash?: boolean } = {}): string => {\n\treturn window.location.pathname + window.location.search + (hash ? window.location.hash : '');\n};\n","import { getCurrentUrl } from './getCurrentUrl.js';\n\nexport interface HistoryState {\n\turl: string;\n\tsource: 'swup';\n\trandom: number;\n\tindex?: number;\n\t[key: string]: unknown;\n}\n\ntype HistoryData = Record<string, unknown>;\n\n/** Create a new history record with a custom swup identifier. */\nexport const createHistoryRecord = (url: string, data: HistoryData = {}): void => {\n\turl = url || getCurrentUrl({ hash: true });\n\tconst state: HistoryState = {\n\t\turl,\n\t\trandom: Math.random(),\n\t\tsource: 'swup',\n\t\t...data\n\t};\n\twindow.history.pushState(state, '', url);\n};\n\n/** Update the current history record with a custom swup identifier. */\nexport const updateHistoryRecord = (url: string | null = null, data: HistoryData = {}): void => {\n\turl = url || getCurrentUrl({ hash: true });\n\tconst currentState = (window.history.state as HistoryState) || {};\n\tconst state: HistoryState = {\n\t\t...currentState,\n\t\turl,\n\t\trandom: Math.random(),\n\t\tsource: 'swup',\n\t\t...data\n\t};\n\twindow.history.replaceState(state, '', url);\n};\n","import delegate, {\n\ttype DelegateEventHandler,\n\ttype DelegateOptions,\n\ttype EventType\n} from 'delegate-it';\nimport type { ParseSelector } from 'typed-query-selector/parser.js';\n\nexport type DelegateEventUnsubscribe = {\n\tdestroy: () => void;\n};\n\n/** Register a delegated event listener. */\nexport const delegateEvent = <\n\tSelector extends string,\n\tTElement extends Element = ParseSelector<Selector, HTMLElement>,\n\tTEvent extends EventType = EventType\n>(\n\tselector: Selector,\n\ttype: TEvent,\n\tcallback: DelegateEventHandler<GlobalEventHandlersEventMap[TEvent], TElement>,\n\toptions?: DelegateOptions\n): DelegateEventUnsubscribe => {\n\tconst controller = new AbortController();\n\toptions = { ...options, signal: controller.signal };\n\tdelegate<Selector, TElement, TEvent>(selector, type, callback, options);\n\treturn { destroy: () => controller.abort() };\n};\n","/**\n * A helper for creating a Location from either an element\n * or a URL object/string\n *\n */\nexport class Location extends URL {\n\tconstructor(url: URL | string, base: string = document.baseURI) {\n\t\tsuper(url.toString(), base);\n\t\t// Fix Safari bug with extending native classes\n\t\tObject.setPrototypeOf(this, Location.prototype);\n\t}\n\n\t/**\n\t * The full local path including query params.\n\t */\n\tget url(): string {\n\t\treturn this.pathname + this.search;\n\t}\n\n\t/**\n\t * Instantiate a Location from an element's href attribute\n\t * @param el\n\t * @returns new Location instance\n\t */\n\tstatic fromElement(el: Element): Location {\n\t\tconst href = el.getAttribute('href') || el.getAttribute('xlink:href') || '';\n\t\treturn new Location(href);\n\t}\n\n\t/**\n\t * Instantiate a Location from a URL object or string\n\t * @param url\n\t * @returns new Location instance\n\t */\n\tstatic fromUrl(url: URL | string): Location {\n\t\treturn new Location(url);\n\t}\n}\n","import { match } from 'path-to-regexp';\n\nimport type {\n\tPath,\n\tParseOptions,\n\tTokensToRegexpOptions,\n\tRegexpToFunctionOptions,\n\tMatchFunction\n} from 'path-to-regexp';\n\nexport { type Path };\n\n/** Create a match function from a path pattern that checks if a URLs matches it. */\nexport const matchPath = <P extends object = object>(\n\tpath: Path,\n\toptions?: ParseOptions & TokensToRegexpOptions & RegexpToFunctionOptions\n): MatchFunction<P> => {\n\ttry {\n\t\treturn match<P>(path, options);\n\t} catch (error) {\n\t\tthrow new Error(`[swup] Error parsing path \"${String(path)}\":\\n${String(error)}`);\n\t}\n};\n","import type Swup from '../Swup.js';\nimport { Location } from '../helpers.js';\nimport type { Visit } from './Visit.js';\n\n/** A page object as used by swup and its cache. */\nexport interface PageData {\n\t/** The URL of the page */\n\turl: string;\n\t/** The complete HTML response received from the server */\n\thtml: string;\n}\n\n/** Define how a page is fetched. */\nexport interface FetchOptions extends Omit<RequestInit, 'cache'> {\n\t/** The request method. */\n\tmethod?: 'GET' | 'POST';\n\t/** The body of the request: raw string, form data object or URL params. */\n\tbody?: string | FormData | URLSearchParams;\n\t/** The request timeout in milliseconds. */\n\ttimeout?: number;\n\t/** Optional visit object with additional context. @internal */\n\tvisit?: Visit;\n}\n\nexport class FetchError extends Error {\n\turl: string;\n\tstatus?: number;\n\taborted: boolean;\n\ttimedOut: boolean;\n\tconstructor(\n\t\tmessage: string,\n\t\tdetails: { url: string; status?: number; aborted?: boolean; timedOut?: boolean }\n\t) {\n\t\tsuper(message);\n\t\tthis.name = 'FetchError';\n\t\tthis.url = details.url;\n\t\tthis.status = details.status;\n\t\tthis.aborted = details.aborted || false;\n\t\tthis.timedOut = details.timedOut || false;\n\t}\n}\n\n/**\n * Fetch a page from the server, return it and cache it.\n */\nexport async function fetchPage(\n\tthis: Swup,\n\turl: URL | string,\n\toptions: FetchOptions = {}\n): Promise<PageData> {\n\turl = Location.fromUrl(url).url;\n\n\tconst { visit = this.visit } = options;\n\tconst headers = { ...this.options.requestHeaders, ...options.headers };\n\tconst timeout = options.timeout ?? this.options.timeout;\n\tconst controller = new AbortController();\n\tconst { signal } = controller;\n\toptions = { ...options, headers, signal };\n\n\tlet timedOut = false;\n\tlet timeoutId: ReturnType<typeof setTimeout> | null = null;\n\tif (timeout && timeout > 0) {\n\t\ttimeoutId = setTimeout(() => {\n\t\t\ttimedOut = true;\n\t\t\tcontroller.abort('timeout');\n\t\t}, timeout);\n\t}\n\n\t// Allow hooking before this and returning a custom response-like object (e.g. custom fetch implementation)\n\tlet response: Response;\n\ttry {\n\t\tresponse = await this.hooks.call(\n\t\t\t'fetch:request',\n\t\t\tvisit,\n\t\t\t{ url, options },\n\t\t\t(visit, { url, options }) => fetch(url, options)\n\t\t);\n\t\tif (timeoutId) {\n\t\t\tclearTimeout(timeoutId);\n\t\t}\n\t} catch (error) {\n\t\tif (timedOut) {\n\t\t\tthis.hooks.call('fetch:timeout', visit, { url });\n\t\t\tthrow new FetchError(`Request timed out: ${url}`, { url, timedOut });\n\t\t}\n\t\tif ((error as Error)?.name === 'AbortError' || signal.aborted) {\n\t\t\tthrow new FetchError(`Request aborted: ${url}`, { url, aborted: true });\n\t\t}\n\t\tthrow error;\n\t}\n\n\tconst { status, url: responseUrl } = response;\n\tconst html = await response.text();\n\n\tif (status === 500) {\n\t\tthis.hooks.call('fetch:error', visit, { status, response, url: responseUrl });\n\t\tthrow new FetchError(`Server error: ${responseUrl}`, { status, url: responseUrl });\n\t}\n\n\tif (!html) {\n\t\tthrow new FetchError(`Empty response: ${responseUrl}`, { status, url: responseUrl });\n\t}\n\n\t// Resolve real url after potential redirect\n\tconst { url: finalUrl } = Location.fromUrl(responseUrl);\n\tconst page = { url: finalUrl, html };\n\n\t// Write to cache for safe methods and non-redirects\n\tif (visit.cache.write && (!options.method || options.method === 'GET') && url === finalUrl) {\n\t\tthis.cache.set(page.url, page);\n\t}\n\n\treturn page;\n}\n","import type Swup from '../Swup.js';\nimport { Location } from '../helpers.js';\nimport { type PageData } from './fetchPage.js';\n\nexport interface CacheData extends PageData {}\n\n/**\n * In-memory page cache.\n */\nexport class Cache {\n\t/** Swup instance this cache belongs to */\n\tprotected swup: Swup;\n\n\t/** Cached pages, indexed by URL */\n\tprotected pages: Map<string, CacheData> = new Map();\n\n\tconstructor(swup: Swup) {\n\t\tthis.swup = swup;\n\t}\n\n\t/** Number of cached pages in memory. */\n\tget size(): number {\n\t\treturn this.pages.size;\n\t}\n\n\t/** All cached pages. */\n\tget all() {\n\t\tconst copy = new Map();\n\t\tthis.pages.forEach((page, key) => {\n\t\t\tcopy.set(key, { ...page });\n\t\t});\n\t\treturn copy;\n\t}\n\n\t/** Check if the given URL has been cached. */\n\thas(url: string): boolean {\n\t\treturn this.pages.has(this.resolve(url));\n\t}\n\n\t/** Return a shallow copy of the cached page object if available. */\n\tget(url: string): CacheData | undefined {\n\t\tconst result = this.pages.get(this.resolve(url));\n\t\tif (!result) return result;\n\t\treturn { ...result };\n\t}\n\n\t/** Create a cache record for the specified URL. */\n\tset(url: string, page: CacheData) {\n\t\turl = this.resolve(url);\n\t\tpage = { ...page, url };\n\t\tthis.pages.set(url, page);\n\t\tthis.swup.hooks.callSync('cache:set', undefined, { page });\n\t}\n\n\t/** Update a cache record, overwriting or adding custom data. */\n\tupdate(url: string, payload: object) {\n\t\turl = this.resolve(url);\n\t\tconst page = { ...this.get(url), ...payload, url } as CacheData;\n\t\tthis.pages.set(url, page);\n\t}\n\n\t/** Delete a cache record. */\n\tdelete(url: string): void {\n\t\tthis.pages.delete(this.resolve(url));\n\t}\n\n\t/** Empty the cache. */\n\tclear(): void {\n\t\tthis.pages.clear();\n\t\tthis.swup.hooks.callSync('cache:clear', undefined, undefined);\n\t}\n\n\t/** Remove all cache entries that return true for a given predicate function.  */\n\tprune(predicate: (url: string, page: CacheData) => boolean): void {\n\t\tthis.pages.forEach((page, url) => {\n\t\t\tif (predicate(url, page)) {\n\t\t\t\tthis.delete(url);\n\t\t\t}\n\t\t});\n\t}\n\n\t/** Resolve URLs by making them local and letting swup resolve them. */\n\tprotected resolve(urlToResolve: string): string {\n\t\tconst { url } = Location.fromUrl(urlToResolve);\n\t\treturn this.swup.resolveUrl(url);\n\t}\n}\n","/** Find an element by selector. */\nexport const query = (selector: string, context: Document | Element = document) => {\n\treturn context.querySelector<HTMLElement>(selector);\n};\n\n/** Find a set of elements by selector. */\nexport const queryAll = (\n\tselector: string,\n\tcontext: Document | Element = document\n): HTMLElement[] => {\n\treturn Array.from(context.querySelectorAll(selector));\n};\n\n/** Return a Promise that resolves after the next event loop. */\nexport const nextTick = (): Promise<void> => {\n\treturn new Promise((resolve) => {\n\t\trequestAnimationFrame(() => {\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tresolve();\n\t\t\t});\n\t\t});\n\t});\n};\n\n/** Check if an object is a Promise or a Thenable */\nexport function isPromise<T>(obj: unknown): obj is PromiseLike<T> {\n\treturn (\n\t\t!!obj &&\n\t\t(typeof obj === 'object' || typeof obj === 'function') &&\n\t\ttypeof (obj as Record<string, unknown>).then === 'function'\n\t);\n}\n\n/** Call a function as a Promise. Resolves with the returned Promsise or immediately. */\n// eslint-disable-next-line @typescript-eslint/ban-types, @typescript-eslint/no-explicit-any\nexport function runAsPromise(func: Function, args: unknown[] = []): Promise<unknown> {\n\treturn new Promise((resolve, reject) => {\n\t\tconst result: unknown = func(...args);\n\t\tif (isPromise(result)) {\n\t\t\tresult.then(resolve, reject);\n\t\t} else {\n\t\t\tresolve(result);\n\t\t}\n\t});\n}\n\n/**\n * Force a layout reflow, e.g. after adding classnames\n * @see https://stackoverflow.com/a/21665117/3759615\n */\nexport function forceReflow(element?: HTMLElement): void {\n\telement = element || document.body;\n\telement?.getBoundingClientRect();\n}\n","import type Swup from '../Swup.js';\nimport { queryAll } from '../utils.js';\n\nexport class Classes {\n\tprotected swup: Swup;\n\tprotected swupClasses = [\n\t\t'to-',\n\t\t'is-changing',\n\t\t'is-rendering',\n\t\t'is-popstate',\n\t\t'is-animating',\n\t\t'is-leaving'\n\t];\n\n\tconstructor(swup: Swup) {\n\t\tthis.swup = swup;\n\t}\n\n\tprotected get selectors(): string[] {\n\t\tconst { scope } = this.swup.visit.animation;\n\t\tif (scope === 'containers') return this.swup.visit.containers;\n\t\tif (scope === 'html') return ['html'];\n\t\tif (Array.isArray(scope)) return scope;\n\t\treturn [];\n\t}\n\n\tprotected get selector(): string {\n\t\treturn this.selectors.join(',');\n\t}\n\n\tprotected get targets(): HTMLElement[] {\n\t\tif (!this.selector.trim()) return [];\n\t\treturn queryAll(this.selector);\n\t}\n\n\tadd(...classes: string[]): void {\n\t\tthis.targets.forEach((target) => target.classList.add(...classes));\n\t}\n\n\tremove(...classes: string[]): void {\n\t\tthis.targets.forEach((target) => target.classList.remove(...classes));\n\t}\n\n\tclear(): void {\n\t\tthis.targets.forEach((target) => {\n\t\t\tconst remove = target.className.split(' ').filter((c) => this.isSwupClass(c));\n\t\t\ttarget.classList.remove(...remove);\n\t\t});\n\t}\n\n\tprotected isSwupClass(className: string): boolean {\n\t\treturn this.swupClasses.some((c) => className.startsWith(c));\n\t}\n}\n","import type Swup from '../Swup.js';\nimport type { Options } from '../Swup.js';\nimport type { HistoryAction, HistoryDirection } from './navigate.js';\n\n/** See below for the class Visit {} definition */\n// export interface Visit {}\n\nexport interface VisitFrom {\n\t/** The URL of the previous page */\n\turl: string;\n}\n\nexport interface VisitTo {\n\t/** The URL of the next page */\n\turl: string;\n\t/** The hash of the next page */\n\thash?: string;\n\t/** The HTML content of the next page */\n\thtml?: string;\n\t/** The parsed document of the next page, available during visit */\n\tdocument?: Document;\n}\n\nexport interface VisitAnimation {\n\t/** Whether this visit is animated. Default: `true` */\n\tanimate: boolean;\n\t/** Whether to wait for the next page to load before starting the animation. Default: `false` */\n\twait: boolean;\n\t/** Name of a custom animation to run. */\n\tname?: string;\n\t/** Whether this animation uses the native browser ViewTransition API. Default: `false` */\n\tnative: boolean;\n\t/** Elements on which to add animation classes. Default: `html` element */\n\tscope: 'html' | 'containers' | string[];\n\t/** Selector for detecting animation timing. Default: `[class*=\"transition-\"]` */\n\tselector: Options['animationSelector'];\n}\n\nexport interface VisitScroll {\n\t/** Whether to reset the scroll position after the visit. Default: `true` */\n\treset: boolean;\n\t/** Anchor element to scroll to on the next page. */\n\ttarget?: string | false;\n}\n\nexport interface VisitTrigger {\n\t/** DOM element that triggered this visit. */\n\tel?: Element;\n\t/** DOM event that triggered this visit. */\n\tevent?: Event;\n}\n\nexport interface VisitCache {\n\t/** Whether this visit will try to load the requested page from cache. */\n\tread: boolean;\n\t/** Whether this visit will save the loaded page in cache. */\n\twrite: boolean;\n}\n\nexport interface VisitHistory {\n\t/** History action to perform: `push` for creating a new history entry, `replace` for replacing the current entry. Default: `push` */\n\taction: HistoryAction;\n\t/** Whether this visit was triggered by a browser history navigation. */\n\tpopstate: boolean;\n\t/** The direction of travel in case of a browser history navigation: backward or forward. */\n\tdirection: HistoryDirection | undefined;\n}\n\nexport interface VisitInitOptions {\n\tto: string;\n\tfrom?: string;\n\thash?: string;\n\tel?: Element;\n\tevent?: Event;\n}\n\n/** @internal */\nexport const VisitState = {\n\tCREATED: 1,\n\tQUEUED: 2,\n\tSTARTED: 3,\n\tLEAVING: 4,\n\tLOADED: 5,\n\tENTERING: 6,\n\tCOMPLETED: 7,\n\tABORTED: 8,\n\tFAILED: 9\n} as const;\n\n/** @internal */\nexport type VisitState = (typeof VisitState)[keyof typeof VisitState];\n\n/** An object holding details about the current visit. */\nexport class Visit {\n\t/** A unique ID to identify this visit */\n\tid: number;\n\t/** The current state of this visit @internal */\n\tstate: VisitState;\n\t/** The previous page, about to leave */\n\tfrom: VisitFrom;\n\t/** The next page, about to enter */\n\tto: VisitTo;\n\t/** The content containers, about to be replaced */\n\tcontainers: Options['containers'];\n\t/** Information about animated page transitions */\n\tanimation: VisitAnimation;\n\t/** What triggered this visit */\n\ttrigger: VisitTrigger;\n\t/** Cache behavior for this visit */\n\tcache: VisitCache;\n\t/** Browser history behavior on this visit */\n\thistory: VisitHistory;\n\t/** Scroll behavior on this visit */\n\tscroll: VisitScroll;\n\n\tconstructor(swup: Swup, options: VisitInitOptions) {\n\t\tconst { to, from = swup.currentPageUrl, hash, el, event } = options;\n\n\t\tthis.id = Math.random();\n\t\tthis.state = VisitState.CREATED;\n\t\tthis.from = { url: from };\n\t\tthis.to = { url: to, hash };\n\t\tthis.containers = swup.options.containers;\n\t\tthis.animation = {\n\t\t\tanimate: true,\n\t\t\twait: false,\n\t\t\tname: undefined,\n\t\t\tnative: swup.options.native,\n\t\t\tscope: swup.options.animationScope,\n\t\t\tselector: swup.options.animationSelector\n\t\t};\n\t\tthis.trigger = { el, event };\n\t\tthis.cache = {\n\t\t\tread: swup.options.cache,\n\t\t\twrite: swup.options.cache\n\t\t};\n\t\tthis.history = {\n\t\t\taction: 'push',\n\t\t\tpopstate: false,\n\t\t\tdirection: undefined\n\t\t};\n\t\tthis.scroll = {\n\t\t\treset: true,\n\t\t\ttarget: undefined\n\t\t};\n\t}\n\t/** @internal */\n\tadvance(state: VisitState) {\n\t\tif (this.state < state) {\n\t\t\tthis.state = state;\n\t\t}\n\t}\n\n\t/** @internal */\n\tabort() {\n\t\tthis.state = VisitState.ABORTED;\n\t}\n\n\t/** Is this visit done, i.e. completed, failed, or aborted? */\n\tget done(): boolean {\n\t\treturn this.state >= VisitState.COMPLETED;\n\t}\n}\n\n/** Create a new visit object. */\nexport function createVisit(this: Swup, options: VisitInitOptions): Visit {\n\treturn new Visit(this, options);\n}\n","import type { DelegateEvent } from 'delegate-it';\n\nimport type Swup from '../Swup.js';\nimport { isPromise, runAsPromise } from '../utils.js';\nimport { Visit } from './Visit.js';\nimport type { FetchOptions, PageData } from './fetchPage.js';\n\nexport interface HookDefinitions {\n\t'animation:out:start': undefined;\n\t'animation:out:await': { skip: boolean };\n\t'animation:out:end': undefined;\n\t'animation:in:start': undefined;\n\t'animation:in:await': { skip: boolean };\n\t'animation:in:end': undefined;\n\t'animation:skip': undefined;\n\t'cache:clear': undefined;\n\t'cache:set': { page: PageData };\n\t'content:replace': { page: PageData };\n\t'content:scroll': undefined;\n\t'enable': undefined;\n\t'disable': undefined;\n\t'fetch:request': { url: string; options: FetchOptions };\n\t'fetch:error': { url: string; status: number; response: Response };\n\t'fetch:timeout': { url: string };\n\t'history:popstate': { event: PopStateEvent };\n\t'link:click': { el: HTMLAnchorElement; event: DelegateEvent<MouseEvent> };\n\t'link:self': undefined;\n\t'link:anchor': { hash: string };\n\t'link:newtab': { href: string };\n\t'page:load': { page?: PageData; cache?: boolean; options: FetchOptions };\n\t'page:view': { url: string; title: string };\n\t'scroll:top': { options: ScrollIntoViewOptions };\n\t'scroll:anchor': { hash: string; options: ScrollIntoViewOptions };\n\t'visit:start': undefined;\n\t'visit:transition': undefined;\n\t'visit:abort': undefined;\n\t'visit:end': undefined;\n}\n\nexport interface HookReturnValues {\n\t'content:scroll': Promise<boolean> | boolean;\n\t'fetch:request': Promise<Response>;\n\t'page:load': Promise<PageData>;\n\t'scroll:top': boolean;\n\t'scroll:anchor': boolean;\n}\n\nexport type HookArguments<T extends HookName> = HookDefinitions[T];\n\nexport type HookName = keyof HookDefinitions;\n\n/** A generic hook handler. */\nexport type HookHandler<T extends HookName> = (\n\t/** Context about the current visit. */\n\tvisit: Visit,\n\t/** Local arguments passed into the handler. */\n\targs: HookArguments<T>\n) => Promise<unknown> | unknown;\n\n/** A default hook handler with an expected return type. */\nexport type HookDefaultHandler<T extends HookName> = (\n\t/** Context about the current visit. */\n\tvisit: Visit,\n\t/** Local arguments passed into the handler. */\n\targs: HookArguments<T>,\n\t/** Default handler to be executed. Available if replacing an internal hook handler. */\n\tdefaultHandler?: HookDefaultHandler<T>\n) => T extends keyof HookReturnValues ? HookReturnValues[T] : Promise<unknown> | unknown;\n\nexport type Handlers = {\n\t[K in HookName]: HookHandler<K>[];\n};\n\n/** Unregister a previously registered hook handler. */\nexport type HookUnregister = () => void;\n\n/** Define when and how a hook handler is executed. */\nexport type HookOptions = {\n\t/** Execute the hook once, then remove the handler */\n\tonce?: boolean;\n\t/** Execute the hook before the internal default handler */\n\tbefore?: boolean;\n\t/** Set a priority for when to execute this hook. Lower numbers execute first. Default: `0` */\n\tpriority?: number;\n\t/** Replace the internal default handler with this hook handler */\n\treplace?: boolean;\n};\n\nexport type HookRegistration<\n\tT extends HookName,\n\tH extends HookHandler<T> | HookDefaultHandler<T> = HookHandler<T>\n> = {\n\tid: number;\n\thook: T;\n\thandler: H;\n\tdefaultHandler?: HookDefaultHandler<T>;\n} & HookOptions;\n\ntype HookEventDetail = {\n\thook: HookName;\n\targs: unknown;\n\tvisit: Visit;\n};\n\nexport type HookEvent = CustomEvent<HookEventDetail>;\n\ntype HookLedger<T extends HookName> = Map<HookHandler<T>, HookRegistration<T>>;\n\ninterface HookRegistry extends Map<HookName, HookLedger<HookName>> {\n\tget<K extends HookName>(key: K): HookLedger<K> | undefined;\n\tset<K extends HookName>(key: K, value: HookLedger<K>): this;\n}\n\n/**\n * Hook registry.\n *\n * Create, trigger and handle hooks.\n *\n */\nexport class Hooks {\n\t/** Swup instance this registry belongs to */\n\tprotected swup: Swup;\n\n\t/** Map of all registered hook handlers. */\n\tprotected registry: HookRegistry = new Map();\n\n\t// Can we deduplicate this somehow? Or make it error when not in sync with HookDefinitions?\n\t// https://stackoverflow.com/questions/53387838/how-to-ensure-an-arrays-values-the-keys-of-a-typescript-interface/53395649\n\tprotected readonly hooks: HookName[] = [\n\t\t'animation:out:start',\n\t\t'animation:out:await',\n\t\t'animation:out:end',\n\t\t'animation:in:start',\n\t\t'animation:in:await',\n\t\t'animation:in:end',\n\t\t'animation:skip',\n\t\t'cache:clear',\n\t\t'cache:set',\n\t\t'content:replace',\n\t\t'content:scroll',\n\t\t'enable',\n\t\t'disable',\n\t\t'fetch:request',\n\t\t'fetch:error',\n\t\t'fetch:timeout',\n\t\t'history:popstate',\n\t\t'link:click',\n\t\t'link:self',\n\t\t'link:anchor',\n\t\t'link:newtab',\n\t\t'page:load',\n\t\t'page:view',\n\t\t'scroll:top',\n\t\t'scroll:anchor',\n\t\t'visit:start',\n\t\t'visit:transition',\n\t\t'visit:abort',\n\t\t'visit:end'\n\t];\n\n\tconstructor(swup: Swup) {\n\t\tthis.swup = swup;\n\t\tthis.init();\n\t}\n\n\t/**\n\t * Create ledgers for all core hooks.\n\t */\n\tprotected init() {\n\t\tthis.hooks.forEach((hook) => this.create(hook));\n\t}\n\n\t/**\n\t * Create a new hook type.\n\t */\n\tcreate(hook: string) {\n\t\tif (!this.registry.has(hook as HookName)) {\n\t\t\tthis.registry.set(hook as HookName, new Map());\n\t\t}\n\t}\n\n\t/**\n\t * Check if a hook type exists.\n\t */\n\texists(hook: HookName): boolean {\n\t\treturn this.registry.has(hook);\n\t}\n\n\t/**\n\t * Get the ledger with all registrations for a hook.\n\t */\n\tprotected get<T extends HookName>(hook: T): HookLedger<T> | undefined {\n\t\tconst ledger = this.registry.get(hook);\n\t\tif (ledger) {\n\t\t\treturn ledger;\n\t\t}\n\t\tconsole.error(`Unknown hook '${hook}'`);\n\t}\n\n\t/**\n\t * Remove all handlers of all hooks.\n\t */\n\tclear() {\n\t\tthis.registry.forEach((ledger) => ledger.clear());\n\t}\n\n\t/**\n\t * Register a new hook handler.\n\t * @param hook Name of the hook to listen for\n\t * @param handler The handler function to execute\n\t * @param options Object to specify how and when the handler is executed\n\t *                Available options:\n\t *                - `once`: Only execute the handler once\n\t *                - `before`: Execute the handler before the default handler\n\t *                - `priority`: Specify the order in which the handlers are executed\n\t *                - `replace`: Replace the default handler with this handler\n\t * @returns A function to unregister the handler\n\t */\n\n\t// Overload: replacing default handler\n\ton<T extends HookName, O extends HookOptions>(hook: T, handler: HookDefaultHandler<T>, options: O & { replace: true }): HookUnregister; // prettier-ignore\n\t// Overload: passed in handler options\n\ton<T extends HookName, O extends HookOptions>(hook: T, handler: HookHandler<T>, options: O): HookUnregister; // prettier-ignore\n\t// Overload: no handler options\n\ton<T extends HookName>(hook: T, handler: HookHandler<T>): HookUnregister; // prettier-ignore\n\t// Implementation\n\ton<T extends HookName, O extends HookOptions>(\n\t\thook: T,\n\t\thandler: O['replace'] extends true ? HookDefaultHandler<T> : HookHandler<T>,\n\t\toptions: Partial<O> = {}\n\t): HookUnregister {\n\t\tconst ledger = this.get(hook);\n\t\tif (!ledger) {\n\t\t\tconsole.warn(`Hook '${hook}' not found.`);\n\t\t\treturn () => {};\n\t\t}\n\n\t\tconst id = ledger.size + 1;\n\t\tconst registration: HookRegistration<T> = { ...options, id, hook, handler };\n\t\tledger.set(handler, registration);\n\n\t\treturn () => this.off(hook, handler);\n\t}\n\n\t/**\n\t * Register a new hook handler to run before the default handler.\n\t * Shortcut for `hooks.on(hook, handler, { before: true })`.\n\t * @param hook Name of the hook to listen for\n\t * @param handler The handler function to execute\n\t * @param options Any other event options (see `hooks.on()` for details)\n\t * @returns A function to unregister the handler\n\t * @see on\n\t */\n\t// Overload: passed in handler options\n\tbefore<T extends HookName>(hook: T, handler: HookHandler<T>, options: HookOptions): HookUnregister; // prettier-ignore\n\t// Overload: no handler options\n\tbefore<T extends HookName>(hook: T, handler: HookHandler<T>): HookUnregister;\n\t// Implementation\n\tbefore<T extends HookName>(\n\t\thook: T,\n\t\thandler: HookHandler<T>,\n\t\toptions: HookOptions = {}\n\t): HookUnregister {\n\t\treturn this.on(hook, handler, { ...options, before: true });\n\t}\n\n\t/**\n\t * Register a new hook handler to replace the default handler.\n\t * Shortcut for `hooks.on(hook, handler, { replace: true })`.\n\t * @param hook Name of the hook to listen for\n\t * @param handler The handler function to execute instead of the default handler\n\t * @param options Any other event options (see `hooks.on()` for details)\n\t * @returns A function to unregister the handler\n\t * @see on\n\t */\n\t// Overload: passed in handler options\n\treplace<T extends HookName>(hook: T, handler: HookDefaultHandler<T>, options: HookOptions): HookUnregister; // prettier-ignore\n\t// Overload: no handler options\n\treplace<T extends HookName>(hook: T, handler: HookDefaultHandler<T>): HookUnregister; // prettier-ignore\n\t// Implementation\n\treplace<T extends HookName>(\n\t\thook: T,\n\t\thandler: HookDefaultHandler<T>,\n\t\toptions: HookOptions = {}\n\t): HookUnregister {\n\t\treturn this.on(hook, handler, { ...options, replace: true });\n\t}\n\n\t/**\n\t * Register a new hook handler to run once.\n\t * Shortcut for `hooks.on(hook, handler, { once: true })`.\n\t * @param hook Name of the hook to listen for\n\t * @param handler The handler function to execute\n\t * @param options Any other event options (see `hooks.on()` for details)\n\t * @see on\n\t */\n\t// Overload: passed in handler options\n\tonce<T extends HookName>(hook: T, handler: HookHandler<T>, options: HookOptions): HookUnregister; // prettier-ignore\n\t// Overload: no handler options\n\tonce<T extends HookName>(hook: T, handler: HookHandler<T>): HookUnregister;\n\t// Implementation\n\tonce<T extends HookName>(\n\t\thook: T,\n\t\thandler: HookHandler<T>,\n\t\toptions: HookOptions = {}\n\t): HookUnregister {\n\t\treturn this.on(hook, handler, { ...options, once: true });\n\t}\n\n\t/**\n\t * Unregister a hook handler.\n\t * @param hook Name of the hook the handler is registered for\n\t * @param handler The handler function that was registered.\n\t *                If omitted, all handlers for the hook will be removed.\n\t */\n\t// Overload: unregister a specific handler\n\toff<T extends HookName>(hook: T, handler: HookHandler<T> | HookDefaultHandler<T>): void;\n\t// Overload: unregister all handlers\n\toff<T extends HookName>(hook: T): void;\n\t// Implementation\n\toff<T extends HookName>(hook: T, handler?: HookHandler<T> | HookDefaultHandler<T>): void {\n\t\tconst ledger = this.get(hook);\n\t\tif (ledger && handler) {\n\t\t\tconst deleted = ledger.delete(handler);\n\t\t\tif (!deleted) {\n\t\t\t\tconsole.warn(`Handler for hook '${hook}' not found.`);\n\t\t\t}\n\t\t} else if (ledger) {\n\t\t\tledger.clear();\n\t\t}\n\t}\n\n\t/**\n\t * Trigger a hook asynchronously, executing its default handler and all registered handlers.\n\t * Will execute all handlers in order and `await` any `Promise`s they return.\n\t * @param hook Name of the hook to trigger\n\t * @param visit The visit object this hook belongs to\n\t * @param args Arguments to pass to the handler\n\t * @param defaultHandler A default implementation of this hook to execute\n\t * @returns The resolved return value of the executed default handler\n\t */\n\t// Overload: default order of arguments\n\tasync call<T extends HookName>(hook: T, visit: Visit | undefined, args: HookArguments<T>, defaultHandler?: HookDefaultHandler<T>): Promise<Awaited<ReturnType<HookDefaultHandler<T>>>>; // prettier-ignore\n\t// Overload: legacy order of arguments, with visit missing\n\tasync call<T extends HookName>(hook: T, args: HookArguments<T>, defaultHandler?: HookDefaultHandler<T>): Promise<Awaited<ReturnType<HookDefaultHandler<T>>>>; // prettier-ignore\n\t// Implementation\n\tasync call<T extends HookName>(\n\t\thook: T,\n\t\targ1: Visit | HookArguments<T>,\n\t\targ2: HookArguments<T> | HookDefaultHandler<T>,\n\t\targ3?: HookDefaultHandler<T>\n\t): Promise<Awaited<ReturnType<HookDefaultHandler<T>>>> {\n\t\tconst [visit, args, defaultHandler] = this.parseCallArgs(hook, arg1, arg2, arg3);\n\n\t\tconst { before, handler, after } = this.getHandlers(hook, defaultHandler);\n\t\tawait this.run(before, visit, args);\n\t\tconst [result] = await this.run(handler, visit, args, true);\n\t\tawait this.run(after, visit, args);\n\t\tthis.dispatchDomEvent(hook, visit, args);\n\t\treturn result;\n\t}\n\n\t/**\n\t * Trigger a hook synchronously, executing its default handler and all registered handlers.\n\t * Will execute all handlers in order, but will **not** `await` any `Promise`s they return.\n\t * @param hook Name of the hook to trigger\n\t * @param visit The visit object this hook belongs to\n\t * @param args Arguments to pass to the handler\n\t * @param defaultHandler A default implementation of this hook to execute\n\t * @returns The (possibly unresolved) return value of the executed default handler\n\t */\n\t// Overload: default order of arguments\n\tcallSync<T extends HookName>(hook: T, visit: Visit | undefined, args: HookArguments<T>, defaultHandler?: HookDefaultHandler<T>): ReturnType<HookDefaultHandler<T>>; // prettier-ignore\n\t// Overload: legacy order of arguments, with visit missing\n\tcallSync<T extends HookName>(hook: T, args: HookArguments<T>, defaultHandler?: HookDefaultHandler<T>): ReturnType<HookDefaultHandler<T>>; // prettier-ignore\n\t// Implementation\n\tcallSync<T extends HookName>(\n\t\thook: T,\n\t\targ1: Visit | HookArguments<T>,\n\t\targ2: HookArguments<T> | HookDefaultHandler<T>,\n\t\targ3?: HookDefaultHandler<T>\n\t): ReturnType<HookDefaultHandler<T>> {\n\t\tconst [visit, args, defaultHandler] = this.parseCallArgs(hook, arg1, arg2, arg3);\n\t\tconst { before, handler, after } = this.getHandlers(hook, defaultHandler);\n\t\tthis.runSync(before, visit, args);\n\t\tconst [result] = this.runSync(handler, visit, args, true);\n\t\tthis.runSync(after, visit, args);\n\t\tthis.dispatchDomEvent(hook, visit, args);\n\t\treturn result;\n\t}\n\n\t/**\n\t * Parse the call arguments for call() and callSync() to allow legacy argument order.\n\t */\n\tprotected parseCallArgs<T extends HookName>(\n\t\thook: T,\n\t\targ1: Visit | HookArguments<T> | undefined,\n\t\targ2: HookArguments<T> | HookDefaultHandler<T>,\n\t\targ3?: HookDefaultHandler<T>\n\t): [Visit | undefined, HookArguments<T>, HookDefaultHandler<T> | undefined] {\n\t\tconst isLegacyOrder =\n\t\t\t!(arg1 instanceof Visit) && (typeof arg1 === 'object' || typeof arg2 === 'function');\n\t\tif (isLegacyOrder) {\n\t\t\t// Legacy positioning: arguments in second or handler passed in third place\n\t\t\treturn [undefined, arg1 as HookArguments<T>, arg2 as HookDefaultHandler<T>];\n\t\t} else {\n\t\t\t// Default positioning: visit passed in as first argument\n\t\t\treturn [arg1, arg2 as HookArguments<T>, arg3];\n\t\t}\n\t}\n\n\t/**\n\t * Execute the handlers for a hook, in order, as `Promise`s that will be `await`ed.\n\t * @param registrations The registrations (handler + options) to execute\n\t * @param args Arguments to pass to the handler\n\t */\n\n\t// Overload: running HookDefaultHandler: expect HookDefaultHandler return type\n\tprotected async run<T extends HookName>(registrations: HookRegistration<T, HookDefaultHandler<T>>[], visit: Visit | undefined, args: HookArguments<T>, rethrow: true): Promise<Awaited<ReturnType<HookDefaultHandler<T>>>[]>; // prettier-ignore\n\t// Overload:  running user handler: expect no specific type\n\tprotected async run<T extends HookName>(registrations: HookRegistration<T>[], visit: Visit | undefined, args: HookArguments<T>): Promise<unknown[]>; // prettier-ignore\n\t// Implementation\n\tprotected async run<T extends HookName, R extends HookRegistration<T>[]>(\n\t\tregistrations: R,\n\t\tvisit: Visit | undefined = this.swup.visit,\n\t\targs: HookArguments<T>,\n\t\trethrow: boolean = false\n\t): Promise<Awaited<ReturnType<HookDefaultHandler<T>>> | unknown[]> {\n\t\tconst results = [];\n\t\tfor (const { hook, handler, defaultHandler, once } of registrations) {\n\t\t\tif (visit?.done) continue;\n\t\t\tif (once) this.off(hook, handler);\n\t\t\ttry {\n\t\t\t\tconst result = await runAsPromise(handler, [visit, args, defaultHandler]);\n\t\t\t\tresults.push(result);\n\t\t\t} catch (error) {\n\t\t\t\tif (rethrow) {\n\t\t\t\t\tthrow error;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(`Error in hook '${hook}':`, error);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn results;\n\t}\n\n\t/**\n\t * Execute the handlers for a hook, in order, without `await`ing any returned `Promise`s.\n\t * @param registrations The registrations (handler + options) to execute\n\t * @param args Arguments to pass to the handler\n\t */\n\n\t// Overload: running HookDefaultHandler: expect HookDefaultHandler return type\n\tprotected runSync<T extends HookName>(registrations: HookRegistration<T, HookDefaultHandler<T>>[], visit: Visit | undefined, args: HookArguments<T>, rethrow: true): ReturnType<HookDefaultHandler<T>>[]; // prettier-ignore\n\t// Overload: running user handler: expect no specific type\n\tprotected runSync<T extends HookName>(registrations: HookRegistration<T>[], visit: Visit | undefined, args: HookArguments<T>): unknown[]; // prettier-ignore\n\t// Implementation\n\tprotected runSync<T extends HookName, R extends HookRegistration<T>[]>(\n\t\tregistrations: R,\n\t\tvisit: Visit | undefined = this.swup.visit,\n\t\targs: HookArguments<T>,\n\t\trethrow: boolean = false\n\t): (ReturnType<HookDefaultHandler<T>> | unknown)[] {\n\t\tconst results = [];\n\t\tfor (const { hook, handler, defaultHandler, once } of registrations) {\n\t\t\tif (visit?.done) continue;\n\t\t\tif (once) this.off(hook, handler);\n\t\t\ttry {\n\t\t\t\tconst result = (handler as HookDefaultHandler<T>)(visit, args, defaultHandler);\n\t\t\t\tresults.push(result);\n\t\t\t\tif (isPromise(result)) {\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t`Swup will not await Promises in handler for synchronous hook '${hook}'.`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tif (rethrow) {\n\t\t\t\t\tthrow error;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(`Error in hook '${hook}':`, error);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn results;\n\t}\n\n\t/**\n\t * Get all registered handlers for a hook, sorted by priority and registration order.\n\t * @param hook Name of the hook\n\t * @param defaultHandler The optional default handler of this hook\n\t * @returns An object with the handlers sorted into `before` and `after` arrays,\n\t *          as well as a flag indicating if the original handler was replaced\n\t */\n\tprotected getHandlers<T extends HookName>(hook: T, defaultHandler?: HookDefaultHandler<T>) {\n\t\tconst ledger = this.get(hook);\n\t\tif (!ledger) {\n\t\t\treturn { found: false, before: [], handler: [], after: [], replaced: false };\n\t\t}\n\n\t\tconst registrations = Array.from(ledger.values());\n\n\t\t// Let TypeScript know that replaced handlers are default handlers by filtering to true\n\t\tconst def = (T: HookRegistration<T>): T is HookRegistration<T, HookDefaultHandler<T>> => true; // prettier-ignore\n\t\tconst sort = this.sortRegistrations;\n\n\t\t// Filter into before, after, and replace handlers\n\t\tconst before = registrations.filter(({ before, replace }) => before && !replace).sort(sort);\n\t\tconst replace = registrations.filter(({ replace }) => replace).filter(def).sort(sort); // prettier-ignore\n\t\tconst after = registrations.filter(({ before, replace }) => !before && !replace).sort(sort);\n\t\tconst replaced = replace.length > 0;\n\n\t\t// Define main handler registration\n\t\t// Created as HookRegistration[] array to allow passing it into hooks.run() directly\n\t\tlet handler: HookRegistration<T, HookDefaultHandler<T>>[] = [];\n\t\tif (defaultHandler) {\n\t\t\thandler = [{ id: 0, hook, handler: defaultHandler }];\n\t\t\tif (replaced) {\n\t\t\t\tconst index = replace.length - 1;\n\t\t\t\tconst replacingHandler = replace[index].handler;\n\t\t\t\tconst createDefaultHandler = (index: number): HookDefaultHandler<T> | undefined => {\n\t\t\t\t\tconst next = replace[index - 1];\n\t\t\t\t\tif (next) {\n\t\t\t\t\t\treturn (visit, args) =>\n\t\t\t\t\t\t\tnext.handler(visit, args, createDefaultHandler(index - 1));\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn defaultHandler;\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tconst nestedDefaultHandler = createDefaultHandler(index);\n\t\t\t\thandler = [\n\t\t\t\t\t{ id: 0, hook, handler: replacingHandler, defaultHandler: nestedDefaultHandler }\n\t\t\t\t];\n\t\t\t}\n\t\t}\n\n\t\treturn { found: true, before, handler, after, replaced };\n\t}\n\n\t/**\n\t * Sort two hook registrations by priority and registration order.\n\t * @param a The registration object to compare\n\t * @param b The other registration object to compare with\n\t * @returns The sort direction\n\t */\n\tprotected sortRegistrations<T extends HookName>(\n\t\ta: HookRegistration<T>,\n\t\tb: HookRegistration<T>\n\t): number {\n\t\tconst priority = (a.priority ?? 0) - (b.priority ?? 0);\n\t\tconst id = a.id - b.id;\n\t\treturn priority || id || 0;\n\t}\n\n\t/**\n\t * Dispatch a custom event on the `document` for a hook. Prefixed with `swup:`\n\t * @param hook Name of the hook.\n\t */\n\tprotected dispatchDomEvent<T extends HookName>(\n\t\thook: T,\n\t\tvisit: Visit | undefined,\n\t\targs?: HookArguments<T>\n\t): void {\n\t\tif (visit?.done) return;\n\n\t\tconst detail: HookEventDetail = { hook, args, visit: visit || this.swup.visit };\n\t\tdocument.dispatchEvent(\n\t\t\tnew CustomEvent<HookEventDetail>(`swup:any`, { detail, bubbles: true })\n\t\t);\n\t\tdocument.dispatchEvent(\n\t\t\tnew CustomEvent<HookEventDetail>(`swup:${hook}`, { detail, bubbles: true })\n\t\t);\n\t}\n}\n","import { query } from '../utils.js';\n\n/**\n * Find the anchor element for a given hash.\n *\n * @param hash Hash with or without leading '#'\n * @returns The element, if found, or null.\n *\n * @see https://html.spec.whatwg.org/#find-a-potential-indicated-element\n */\nexport const getAnchorElement = (hash?: string): Element | null => {\n\tif (hash && hash.charAt(0) === '#') {\n\t\thash = hash.substring(1);\n\t}\n\n\tif (!hash) {\n\t\treturn null;\n\t}\n\n\tconst decoded = decodeURIComponent(hash);\n\tlet element =\n\t\tdocument.getElementById(hash) ||\n\t\tdocument.getElementById(decoded) ||\n\t\tquery(`a[name='${CSS.escape(hash)}']`) ||\n\t\tquery(`a[name='${CSS.escape(decoded)}']`);\n\n\tif (!element && hash === 'top') {\n\t\telement = document.body;\n\t}\n\n\treturn element;\n};\n","import { queryAll } from '../utils.js';\nimport type Swup from '../Swup.js';\nimport type { Options } from '../Swup.js';\n\nconst TRANSITION = 'transition';\nconst ANIMATION = 'animation';\n\ntype AnimationTypes = typeof TRANSITION | typeof ANIMATION;\ntype AnimationProperties = 'Delay' | 'Duration';\ntype AnimationStyleKeys = `${AnimationTypes}${AnimationProperties}` | 'transitionProperty';\ntype AnimationStyleDeclarations = Pick<CSSStyleDeclaration, AnimationStyleKeys>;\n\nexport type AnimationDirection = 'in' | 'out';\n\n/**\n * Return a Promise that resolves when all CSS animations and transitions\n * are done on the page. Filters by selector or takes elements directly.\n */\nexport async function awaitAnimations(\n\tthis: Swup,\n\t{\n\t\telements,\n\t\tselector\n\t}: {\n\t\tselector: Options['animationSelector'];\n\t\telements?: NodeListOf<HTMLElement> | HTMLElement[];\n\t}\n): Promise<void> {\n\t// Allow usage of swup without animations: { animationSelector: false }\n\tif (selector === false && !elements) {\n\t\treturn;\n\t}\n\n\t// Allow passing in elements\n\tlet animatedElements: HTMLElement[] = [];\n\tif (elements) {\n\t\tanimatedElements = Array.from(elements);\n\t} else if (selector) {\n\t\tanimatedElements = queryAll(selector, document.body);\n\t\t// Warn if no elements match the selector, but keep things going\n\t\tif (!animatedElements.length) {\n\t\t\tconsole.warn(`[swup] No elements found matching animationSelector \\`${selector}\\``);\n\t\t\treturn;\n\t\t}\n\t}\n\n\tconst awaitedAnimations = animatedElements.map((el) => awaitAnimationsOnElement(el));\n\tconst hasAnimations = awaitedAnimations.filter(Boolean).length > 0;\n\tif (!hasAnimations) {\n\t\tif (selector) {\n\t\t\tconsole.warn(\n\t\t\t\t`[swup] No CSS animation duration defined on elements matching \\`${selector}\\``\n\t\t\t);\n\t\t}\n\t\treturn;\n\t}\n\n\tawait Promise.all(awaitedAnimations);\n}\n\nfunction awaitAnimationsOnElement(element: Element): Promise<void> | false {\n\tconst { type, timeout, propCount } = getTransitionInfo(element);\n\n\t// Resolve immediately if no transition defined\n\tif (!type || !timeout) {\n\t\treturn false;\n\t}\n\n\treturn new Promise((resolve) => {\n\t\tconst endEvent = `${type}end`;\n\t\tconst startTime = performance.now();\n\t\tlet propsTransitioned = 0;\n\n\t\tconst end = () => {\n\t\t\telement.removeEventListener(endEvent, onEnd);\n\t\t\tresolve();\n\t\t};\n\n\t\tconst onEnd: EventListener = (event) => {\n\t\t\t// Skip transitions on child elements\n\t\t\tif (event.target !== element) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!isTransitionOrAnimationEvent(event)) {\n\t\t\t\tthrow new Error('Not a transition or animation event.');\n\t\t\t}\n\n\t\t\t// Skip transitions that happened before we started listening\n\t\t\tconst elapsedTime = (performance.now() - startTime) / 1000;\n\t\t\tif (elapsedTime < event.elapsedTime) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// End if all properties have transitioned\n\t\t\tif (++propsTransitioned >= propCount) {\n\t\t\t\tend();\n\t\t\t}\n\t\t};\n\n\t\tsetTimeout(() => {\n\t\t\tif (propsTransitioned < propCount) {\n\t\t\t\tend();\n\t\t\t}\n\t\t}, timeout + 1);\n\n\t\telement.addEventListener(endEvent, onEnd);\n\t});\n}\n\nfunction getTransitionInfo(element: Element) {\n\tconst styles = window.getComputedStyle(element) as AnimationStyleDeclarations;\n\n\tconst transitionDelays = getStyleProperties(styles, `${TRANSITION}Delay`);\n\tconst transitionDurations = getStyleProperties(styles, `${TRANSITION}Duration`);\n\tconst transitionTimeout = calculateTimeout(transitionDelays, transitionDurations);\n\tconst animationDelays = getStyleProperties(styles, `${ANIMATION}Delay`);\n\tconst animationDurations = getStyleProperties(styles, `${ANIMATION}Duration`);\n\tconst animationTimeout = calculateTimeout(animationDelays, animationDurations);\n\n\tconst timeout = Math.max(transitionTimeout, animationTimeout);\n\tconst type =\n\t\ttimeout > 0 ? (transitionTimeout > animationTimeout ? TRANSITION : ANIMATION) : null;\n\tconst propCount = type\n\t\t? type === TRANSITION\n\t\t\t? transitionDurations.length\n\t\t\t: animationDurations.length\n\t\t: 0;\n\n\treturn {\n\t\ttype,\n\t\ttimeout,\n\t\tpropCount\n\t};\n}\n\nfunction isTransitionOrAnimationEvent(event: Event): event is TransitionEvent | AnimationEvent {\n\treturn [`${TRANSITION}end`, `${ANIMATION}end`].includes(event.type);\n}\n\nfunction getStyleProperties(styles: AnimationStyleDeclarations, key: AnimationStyleKeys): string[] {\n\treturn (styles[key] || '').split(', ');\n}\n\nfunction calculateTimeout(delays: string[], durations: string[]): number {\n\twhile (delays.length < durations.length) {\n\t\tdelays = delays.concat(delays);\n\t}\n\n\treturn Math.max(...durations.map((duration, i) => toMs(duration) + toMs(delays[i])));\n}\n\nfunction toMs(time: string): number {\n\treturn parseFloat(time) * 1000;\n}\n","import type Swup from '../Swup.js';\nimport { FetchError, type FetchOptions, type PageData } from './fetchPage.js';\nimport { type VisitInitOptions, type Visit, VisitState } from './Visit.js';\nimport {\n\tcreateHistoryRecord,\n\tupdateHistoryRecord,\n\tgetCurrentUrl,\n\tLocation,\n\tclassify\n} from '../helpers.js';\n\nexport type HistoryAction = 'push' | 'replace';\nexport type HistoryDirection = 'forwards' | 'backwards';\nexport type NavigationToSelfAction = 'scroll' | 'navigate';\nexport type CacheControl = Partial<{ read: boolean; write: boolean }>;\n\n/** Define how to navigate to a page. */\ntype NavigationOptions = {\n\t/** Whether this visit is animated. Default: `true` */\n\tanimate?: boolean;\n\t/** Name of a custom animation to run. */\n\tanimation?: string;\n\t/** History action to perform: `push` for creating a new history entry, `replace` for replacing the current entry. Default: `push` */\n\thistory?: HistoryAction;\n\t/** Whether this visit should read from or write to the cache. */\n\tcache?: CacheControl;\n};\n\n/**\n * Navigate to a new URL.\n * @param url The URL to navigate to.\n * @param options Options for how to perform this visit.\n * @returns Promise<void>\n */\nexport function navigate(\n\tthis: Swup,\n\turl: string,\n\toptions: NavigationOptions & FetchOptions = {},\n\tinit: Omit<VisitInitOptions, 'to'> = {}\n) {\n\tif (typeof url !== 'string') {\n\t\tthrow new Error(`swup.navigate() requires a URL parameter`);\n\t}\n\n\t// Check if the visit should be ignored\n\tif (this.shouldIgnoreVisit(url, { el: init.el, event: init.event })) {\n\t\twindow.location.assign(url);\n\t\treturn;\n\t}\n\n\tconst { url: to, hash } = Location.fromUrl(url);\n\n\tconst visit = this.createVisit({ ...init, to, hash });\n\tthis.performNavigation(visit, options);\n}\n\n/**\n * Start a visit to a new URL.\n *\n * Internal method that assumes the visit context has already been created.\n *\n * As a user, you should call `swup.navigate(url)` instead.\n *\n * @param url The URL to navigate to.\n * @param options Options for how to perform this visit.\n * @returns Promise<void>\n */\nexport async function performNavigation(\n\tthis: Swup,\n\tvisit: Visit,\n\toptions: NavigationOptions & FetchOptions = {}\n): Promise<void> {\n\tif (this.navigating) {\n\t\tif (this.visit.state >= VisitState.ENTERING) {\n\t\t\t// Currently navigating and content already loaded? Finish and queue\n\t\t\tvisit.state = VisitState.QUEUED;\n\t\t\tthis.onVisitEnd = () => this.performNavigation(visit, options);\n\t\t\treturn;\n\t\t} else {\n\t\t\t// Currently navigating and content not loaded? Abort running visit\n\t\t\tawait this.hooks.call('visit:abort', this.visit, undefined);\n\t\t\tdelete this.visit.to.document;\n\t\t\tthis.visit.state = VisitState.ABORTED;\n\t\t}\n\t}\n\n\tthis.navigating = true;\n\tthis.visit = visit;\n\n\tconst { el } = visit.trigger;\n\toptions.referrer = options.referrer || this.currentPageUrl;\n\n\tif (options.animate === false) {\n\t\tvisit.animation.animate = false;\n\t}\n\n\t// Clean up old animation classes\n\tif (!visit.animation.animate) {\n\t\tthis.classes.clear();\n\t}\n\n\t// Get history action from option or attribute on trigger element\n\tconst history = options.history || el?.getAttribute('data-swup-history') || undefined;\n\tif (history && ['push', 'replace'].includes(history)) {\n\t\tvisit.history.action = history as HistoryAction;\n\t}\n\n\t// Get custom animation name from option or attribute on trigger element\n\tconst animation = options.animation || el?.getAttribute('data-swup-animation') || undefined;\n\tif (animation) {\n\t\tvisit.animation.name = animation;\n\t}\n\n\t// Sanitize cache option\n\tif (typeof options.cache === 'object') {\n\t\tvisit.cache.read = options.cache.read ?? visit.cache.read;\n\t\tvisit.cache.write = options.cache.write ?? visit.cache.write;\n\t} else if (options.cache !== undefined) {\n\t\tvisit.cache = { read: !!options.cache, write: !!options.cache };\n\t}\n\t// Delete this so that window.fetch doesn't mis-interpret it\n\tdelete options.cache;\n\n\ttry {\n\t\tawait this.hooks.call('visit:start', visit, undefined);\n\t\tvisit.state = VisitState.STARTED;\n\n\t\t// Begin loading page\n\t\tconst page = this.hooks.call('page:load', visit, { options }, async (visit, args) => {\n\t\t\t// Read from cache\n\t\t\tlet cachedPage: PageData | undefined;\n\t\t\tif (visit.cache.read) {\n\t\t\t\tcachedPage = this.cache.get(visit.to.url);\n\t\t\t}\n\n\t\t\targs.page = cachedPage || (await this.fetchPage(visit.to.url, args.options));\n\t\t\targs.cache = !!cachedPage;\n\n\t\t\treturn args.page;\n\t\t});\n\n\t\t/**\n\t\t * When the page is loaded: mark the visit as loaded and save\n\t\t * the raw html and a parsed document of the received page in the visit object\n\t\t */\n\t\tpage.then(({ html }) => {\n\t\t\tvisit.advance(VisitState.LOADED);\n\t\t\tvisit.to.html = html;\n\t\t\tvisit.to.document = new DOMParser().parseFromString(html, 'text/html');\n\t\t});\n\n\t\t// Create/update history record if this is not a popstate call or leads to the same URL\n\t\tif (!visit.history.popstate) {\n\t\t\t// Add the hash directly from the trigger element\n\t\t\tconst newUrl = visit.to.url + visit.to.hash;\n\t\t\tif (visit.history.action === 'replace' || visit.to.url === this.currentPageUrl) {\n\t\t\t\tupdateHistoryRecord(newUrl);\n\t\t\t} else {\n\t\t\t\tthis.currentHistoryIndex++;\n\t\t\t\tcreateHistoryRecord(newUrl, { index: this.currentHistoryIndex });\n\t\t\t}\n\t\t}\n\n\t\tthis.currentPageUrl = getCurrentUrl();\n\n\t\t// Mark visit type with classes\n\t\tif (visit.history.popstate) {\n\t\t\tthis.classes.add('is-popstate');\n\t\t}\n\t\tif (visit.animation.name) {\n\t\t\tthis.classes.add(`to-${classify(visit.animation.name)}`);\n\t\t}\n\n\t\t// Wait for page before starting to animate out?\n\t\tif (visit.animation.wait) {\n\t\t\tawait page;\n\t\t}\n\n\t\t// Check if failed/aborted in the meantime\n\t\tif (visit.done) return;\n\n\t\t// Perform the actual transition: animate and replace content\n\t\tawait this.hooks.call('visit:transition', visit, undefined, async () => {\n\t\t\t// No animation? Just await page and render\n\t\t\tif (!visit.animation.animate) {\n\t\t\t\tawait this.hooks.call('animation:skip', undefined);\n\t\t\t\tawait this.renderPage(visit, await page);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Animate page out, render page, animate page in\n\t\t\tvisit.advance(VisitState.LEAVING);\n\t\t\tawait this.animatePageOut(visit);\n\t\t\tif (visit.animation.native && document.startViewTransition) {\n\t\t\t\tawait document.startViewTransition(\n\t\t\t\t\tasync () => await this.renderPage(visit, await page)\n\t\t\t\t).finished;\n\t\t\t} else {\n\t\t\t\tawait this.renderPage(visit, await page);\n\t\t\t}\n\t\t\tawait this.animatePageIn(visit);\n\t\t});\n\n\t\t// Check if failed/aborted in the meantime\n\t\tif (visit.done) return;\n\n\t\t// Finalize visit\n\t\tawait this.hooks.call('visit:end', visit, undefined, () => this.classes.clear());\n\t\tvisit.state = VisitState.COMPLETED;\n\t\tthis.navigating = false;\n\n\t\t/** Run eventually queued function */\n\t\tif (this.onVisitEnd) {\n\t\t\tthis.onVisitEnd();\n\t\t\tthis.onVisitEnd = undefined;\n\t\t}\n\t} catch (error) {\n\t\t// Return early if error is undefined or signals an aborted request\n\t\tif (!error || (error as FetchError)?.aborted) {\n\t\t\tvisit.state = VisitState.ABORTED;\n\t\t\treturn;\n\t\t}\n\n\t\tvisit.state = VisitState.FAILED;\n\n\t\t// Log to console\n\t\tconsole.error(error);\n\n\t\t// Remove current history entry, then load requested url in browser\n\t\tthis.options.skipPopStateHandling = () => {\n\t\t\twindow.location.assign(visit.to.url + visit.to.hash);\n\t\t\treturn true;\n\t\t};\n\n\t\t// Go back to the actual page we're still at\n\t\twindow.history.back();\n\t} finally {\n\t\tdelete visit.to.document;\n\t}\n}\n","import type Swup from '../Swup.js';\nimport type { Visit } from './Visit.js';\n\n/**\n * Perform the out/leave animation of the current page.\n * @returns Promise<void>\n */\nexport const animatePageOut = async function (this: Swup, visit: Visit) {\n\tawait this.hooks.call('animation:out:start', visit, undefined, () => {\n\t\tthis.classes.add('is-changing', 'is-animating', 'is-leaving');\n\t});\n\n\tawait this.hooks.call('animation:out:await', visit, { skip: false }, (visit, { skip }) => {\n\t\tif (skip) return;\n\t\treturn this.awaitAnimations({ selector: visit.animation.selector });\n\t});\n\n\tawait this.hooks.call('animation:out:end', visit, undefined);\n};\n","import type Swup from '../Swup.js';\nimport { query, queryAll } from '../utils.js';\nimport type { Visit } from './Visit.js';\n\n/**\n * Perform the replacement of content after loading a page.\n *\n * @returns Whether all containers were replaced.\n */\nexport const replaceContent = function (this: Swup, visit: Visit): boolean {\n\tconst incomingDocument = visit.to.document;\n\tif (!incomingDocument) return false;\n\n\t// Update browser title\n\tconst title = incomingDocument.querySelector('title')?.innerText || '';\n\tdocument.title = title;\n\n\t// Save persisted elements\n\tconst persistedElements = queryAll('[data-swup-persist]:not([data-swup-persist=\"\"])');\n\n\t// Update content containers\n\tconst replaced = visit.containers\n\t\t.map((selector) => {\n\t\t\tconst currentEl = document.querySelector(selector);\n\t\t\tconst incomingEl = incomingDocument.querySelector(selector);\n\t\t\tif (currentEl && incomingEl) {\n\t\t\t\tcurrentEl.replaceWith(incomingEl.cloneNode(true));\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tif (!currentEl) {\n\t\t\t\tconsole.warn(`[swup] Container missing in current document: ${selector}`);\n\t\t\t}\n\t\t\tif (!incomingEl) {\n\t\t\t\tconsole.warn(`[swup] Container missing in incoming document: ${selector}`);\n\t\t\t}\n\t\t\treturn false;\n\t\t})\n\t\t.filter(Boolean);\n\n\t// Restore persisted elements\n\tpersistedElements.forEach((existing) => {\n\t\tconst key = existing.getAttribute('data-swup-persist');\n\t\tconst replacement = query(`[data-swup-persist=\"${key}\"]`);\n\t\tif (replacement && replacement !== existing) {\n\t\t\treplacement.replaceWith(existing);\n\t\t}\n\t});\n\n\t// Return true if all containers were replaced\n\treturn replaced.length === visit.containers.length;\n};\n","import type Swup from '../Swup.js';\nimport type { Visit } from './Visit.js';\n\n/**\n * Update the scroll position after page render.\n * @returns Promise<boolean>\n */\nexport const scrollToContent = function (this: Swup, visit: Visit): boolean {\n\tconst options: ScrollIntoViewOptions = { behavior: 'auto' };\n\tconst { target, reset } = visit.scroll;\n\tconst scrollTarget = target ?? visit.to.hash;\n\n\tlet scrolled = false;\n\n\tif (scrollTarget) {\n\t\tscrolled = this.hooks.callSync(\n\t\t\t'scroll:anchor',\n\t\t\tvisit,\n\t\t\t{ hash: scrollTarget, options },\n\t\t\t(visit, { hash, options }) => {\n\t\t\t\tconst anchor = this.getAnchorElement(hash);\n\t\t\t\tif (anchor) {\n\t\t\t\t\tanchor.scrollIntoView(options);\n\t\t\t\t}\n\t\t\t\treturn !!anchor;\n\t\t\t}\n\t\t);\n\t}\n\n\tif (reset && !scrolled) {\n\t\tscrolled = this.hooks.callSync('scroll:top', visit, { options }, (visit, { options }) => {\n\t\t\twindow.scrollTo({ top: 0, left: 0, ...options });\n\t\t\treturn true;\n\t\t});\n\t}\n\n\treturn scrolled;\n};\n","import type Swup from '../Swup.js';\nimport { nextTick } from '../utils.js';\nimport type { Visit } from './Visit.js';\n\n/**\n * Perform the in/enter animation of the next page.\n * @returns Promise<void>\n */\nexport const animatePageIn = async function (this: Swup, visit: Visit) {\n\t// Check if failed/aborted in the meantime\n\tif (visit.done) return;\n\n\tconst animation = this.hooks.call(\n\t\t'animation:in:await',\n\t\tvisit,\n\t\t{ skip: false },\n\t\t(visit, { skip }) => {\n\t\t\tif (skip) return;\n\t\t\treturn this.awaitAnimations({ selector: visit.animation.selector });\n\t\t}\n\t);\n\n\tawait nextTick();\n\n\tawait this.hooks.call('animation:in:start', visit, undefined, () => {\n\t\tthis.classes.remove('is-animating');\n\t});\n\n\tawait animation;\n\n\tawait this.hooks.call('animation:in:end', visit, undefined);\n};\n","import { updateHistoryRecord, getCurrentUrl, classify } from '../helpers.js';\nimport type Swup from '../Swup.js';\nimport type { PageData } from './fetchPage.js';\nimport { VisitState, type Visit } from './Visit.js';\n\n/**\n * Render the next page: replace the content and update scroll position.\n */\nexport const renderPage = async function (this: Swup, visit: Visit, page: PageData): Promise<void> {\n\t// Check if failed/aborted in the meantime\n\tif (visit.done) return;\n\n\tvisit.advance(VisitState.ENTERING);\n\n\tconst { url } = page;\n\n\t// update state if the url was redirected\n\tif (!this.isSameResolvedUrl(getCurrentUrl(), url)) {\n\t\tupdateHistoryRecord(url);\n\t\tthis.currentPageUrl = getCurrentUrl();\n\t\tvisit.to.url = this.currentPageUrl;\n\t}\n\n\t// replace content: allow handlers and plugins to overwrite paga data and containers\n\tawait this.hooks.call('content:replace', visit, { page }, (visit, { page }) => {\n\t\tthis.classes.remove('is-leaving');\n\t\t// only add for animated page loads\n\t\tif (visit.animation.animate) {\n\t\t\tthis.classes.add('is-rendering');\n\t\t}\n\t\tconst success = this.replaceContent(visit);\n\t\tif (!success) {\n\t\t\tthrow new Error('[swup] Container mismatch, aborting');\n\t\t}\n\t\tif (visit.animation.animate) {\n\t\t\t// Make sure to add these classes to new containers as well\n\t\t\tthis.classes.add('is-changing', 'is-animating', 'is-rendering');\n\t\t\tif (visit.animation.name) {\n\t\t\t\tthis.classes.add(`to-${classify(visit.animation.name)}`);\n\t\t\t}\n\t\t}\n\t});\n\n\t// scroll into view: either anchor or top of page\n\tawait this.hooks.call('content:scroll', visit, undefined, () => {\n\t\treturn this.scrollToContent(visit);\n\t});\n\n\tawait this.hooks.call('page:view', visit, { url: this.currentPageUrl, title: document.title });\n};\n","import type Swup from '../Swup.js';\n\nexport type Plugin = {\n\t/** Identify as a swup plugin */\n\tisSwupPlugin: true;\n\t/** Name of this plugin */\n\tname: string;\n\t/** Version of this plugin. Currently not in use, defined here for backward compatiblity. */\n\tversion?: string;\n\t/** The swup instance that mounted this plugin */\n\tswup?: Swup;\n\t/** Version requirements of this plugin. Example: `{ swup: '>=4' }` */\n\trequires?: Record<string, string | string[]>;\n\t/** Run on mount */\n\tmount: () => void;\n\t/** Run on unmount */\n\tunmount: () => void;\n\t_beforeMount?: () => void;\n\t_afterUnmount?: () => void;\n\t_checkRequirements?: () => boolean;\n};\n\nconst isSwupPlugin = (maybeInvalidPlugin: unknown): maybeInvalidPlugin is Plugin => {\n\t// @ts-ignore: this might be anything, object or no\n\treturn Boolean(maybeInvalidPlugin?.isSwupPlugin);\n};\n\n/** Install a plugin. */\nexport const use = function (this: Swup, plugin: unknown) {\n\tif (!isSwupPlugin(plugin)) {\n\t\tconsole.error('Not a swup plugin instance', plugin);\n\t\treturn;\n\t}\n\n\tplugin.swup = this;\n\tif (plugin._checkRequirements) {\n\t\tif (!plugin._checkRequirements()) {\n\t\t\treturn;\n\t\t}\n\t}\n\tif (plugin._beforeMount) {\n\t\tplugin._beforeMount();\n\t}\n\tplugin.mount();\n\n\tthis.plugins.push(plugin);\n\n\treturn this.plugins;\n};\n\n/** Uninstall a plugin. */\nexport function unuse(this: Swup, pluginOrName: Plugin | string) {\n\tconst plugin = this.findPlugin(pluginOrName);\n\tif (!plugin) {\n\t\tconsole.error('No such plugin', plugin);\n\t\treturn;\n\t}\n\n\tplugin.unmount();\n\tif (plugin._afterUnmount) {\n\t\tplugin._afterUnmount();\n\t}\n\n\tthis.plugins = this.plugins.filter((p) => p !== plugin);\n\n\treturn this.plugins;\n}\n\n/** Find a plugin by name or reference. */\nexport function findPlugin(this: Swup, pluginOrName: Plugin | string) {\n\treturn this.plugins.find(\n\t\t(plugin) =>\n\t\t\tplugin === pluginOrName ||\n\t\t\tplugin.name === pluginOrName ||\n\t\t\tplugin.name === `Swup${String(pluginOrName)}`\n\t);\n}\n","import type Swup from '../Swup.js';\n\n/**\n * Utility function to validate and run the global option 'resolveUrl'\n * @param {string} url\n * @returns {string} the resolved url\n */\nexport function resolveUrl(this: Swup, url: string): string {\n\tif (typeof this.options.resolveUrl !== 'function') {\n\t\tconsole.warn(`[swup] options.resolveUrl expects a callback function.`);\n\t\treturn url;\n\t}\n\tconst result = this.options.resolveUrl(url);\n\tif (!result || typeof result !== 'string') {\n\t\tconsole.warn(`[swup] options.resolveUrl needs to return a url`);\n\t\treturn url;\n\t}\n\tif (result.startsWith('//') || result.startsWith('http')) {\n\t\tconsole.warn(`[swup] options.resolveUrl needs to return a relative url`);\n\t\treturn url;\n\t}\n\treturn result;\n}\n\n/**\n * Compares the resolved version of two paths and returns true if they are the same\n * @param {string} url1\n * @param {string} url2\n * @returns {boolean}\n */\nexport function isSameResolvedUrl(this: Swup, url1: string, url2: string): boolean {\n\treturn this.resolveUrl(url1) === this.resolveUrl(url2);\n}\n","import { type DelegateEvent } from 'delegate-it';\n\nimport version from './config/version.js';\n\nimport { delegateEvent, getCurrentUrl, Location, updateHistoryRecord } from './helpers.js';\nimport { type DelegateEventUnsubscribe } from './helpers/delegateEvent.js';\n\nimport { Cache } from './modules/Cache.js';\nimport { Classes } from './modules/Classes.js';\nimport { type Visit, createVisit } from './modules/Visit.js';\nimport { Hooks } from './modules/Hooks.js';\nimport { getAnchorElement } from './modules/getAnchorElement.js';\nimport { awaitAnimations } from './modules/awaitAnimations.js';\nimport { navigate, performNavigation, type NavigationToSelfAction } from './modules/navigate.js';\nimport { fetchPage } from './modules/fetchPage.js';\nimport { animatePageOut } from './modules/animatePageOut.js';\nimport { replaceContent } from './modules/replaceContent.js';\nimport { scrollToContent } from './modules/scrollToContent.js';\nimport { animatePageIn } from './modules/animatePageIn.js';\nimport { renderPage } from './modules/renderPage.js';\nimport { use, unuse, findPlugin, type Plugin } from './modules/plugins.js';\nimport { isSameResolvedUrl, resolveUrl } from './modules/resolveUrl.js';\nimport { nextTick } from './utils.js';\nimport { type HistoryState } from './helpers/history.js';\n\n/** Options for customizing swup's behavior. */\nexport type Options = {\n\t/** Whether history visits are animated. Default: `false` */\n\tanimateHistoryBrowsing: boolean;\n\t/** Selector for detecting animation timing. Default: `[class*=\"transition-\"]` */\n\tanimationSelector: string | false;\n\t/** Elements on which to add animation classes. Default: `html` element */\n\tanimationScope: 'html' | 'containers';\n\t/** Enable in-memory page cache. Default: `true` */\n\tcache: boolean;\n\t/** Content containers to be replaced on page visits. Default: `['#swup']` */\n\tcontainers: string[];\n\t/** Callback for ignoring visits. Receives the element and event that triggered the visit. */\n\tignoreVisit: (url: string, { el, event }: { el?: Element; event?: Event }) => boolean;\n\t/** Selector for links that trigger visits. Default: `'a[href]'` */\n\tlinkSelector: string;\n\t/** How swup handles links to the same page. Default: `scroll` */\n\tlinkToSelf: NavigationToSelfAction;\n\t/** Enable native animations using the View Transitions API. */\n\tnative: boolean;\n\t/** Plugins to register on startup. */\n\tplugins: Plugin[];\n\t/** Custom headers sent along with fetch requests. */\n\trequestHeaders: Record<string, string>;\n\t/** Rewrite URLs before loading them. */\n\tresolveUrl: (url: string) => string;\n\t/** Callback for telling swup to ignore certain popstate events.  */\n\tskipPopStateHandling: (event: PopStateEvent) => boolean;\n\t/** Request timeout in milliseconds. */\n\ttimeout: number;\n};\n\nconst defaults: Options = {\n\tanimateHistoryBrowsing: false,\n\tanimationSelector: '[class*=\"transition-\"]',\n\tanimationScope: 'html',\n\tcache: true,\n\tcontainers: ['#swup'],\n\tignoreVisit: (url, { el } = {}) => !!el?.closest('[data-no-swup]'),\n\tlinkSelector: 'a[href]',\n\tlinkToSelf: 'scroll',\n\tnative: false,\n\tplugins: [],\n\tresolveUrl: (url) => url,\n\trequestHeaders: {\n\t\t'X-Requested-With': 'swup',\n\t\t'Accept': 'text/html, application/xhtml+xml'\n\t},\n\tskipPopStateHandling: (event) => (event.state as HistoryState)?.source !== 'swup',\n\ttimeout: 0\n};\n\n/** Swup page transition library. */\nexport default class Swup {\n\t/** Library version */\n\treadonly version: string = version;\n\t/** Options passed into the instance */\n\toptions: Options;\n\t/** Default options before merging user options */\n\treadonly defaults: Options = defaults;\n\t/** Registered plugin instances */\n\tplugins: Plugin[] = [];\n\t/** Data about the current visit */\n\tvisit: Visit;\n\t/** Cache instance */\n\treadonly cache: Cache;\n\t/** Hook registry */\n\treadonly hooks: Hooks;\n\t/** Animation class manager */\n\treadonly classes: Classes;\n\t/** URL of the currently visible page */\n\tcurrentPageUrl: string = getCurrentUrl();\n\t/** Index of the current history entry */\n\tprotected currentHistoryIndex: number;\n\t/** Delegated event subscription handle */\n\tprotected clickDelegate?: DelegateEventUnsubscribe;\n\t/** Navigation status */\n\tprotected navigating: boolean = false;\n\t/** Run anytime a visit ends */\n\tprotected onVisitEnd?: () => Promise<unknown>;\n\n\t/** Install a plugin */\n\tuse = use;\n\t/** Uninstall a plugin */\n\tunuse = unuse;\n\t/** Find a plugin by name or instance */\n\tfindPlugin = findPlugin;\n\n\t/** Log a message. Has no effect unless debug plugin is installed */\n\tlog: (message: string, context?: unknown) => void = () => {};\n\n\t/** Navigate to a new URL */\n\tnavigate = navigate;\n\t/** Actually perform a navigation */\n\tprotected performNavigation = performNavigation;\n\t/** Create a new context for this visit */\n\tprotected createVisit = createVisit;\n\t/** Register a delegated event listener */\n\tdelegateEvent = delegateEvent;\n\t/** Fetch a page from the server */\n\tfetchPage = fetchPage;\n\t/** Resolve when animations on the page finish */\n\tawaitAnimations = awaitAnimations;\n\tprotected renderPage = renderPage;\n\t/** Replace the content after page load */\n\treplaceContent = replaceContent;\n\tprotected animatePageIn = animatePageIn;\n\tprotected animatePageOut = animatePageOut;\n\tprotected scrollToContent = scrollToContent;\n\t/** Find the anchor element for a given hash */\n\tgetAnchorElement = getAnchorElement;\n\n\t/** Get the current page URL */\n\tgetCurrentUrl = getCurrentUrl;\n\t/** Resolve a URL to its final location */\n\tresolveUrl = resolveUrl;\n\t/** Check if two URLs resolve to the same location */\n\tprotected isSameResolvedUrl = isSameResolvedUrl;\n\n\tconstructor(options: Partial<Options> = {}) {\n\t\t// Merge defaults and options\n\t\tthis.options = { ...this.defaults, ...options };\n\n\t\tthis.handleLinkClick = this.handleLinkClick.bind(this);\n\t\tthis.handlePopState = this.handlePopState.bind(this);\n\n\t\tthis.cache = new Cache(this);\n\t\tthis.classes = new Classes(this);\n\t\tthis.hooks = new Hooks(this);\n\t\tthis.visit = this.createVisit({ to: '' });\n\n\t\tthis.currentHistoryIndex = (window.history.state as HistoryState)?.index ?? 1;\n\n\t\tthis.enable();\n\t}\n\n\t/** Enable this instance, adding listeners and classnames. */\n\tasync enable() {\n\t\t// Add event listener\n\t\tconst { linkSelector } = this.options;\n\t\tthis.clickDelegate = this.delegateEvent(linkSelector, 'click', this.handleLinkClick);\n\n\t\twindow.addEventListener('popstate', this.handlePopState);\n\n\t\t// Set scroll restoration to manual if animating history visits\n\t\tif (this.options.animateHistoryBrowsing) {\n\t\t\twindow.history.scrollRestoration = 'manual';\n\t\t}\n\n\t\t// Initial save to cache\n\t\tif (this.options.cache) {\n\t\t\t// Disabled to avoid caching modified dom state: logic moved to preload plugin\n\t\t\t// https://github.com/swup/swup/issues/475\n\t\t}\n\n\t\t// Sanitize/check native option\n\t\tthis.options.native = this.options.native && !!document.startViewTransition;\n\n\t\t// Mount plugins\n\t\tthis.options.plugins.forEach((plugin) => this.use(plugin));\n\n\t\t// Create initial history record\n\t\tif ((window.history.state as HistoryState)?.source !== 'swup') {\n\t\t\tupdateHistoryRecord(null, { index: this.currentHistoryIndex });\n\t\t}\n\n\t\t// Give consumers a chance to hook into enable\n\t\tawait nextTick();\n\n\t\t// Trigger enable hook\n\t\tawait this.hooks.call('enable', undefined, undefined, () => {\n\t\t\tconst html = document.documentElement;\n\t\t\thtml.classList.add('swup-enabled');\n\t\t\thtml.classList.toggle('swup-native', this.options.native);\n\t\t});\n\t}\n\n\t/** Disable this instance, removing listeners and classnames. */\n\tasync destroy() {\n\t\t// remove delegated listener\n\t\tthis.clickDelegate!.destroy();\n\n\t\t// remove popstate listener\n\t\twindow.removeEventListener('popstate', this.handlePopState);\n\n\t\t// empty cache\n\t\tthis.cache.clear();\n\n\t\t// unmount plugins\n\t\tthis.options.plugins.forEach((plugin) => this.unuse(plugin));\n\n\t\t// trigger disable hook\n\t\tawait this.hooks.call('disable', undefined, undefined, () => {\n\t\t\tconst html = document.documentElement;\n\t\t\thtml.classList.remove('swup-enabled');\n\t\t\thtml.classList.remove('swup-native');\n\t\t});\n\n\t\t// remove handlers\n\t\tthis.hooks.clear();\n\t}\n\n\t/** Determine if a visit should be ignored by swup, based on URL or trigger element. */\n\tshouldIgnoreVisit(href: string, { el, event }: { el?: Element; event?: Event } = {}) {\n\t\tconst { origin, url, hash } = Location.fromUrl(href);\n\n\t\t// Ignore if the new origin doesn't match the current one\n\t\tif (origin !== window.location.origin) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Ignore if the link/form would open a new window (or none at all)\n\t\tif (el && this.triggerWillOpenNewWindow(el)) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Ignore if the visit should be ignored as per user options\n\t\tif (this.options.ignoreVisit(url + hash, { el, event })) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Finally, allow the visit\n\t\treturn false;\n\t}\n\n\tprotected handleLinkClick(event: DelegateEvent<MouseEvent>) {\n\t\tconst el = event.delegateTarget as HTMLAnchorElement;\n\t\tconst { href, url, hash } = Location.fromElement(el);\n\n\t\t// Exit early if the link should be ignored\n\t\tif (this.shouldIgnoreVisit(href, { el, event })) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Ignore if swup is currently navigating towards the link's URL\n\t\tif (this.navigating && url === this.visit.to.url) {\n\t\t\tevent.preventDefault();\n\t\t\treturn;\n\t\t}\n\n\t\tconst visit = this.createVisit({ to: url, hash, el, event });\n\n\t\t// Exit early if control key pressed\n\t\tif (event.metaKey || event.ctrlKey || event.shiftKey || event.altKey) {\n\t\t\tthis.hooks.callSync('link:newtab', visit, { href });\n\t\t\treturn;\n\t\t}\n\n\t\t// Exit early if other than left mouse button\n\t\tif (event.button !== 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.hooks.callSync('link:click', visit, { el, event }, () => {\n\t\t\tconst from = visit.from.url ?? '';\n\n\t\t\tevent.preventDefault();\n\n\t\t\t// Handle links to the same page\n\t\t\tif (!url || url === from) {\n\t\t\t\tif (hash) {\n\t\t\t\t\t// With hash: scroll to anchor\n\t\t\t\t\tthis.hooks.callSync('link:anchor', visit, { hash }, () => {\n\t\t\t\t\t\tupdateHistoryRecord(url + hash);\n\t\t\t\t\t\tthis.scrollToContent(visit);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\t// Without hash: scroll to top or load/reload page\n\t\t\t\t\tthis.hooks.callSync('link:self', visit, undefined, () => {\n\t\t\t\t\t\tif (this.options.linkToSelf === 'navigate') {\n\t\t\t\t\t\t\tthis.performNavigation(visit);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tupdateHistoryRecord(url);\n\t\t\t\t\t\t\tthis.scrollToContent(visit);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Exit early if the resolved path hasn't changed\n\t\t\tif (this.isSameResolvedUrl(url, from)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Finally, proceed with loading the page\n\t\t\tthis.performNavigation(visit);\n\t\t});\n\t}\n\n\tprotected handlePopState(event: PopStateEvent) {\n\t\tconst href: string = (event.state as HistoryState)?.url ?? window.location.href;\n\n\t\t// Exit early if this event should be ignored\n\t\tif (this.options.skipPopStateHandling(event)) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Exit early if the resolved path hasn't changed\n\t\tif (this.isSameResolvedUrl(getCurrentUrl(), this.currentPageUrl)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { url, hash } = Location.fromUrl(href);\n\n\t\tconst visit = this.createVisit({ to: url, hash, event });\n\n\t\t// Mark as history visit\n\t\tvisit.history.popstate = true;\n\n\t\t// Determine direction of history visit\n\t\tconst index = (event.state as HistoryState)?.index ?? 0;\n\t\tif (index && index !== this.currentHistoryIndex) {\n\t\t\tconst direction = index - this.currentHistoryIndex > 0 ? 'forwards' : 'backwards';\n\t\t\tvisit.history.direction = direction;\n\t\t\tthis.currentHistoryIndex = index;\n\t\t}\n\n\t\t// Disable animation & scrolling for history visits\n\t\tvisit.animation.animate = false;\n\t\tvisit.scroll.reset = false;\n\t\tvisit.scroll.target = false;\n\n\t\t// Animated history visit: re-enable animation & scroll reset\n\t\tif (this.options.animateHistoryBrowsing) {\n\t\t\tvisit.animation.animate = true;\n\t\t\tvisit.scroll.reset = true;\n\t\t}\n\n\t\tthis.hooks.callSync('history:popstate', visit, { event }, () => {\n\t\t\tthis.performNavigation(visit);\n\t\t});\n\t}\n\n\t/** Determine whether an element will open a new tab when clicking/activating. */\n\tprotected triggerWillOpenNewWindow(triggerEl: Element) {\n\t\tif (triggerEl.matches('[download], [target=\"_blank\"]')) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n}\n","export * from './delegate.js';\nexport { default } from './delegate.js';\nexport { default as oneEvent } from './one-event.js';\n","/** Keeps track of raw listeners added to the base elements to avoid duplication */\nconst ledger = new WeakMap();\nfunction editLedger(wanted, baseElement, callback, setup) {\n    if (!wanted && !ledger.has(baseElement)) {\n        return false;\n    }\n    const elementMap = ledger.get(baseElement)\n        ?? new WeakMap();\n    ledger.set(baseElement, elementMap);\n    const setups = elementMap.get(callback) ?? new Set();\n    elementMap.set(callback, setups);\n    const existed = setups.has(setup);\n    if (wanted) {\n        setups.add(setup);\n    }\n    else {\n        setups.delete(setup);\n    }\n    return existed && wanted;\n}\nfunction safeClosest(event, selector) {\n    let target = event.target;\n    if (target instanceof Text) {\n        target = target.parentElement;\n    }\n    if (target instanceof Element && event.currentTarget instanceof Element) {\n        // `.closest()` may match ancestors of `currentTarget` but we only need its children\n        const closest = target.closest(selector);\n        if (closest && event.currentTarget.contains(closest)) {\n            return closest;\n        }\n    }\n}\n// This type isn't exported as a declaration, so it needs to be duplicated above\nfunction delegate(selector, type, callback, options = {}) {\n    const { signal, base = document } = options;\n    if (signal?.aborted) {\n        return;\n    }\n    // Don't pass `once` to `addEventListener` because it needs to be handled in `delegate-it`\n    const { once, ...nativeListenerOptions } = options;\n    // `document` should never be the base, it's just an easy way to define \"global event listeners\"\n    const baseElement = base instanceof Document ? base.documentElement : base;\n    // Handle the regular Element usage\n    const capture = Boolean(typeof options === 'object' ? options.capture : options);\n    const listenerFunction = (event) => {\n        const delegateTarget = safeClosest(event, selector);\n        if (delegateTarget) {\n            const delegateEvent = Object.assign(event, { delegateTarget });\n            callback.call(baseElement, delegateEvent);\n            if (once) {\n                baseElement.removeEventListener(type, listenerFunction, nativeListenerOptions);\n                editLedger(false, baseElement, callback, setup);\n            }\n        }\n    };\n    const setup = JSON.stringify({ selector, type, capture });\n    const isAlreadyListening = editLedger(true, baseElement, callback, setup);\n    if (!isAlreadyListening) {\n        baseElement.addEventListener(type, listenerFunction, nativeListenerOptions);\n    }\n    signal?.addEventListener('abort', () => {\n        editLedger(false, baseElement, callback, setup);\n    });\n}\nexport default delegate;\n","import delegate from './delegate.js';\n// This type isn't exported as a declaration, so it needs to be duplicated above\nasync function oneEvent(selector, type, options = {}) {\n    return new Promise(resolve => {\n        options.once = true;\n        if (options.signal?.aborted) {\n            resolve(undefined);\n        }\n        options.signal?.addEventListener('abort', () => {\n            resolve(undefined);\n        });\n        delegate(selector, type, resolve, options);\n    });\n}\nexport default oneEvent;\n","/**\n * Tokenize input string.\n */\nfunction lexer(str) {\n    var tokens = [];\n    var i = 0;\n    while (i < str.length) {\n        var char = str[i];\n        if (char === \"*\" || char === \"+\" || char === \"?\") {\n            tokens.push({ type: \"MODIFIER\", index: i, value: str[i++] });\n            continue;\n        }\n        if (char === \"\\\\\") {\n            tokens.push({ type: \"ESCAPED_CHAR\", index: i++, value: str[i++] });\n            continue;\n        }\n        if (char === \"{\") {\n            tokens.push({ type: \"OPEN\", index: i, value: str[i++] });\n            continue;\n        }\n        if (char === \"}\") {\n            tokens.push({ type: \"CLOSE\", index: i, value: str[i++] });\n            continue;\n        }\n        if (char === \":\") {\n            var name = \"\";\n            var j = i + 1;\n            while (j < str.length) {\n                var code = str.charCodeAt(j);\n                if (\n                // `0-9`\n                (code >= 48 && code <= 57) ||\n                    // `A-Z`\n                    (code >= 65 && code <= 90) ||\n                    // `a-z`\n                    (code >= 97 && code <= 122) ||\n                    // `_`\n                    code === 95) {\n                    name += str[j++];\n                    continue;\n                }\n                break;\n            }\n            if (!name)\n                throw new TypeError(\"Missing parameter name at \".concat(i));\n            tokens.push({ type: \"NAME\", index: i, value: name });\n            i = j;\n            continue;\n        }\n        if (char === \"(\") {\n            var count = 1;\n            var pattern = \"\";\n            var j = i + 1;\n            if (str[j] === \"?\") {\n                throw new TypeError(\"Pattern cannot start with \\\"?\\\" at \".concat(j));\n            }\n            while (j < str.length) {\n                if (str[j] === \"\\\\\") {\n                    pattern += str[j++] + str[j++];\n                    continue;\n                }\n                if (str[j] === \")\") {\n                    count--;\n                    if (count === 0) {\n                        j++;\n                        break;\n                    }\n                }\n                else if (str[j] === \"(\") {\n                    count++;\n                    if (str[j + 1] !== \"?\") {\n                        throw new TypeError(\"Capturing groups are not allowed at \".concat(j));\n                    }\n                }\n                pattern += str[j++];\n            }\n            if (count)\n                throw new TypeError(\"Unbalanced pattern at \".concat(i));\n            if (!pattern)\n                throw new TypeError(\"Missing pattern at \".concat(i));\n            tokens.push({ type: \"PATTERN\", index: i, value: pattern });\n            i = j;\n            continue;\n        }\n        tokens.push({ type: \"CHAR\", index: i, value: str[i++] });\n    }\n    tokens.push({ type: \"END\", index: i, value: \"\" });\n    return tokens;\n}\n/**\n * Parse a string for the raw tokens.\n */\nexport function parse(str, options) {\n    if (options === void 0) { options = {}; }\n    var tokens = lexer(str);\n    var _a = options.prefixes, prefixes = _a === void 0 ? \"./\" : _a;\n    var defaultPattern = \"[^\".concat(escapeString(options.delimiter || \"/#?\"), \"]+?\");\n    var result = [];\n    var key = 0;\n    var i = 0;\n    var path = \"\";\n    var tryConsume = function (type) {\n        if (i < tokens.length && tokens[i].type === type)\n            return tokens[i++].value;\n    };\n    var mustConsume = function (type) {\n        var value = tryConsume(type);\n        if (value !== undefined)\n            return value;\n        var _a = tokens[i], nextType = _a.type, index = _a.index;\n        throw new TypeError(\"Unexpected \".concat(nextType, \" at \").concat(index, \", expected \").concat(type));\n    };\n    var consumeText = function () {\n        var result = \"\";\n        var value;\n        while ((value = tryConsume(\"CHAR\") || tryConsume(\"ESCAPED_CHAR\"))) {\n            result += value;\n        }\n        return result;\n    };\n    while (i < tokens.length) {\n        var char = tryConsume(\"CHAR\");\n        var name = tryConsume(\"NAME\");\n        var pattern = tryConsume(\"PATTERN\");\n        if (name || pattern) {\n            var prefix = char || \"\";\n            if (prefixes.indexOf(prefix) === -1) {\n                path += prefix;\n                prefix = \"\";\n            }\n            if (path) {\n                result.push(path);\n                path = \"\";\n            }\n            result.push({\n                name: name || key++,\n                prefix: prefix,\n                suffix: \"\",\n                pattern: pattern || defaultPattern,\n                modifier: tryConsume(\"MODIFIER\") || \"\",\n            });\n            continue;\n        }\n        var value = char || tryConsume(\"ESCAPED_CHAR\");\n        if (value) {\n            path += value;\n            continue;\n        }\n        if (path) {\n            result.push(path);\n            path = \"\";\n        }\n        var open = tryConsume(\"OPEN\");\n        if (open) {\n            var prefix = consumeText();\n            var name_1 = tryConsume(\"NAME\") || \"\";\n            var pattern_1 = tryConsume(\"PATTERN\") || \"\";\n            var suffix = consumeText();\n            mustConsume(\"CLOSE\");\n            result.push({\n                name: name_1 || (pattern_1 ? key++ : \"\"),\n                pattern: name_1 && !pattern_1 ? defaultPattern : pattern_1,\n                prefix: prefix,\n                suffix: suffix,\n                modifier: tryConsume(\"MODIFIER\") || \"\",\n            });\n            continue;\n        }\n        mustConsume(\"END\");\n    }\n    return result;\n}\n/**\n * Compile a string to a template function for the path.\n */\nexport function compile(str, options) {\n    return tokensToFunction(parse(str, options), options);\n}\n/**\n * Expose a method for transforming tokens into the path function.\n */\nexport function tokensToFunction(tokens, options) {\n    if (options === void 0) { options = {}; }\n    var reFlags = flags(options);\n    var _a = options.encode, encode = _a === void 0 ? function (x) { return x; } : _a, _b = options.validate, validate = _b === void 0 ? true : _b;\n    // Compile all the tokens into regexps.\n    var matches = tokens.map(function (token) {\n        if (typeof token === \"object\") {\n            return new RegExp(\"^(?:\".concat(token.pattern, \")$\"), reFlags);\n        }\n    });\n    return function (data) {\n        var path = \"\";\n        for (var i = 0; i < tokens.length; i++) {\n            var token = tokens[i];\n            if (typeof token === \"string\") {\n                path += token;\n                continue;\n            }\n            var value = data ? data[token.name] : undefined;\n            var optional = token.modifier === \"?\" || token.modifier === \"*\";\n            var repeat = token.modifier === \"*\" || token.modifier === \"+\";\n            if (Array.isArray(value)) {\n                if (!repeat) {\n                    throw new TypeError(\"Expected \\\"\".concat(token.name, \"\\\" to not repeat, but got an array\"));\n                }\n                if (value.length === 0) {\n                    if (optional)\n                        continue;\n                    throw new TypeError(\"Expected \\\"\".concat(token.name, \"\\\" to not be empty\"));\n                }\n                for (var j = 0; j < value.length; j++) {\n                    var segment = encode(value[j], token);\n                    if (validate && !matches[i].test(segment)) {\n                        throw new TypeError(\"Expected all \\\"\".concat(token.name, \"\\\" to match \\\"\").concat(token.pattern, \"\\\", but got \\\"\").concat(segment, \"\\\"\"));\n                    }\n                    path += token.prefix + segment + token.suffix;\n                }\n                continue;\n            }\n            if (typeof value === \"string\" || typeof value === \"number\") {\n                var segment = encode(String(value), token);\n                if (validate && !matches[i].test(segment)) {\n                    throw new TypeError(\"Expected \\\"\".concat(token.name, \"\\\" to match \\\"\").concat(token.pattern, \"\\\", but got \\\"\").concat(segment, \"\\\"\"));\n                }\n                path += token.prefix + segment + token.suffix;\n                continue;\n            }\n            if (optional)\n                continue;\n            var typeOfMessage = repeat ? \"an array\" : \"a string\";\n            throw new TypeError(\"Expected \\\"\".concat(token.name, \"\\\" to be \").concat(typeOfMessage));\n        }\n        return path;\n    };\n}\n/**\n * Create path match function from `path-to-regexp` spec.\n */\nexport function match(str, options) {\n    var keys = [];\n    var re = pathToRegexp(str, keys, options);\n    return regexpToFunction(re, keys, options);\n}\n/**\n * Create a path match function from `path-to-regexp` output.\n */\nexport function regexpToFunction(re, keys, options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.decode, decode = _a === void 0 ? function (x) { return x; } : _a;\n    return function (pathname) {\n        var m = re.exec(pathname);\n        if (!m)\n            return false;\n        var path = m[0], index = m.index;\n        var params = Object.create(null);\n        var _loop_1 = function (i) {\n            if (m[i] === undefined)\n                return \"continue\";\n            var key = keys[i - 1];\n            if (key.modifier === \"*\" || key.modifier === \"+\") {\n                params[key.name] = m[i].split(key.prefix + key.suffix).map(function (value) {\n                    return decode(value, key);\n                });\n            }\n            else {\n                params[key.name] = decode(m[i], key);\n            }\n        };\n        for (var i = 1; i < m.length; i++) {\n            _loop_1(i);\n        }\n        return { path: path, index: index, params: params };\n    };\n}\n/**\n * Escape a regular expression string.\n */\nfunction escapeString(str) {\n    return str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n}\n/**\n * Get the flags for a regexp from the options.\n */\nfunction flags(options) {\n    return options && options.sensitive ? \"\" : \"i\";\n}\n/**\n * Pull out keys from a regexp.\n */\nfunction regexpToRegexp(path, keys) {\n    if (!keys)\n        return path;\n    var groupsRegex = /\\((?:\\?<(.*?)>)?(?!\\?)/g;\n    var index = 0;\n    var execResult = groupsRegex.exec(path.source);\n    while (execResult) {\n        keys.push({\n            // Use parenthesized substring match if available, index otherwise\n            name: execResult[1] || index++,\n            prefix: \"\",\n            suffix: \"\",\n            modifier: \"\",\n            pattern: \"\",\n        });\n        execResult = groupsRegex.exec(path.source);\n    }\n    return path;\n}\n/**\n * Transform an array into a regexp.\n */\nfunction arrayToRegexp(paths, keys, options) {\n    var parts = paths.map(function (path) { return pathToRegexp(path, keys, options).source; });\n    return new RegExp(\"(?:\".concat(parts.join(\"|\"), \")\"), flags(options));\n}\n/**\n * Create a path regexp from string input.\n */\nfunction stringToRegexp(path, keys, options) {\n    return tokensToRegexp(parse(path, options), keys, options);\n}\n/**\n * Expose a function for taking tokens and returning a RegExp.\n */\nexport function tokensToRegexp(tokens, keys, options) {\n    if (options === void 0) { options = {}; }\n    var _a = options.strict, strict = _a === void 0 ? false : _a, _b = options.start, start = _b === void 0 ? true : _b, _c = options.end, end = _c === void 0 ? true : _c, _d = options.encode, encode = _d === void 0 ? function (x) { return x; } : _d, _e = options.delimiter, delimiter = _e === void 0 ? \"/#?\" : _e, _f = options.endsWith, endsWith = _f === void 0 ? \"\" : _f;\n    var endsWithRe = \"[\".concat(escapeString(endsWith), \"]|$\");\n    var delimiterRe = \"[\".concat(escapeString(delimiter), \"]\");\n    var route = start ? \"^\" : \"\";\n    // Iterate over the tokens and create our regexp string.\n    for (var _i = 0, tokens_1 = tokens; _i < tokens_1.length; _i++) {\n        var token = tokens_1[_i];\n        if (typeof token === \"string\") {\n            route += escapeString(encode(token));\n        }\n        else {\n            var prefix = escapeString(encode(token.prefix));\n            var suffix = escapeString(encode(token.suffix));\n            if (token.pattern) {\n                if (keys)\n                    keys.push(token);\n                if (prefix || suffix) {\n                    if (token.modifier === \"+\" || token.modifier === \"*\") {\n                        var mod = token.modifier === \"*\" ? \"?\" : \"\";\n                        route += \"(?:\".concat(prefix, \"((?:\").concat(token.pattern, \")(?:\").concat(suffix).concat(prefix, \"(?:\").concat(token.pattern, \"))*)\").concat(suffix, \")\").concat(mod);\n                    }\n                    else {\n                        route += \"(?:\".concat(prefix, \"(\").concat(token.pattern, \")\").concat(suffix, \")\").concat(token.modifier);\n                    }\n                }\n                else {\n                    if (token.modifier === \"+\" || token.modifier === \"*\") {\n                        route += \"((?:\".concat(token.pattern, \")\").concat(token.modifier, \")\");\n                    }\n                    else {\n                        route += \"(\".concat(token.pattern, \")\").concat(token.modifier);\n                    }\n                }\n            }\n            else {\n                route += \"(?:\".concat(prefix).concat(suffix, \")\").concat(token.modifier);\n            }\n        }\n    }\n    if (end) {\n        if (!strict)\n            route += \"\".concat(delimiterRe, \"?\");\n        route += !options.endsWith ? \"$\" : \"(?=\".concat(endsWithRe, \")\");\n    }\n    else {\n        var endToken = tokens[tokens.length - 1];\n        var isEndDelimited = typeof endToken === \"string\"\n            ? delimiterRe.indexOf(endToken[endToken.length - 1]) > -1\n            : endToken === undefined;\n        if (!strict) {\n            route += \"(?:\".concat(delimiterRe, \"(?=\").concat(endsWithRe, \"))?\");\n        }\n        if (!isEndDelimited) {\n            route += \"(?=\".concat(delimiterRe, \"|\").concat(endsWithRe, \")\");\n        }\n    }\n    return new RegExp(route, flags(options));\n}\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n */\nexport function pathToRegexp(path, keys, options) {\n    if (path instanceof RegExp)\n        return regexpToRegexp(path, keys);\n    if (Array.isArray(path))\n        return arrayToRegexp(path, keys, options);\n    return stringToRegexp(path, keys, options);\n}\n//# sourceMappingURL=index.js.map","/**\n * Tokenizer results.\n */\ninterface LexToken {\n  type:\n    | \"OPEN\"\n    | \"CLOSE\"\n    | \"PATTERN\"\n    | \"NAME\"\n    | \"CHAR\"\n    | \"ESCAPED_CHAR\"\n    | \"MODIFIER\"\n    | \"END\";\n  index: number;\n  value: string;\n}\n\n/**\n * Tokenize input string.\n */\nfunction lexer(str: string): LexToken[] {\n  const tokens: LexToken[] = [];\n  let i = 0;\n\n  while (i < str.length) {\n    const char = str[i];\n\n    if (char === \"*\" || char === \"+\" || char === \"?\") {\n      tokens.push({ type: \"MODIFIER\", index: i, value: str[i++] });\n      continue;\n    }\n\n    if (char === \"\\\\\") {\n      tokens.push({ type: \"ESCAPED_CHAR\", index: i++, value: str[i++] });\n      continue;\n    }\n\n    if (char === \"{\") {\n      tokens.push({ type: \"OPEN\", index: i, value: str[i++] });\n      continue;\n    }\n\n    if (char === \"}\") {\n      tokens.push({ type: \"CLOSE\", index: i, value: str[i++] });\n      continue;\n    }\n\n    if (char === \":\") {\n      let name = \"\";\n      let j = i + 1;\n\n      while (j < str.length) {\n        const code = str.charCodeAt(j);\n\n        if (\n          // `0-9`\n          (code >= 48 && code <= 57) ||\n          // `A-Z`\n          (code >= 65 && code <= 90) ||\n          // `a-z`\n          (code >= 97 && code <= 122) ||\n          // `_`\n          code === 95\n        ) {\n          name += str[j++];\n          continue;\n        }\n\n        break;\n      }\n\n      if (!name) throw new TypeError(`Missing parameter name at ${i}`);\n\n      tokens.push({ type: \"NAME\", index: i, value: name });\n      i = j;\n      continue;\n    }\n\n    if (char === \"(\") {\n      let count = 1;\n      let pattern = \"\";\n      let j = i + 1;\n\n      if (str[j] === \"?\") {\n        throw new TypeError(`Pattern cannot start with \"?\" at ${j}`);\n      }\n\n      while (j < str.length) {\n        if (str[j] === \"\\\\\") {\n          pattern += str[j++] + str[j++];\n          continue;\n        }\n\n        if (str[j] === \")\") {\n          count--;\n          if (count === 0) {\n            j++;\n            break;\n          }\n        } else if (str[j] === \"(\") {\n          count++;\n          if (str[j + 1] !== \"?\") {\n            throw new TypeError(`Capturing groups are not allowed at ${j}`);\n          }\n        }\n\n        pattern += str[j++];\n      }\n\n      if (count) throw new TypeError(`Unbalanced pattern at ${i}`);\n      if (!pattern) throw new TypeError(`Missing pattern at ${i}`);\n\n      tokens.push({ type: \"PATTERN\", index: i, value: pattern });\n      i = j;\n      continue;\n    }\n\n    tokens.push({ type: \"CHAR\", index: i, value: str[i++] });\n  }\n\n  tokens.push({ type: \"END\", index: i, value: \"\" });\n\n  return tokens;\n}\n\nexport interface ParseOptions {\n  /**\n   * Set the default delimiter for repeat parameters. (default: `'/'`)\n   */\n  delimiter?: string;\n  /**\n   * List of characters to automatically consider prefixes when parsing.\n   */\n  prefixes?: string;\n}\n\n/**\n * Parse a string for the raw tokens.\n */\nexport function parse(str: string, options: ParseOptions = {}): Token[] {\n  const tokens = lexer(str);\n  const { prefixes = \"./\" } = options;\n  const defaultPattern = `[^${escapeString(options.delimiter || \"/#?\")}]+?`;\n  const result: Token[] = [];\n  let key = 0;\n  let i = 0;\n  let path = \"\";\n\n  const tryConsume = (type: LexToken[\"type\"]): string | undefined => {\n    if (i < tokens.length && tokens[i].type === type) return tokens[i++].value;\n  };\n\n  const mustConsume = (type: LexToken[\"type\"]): string => {\n    const value = tryConsume(type);\n    if (value !== undefined) return value;\n    const { type: nextType, index } = tokens[i];\n    throw new TypeError(`Unexpected ${nextType} at ${index}, expected ${type}`);\n  };\n\n  const consumeText = (): string => {\n    let result = \"\";\n    let value: string | undefined;\n    while ((value = tryConsume(\"CHAR\") || tryConsume(\"ESCAPED_CHAR\"))) {\n      result += value;\n    }\n    return result;\n  };\n\n  while (i < tokens.length) {\n    const char = tryConsume(\"CHAR\");\n    const name = tryConsume(\"NAME\");\n    const pattern = tryConsume(\"PATTERN\");\n\n    if (name || pattern) {\n      let prefix = char || \"\";\n\n      if (prefixes.indexOf(prefix) === -1) {\n        path += prefix;\n        prefix = \"\";\n      }\n\n      if (path) {\n        result.push(path);\n        path = \"\";\n      }\n\n      result.push({\n        name: name || key++,\n        prefix,\n        suffix: \"\",\n        pattern: pattern || defaultPattern,\n        modifier: tryConsume(\"MODIFIER\") || \"\",\n      });\n      continue;\n    }\n\n    const value = char || tryConsume(\"ESCAPED_CHAR\");\n    if (value) {\n      path += value;\n      continue;\n    }\n\n    if (path) {\n      result.push(path);\n      path = \"\";\n    }\n\n    const open = tryConsume(\"OPEN\");\n    if (open) {\n      const prefix = consumeText();\n      const name = tryConsume(\"NAME\") || \"\";\n      const pattern = tryConsume(\"PATTERN\") || \"\";\n      const suffix = consumeText();\n\n      mustConsume(\"CLOSE\");\n\n      result.push({\n        name: name || (pattern ? key++ : \"\"),\n        pattern: name && !pattern ? defaultPattern : pattern,\n        prefix,\n        suffix,\n        modifier: tryConsume(\"MODIFIER\") || \"\",\n      });\n      continue;\n    }\n\n    mustConsume(\"END\");\n  }\n\n  return result;\n}\n\nexport interface TokensToFunctionOptions {\n  /**\n   * When `true` the regexp will be case sensitive. (default: `false`)\n   */\n  sensitive?: boolean;\n  /**\n   * Function for encoding input strings for output.\n   */\n  encode?: (value: string, token: Key) => string;\n  /**\n   * When `false` the function can produce an invalid (unmatched) path. (default: `true`)\n   */\n  validate?: boolean;\n}\n\n/**\n * Compile a string to a template function for the path.\n */\nexport function compile<P extends object = object>(\n  str: string,\n  options?: ParseOptions & TokensToFunctionOptions\n) {\n  return tokensToFunction<P>(parse(str, options), options);\n}\n\nexport type PathFunction<P extends object = object> = (data?: P) => string;\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nexport function tokensToFunction<P extends object = object>(\n  tokens: Token[],\n  options: TokensToFunctionOptions = {}\n): PathFunction<P> {\n  const reFlags = flags(options);\n  const { encode = (x: string) => x, validate = true } = options;\n\n  // Compile all the tokens into regexps.\n  const matches = tokens.map((token) => {\n    if (typeof token === \"object\") {\n      return new RegExp(`^(?:${token.pattern})$`, reFlags);\n    }\n  });\n\n  return (data: Record<string, any> | null | undefined) => {\n    let path = \"\";\n\n    for (let i = 0; i < tokens.length; i++) {\n      const token = tokens[i];\n\n      if (typeof token === \"string\") {\n        path += token;\n        continue;\n      }\n\n      const value = data ? data[token.name] : undefined;\n      const optional = token.modifier === \"?\" || token.modifier === \"*\";\n      const repeat = token.modifier === \"*\" || token.modifier === \"+\";\n\n      if (Array.isArray(value)) {\n        if (!repeat) {\n          throw new TypeError(\n            `Expected \"${token.name}\" to not repeat, but got an array`\n          );\n        }\n\n        if (value.length === 0) {\n          if (optional) continue;\n\n          throw new TypeError(`Expected \"${token.name}\" to not be empty`);\n        }\n\n        for (let j = 0; j < value.length; j++) {\n          const segment = encode(value[j], token);\n\n          if (validate && !(matches[i] as RegExp).test(segment)) {\n            throw new TypeError(\n              `Expected all \"${token.name}\" to match \"${token.pattern}\", but got \"${segment}\"`\n            );\n          }\n\n          path += token.prefix + segment + token.suffix;\n        }\n\n        continue;\n      }\n\n      if (typeof value === \"string\" || typeof value === \"number\") {\n        const segment = encode(String(value), token);\n\n        if (validate && !(matches[i] as RegExp).test(segment)) {\n          throw new TypeError(\n            `Expected \"${token.name}\" to match \"${token.pattern}\", but got \"${segment}\"`\n          );\n        }\n\n        path += token.prefix + segment + token.suffix;\n        continue;\n      }\n\n      if (optional) continue;\n\n      const typeOfMessage = repeat ? \"an array\" : \"a string\";\n      throw new TypeError(`Expected \"${token.name}\" to be ${typeOfMessage}`);\n    }\n\n    return path;\n  };\n}\n\nexport interface RegexpToFunctionOptions {\n  /**\n   * Function for decoding strings for params.\n   */\n  decode?: (value: string, token: Key) => string;\n}\n\n/**\n * A match result contains data about the path match.\n */\nexport interface MatchResult<P extends object = object> {\n  path: string;\n  index: number;\n  params: P;\n}\n\n/**\n * A match is either `false` (no match) or a match result.\n */\nexport type Match<P extends object = object> = false | MatchResult<P>;\n\n/**\n * The match function takes a string and returns whether it matched the path.\n */\nexport type MatchFunction<P extends object = object> = (\n  path: string\n) => Match<P>;\n\n/**\n * Create path match function from `path-to-regexp` spec.\n */\nexport function match<P extends object = object>(\n  str: Path,\n  options?: ParseOptions & TokensToRegexpOptions & RegexpToFunctionOptions\n) {\n  const keys: Key[] = [];\n  const re = pathToRegexp(str, keys, options);\n  return regexpToFunction<P>(re, keys, options);\n}\n\n/**\n * Create a path match function from `path-to-regexp` output.\n */\nexport function regexpToFunction<P extends object = object>(\n  re: RegExp,\n  keys: Key[],\n  options: RegexpToFunctionOptions = {}\n): MatchFunction<P> {\n  const { decode = (x: string) => x } = options;\n\n  return function (pathname: string) {\n    const m = re.exec(pathname);\n    if (!m) return false;\n\n    const { 0: path, index } = m;\n    const params = Object.create(null);\n\n    for (let i = 1; i < m.length; i++) {\n      if (m[i] === undefined) continue;\n\n      const key = keys[i - 1];\n\n      if (key.modifier === \"*\" || key.modifier === \"+\") {\n        params[key.name] = m[i].split(key.prefix + key.suffix).map((value) => {\n          return decode(value, key);\n        });\n      } else {\n        params[key.name] = decode(m[i], key);\n      }\n    }\n\n    return { path, index, params };\n  };\n}\n\n/**\n * Escape a regular expression string.\n */\nfunction escapeString(str: string) {\n  return str.replace(/([.+*?=^!:${}()[\\]|/\\\\])/g, \"\\\\$1\");\n}\n\n/**\n * Get the flags for a regexp from the options.\n */\nfunction flags(options?: { sensitive?: boolean }) {\n  return options && options.sensitive ? \"\" : \"i\";\n}\n\n/**\n * Metadata about a key.\n */\nexport interface Key {\n  name: string | number;\n  prefix: string;\n  suffix: string;\n  pattern: string;\n  modifier: string;\n}\n\n/**\n * A token is a string (nothing special) or key metadata (capture group).\n */\nexport type Token = string | Key;\n\n/**\n * Pull out keys from a regexp.\n */\nfunction regexpToRegexp(path: RegExp, keys?: Key[]): RegExp {\n  if (!keys) return path;\n\n  const groupsRegex = /\\((?:\\?<(.*?)>)?(?!\\?)/g;\n\n  let index = 0;\n  let execResult = groupsRegex.exec(path.source);\n  while (execResult) {\n    keys.push({\n      // Use parenthesized substring match if available, index otherwise\n      name: execResult[1] || index++,\n      prefix: \"\",\n      suffix: \"\",\n      modifier: \"\",\n      pattern: \"\",\n    });\n    execResult = groupsRegex.exec(path.source);\n  }\n\n  return path;\n}\n\n/**\n * Transform an array into a regexp.\n */\nfunction arrayToRegexp(\n  paths: Array<string | RegExp>,\n  keys?: Key[],\n  options?: TokensToRegexpOptions & ParseOptions\n): RegExp {\n  const parts = paths.map((path) => pathToRegexp(path, keys, options).source);\n  return new RegExp(`(?:${parts.join(\"|\")})`, flags(options));\n}\n\n/**\n * Create a path regexp from string input.\n */\nfunction stringToRegexp(\n  path: string,\n  keys?: Key[],\n  options?: TokensToRegexpOptions & ParseOptions\n) {\n  return tokensToRegexp(parse(path, options), keys, options);\n}\n\nexport interface TokensToRegexpOptions {\n  /**\n   * When `true` the regexp will be case sensitive. (default: `false`)\n   */\n  sensitive?: boolean;\n  /**\n   * When `true` the regexp won't allow an optional trailing delimiter to match. (default: `false`)\n   */\n  strict?: boolean;\n  /**\n   * When `true` the regexp will match to the end of the string. (default: `true`)\n   */\n  end?: boolean;\n  /**\n   * When `true` the regexp will match from the beginning of the string. (default: `true`)\n   */\n  start?: boolean;\n  /**\n   * Sets the final character for non-ending optimistic matches. (default: `/`)\n   */\n  delimiter?: string;\n  /**\n   * List of characters that can also be \"end\" characters.\n   */\n  endsWith?: string;\n  /**\n   * Encode path tokens for use in the `RegExp`.\n   */\n  encode?: (value: string) => string;\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n */\nexport function tokensToRegexp(\n  tokens: Token[],\n  keys?: Key[],\n  options: TokensToRegexpOptions = {}\n) {\n  const {\n    strict = false,\n    start = true,\n    end = true,\n    encode = (x: string) => x,\n    delimiter = \"/#?\",\n    endsWith = \"\",\n  } = options;\n  const endsWithRe = `[${escapeString(endsWith)}]|$`;\n  const delimiterRe = `[${escapeString(delimiter)}]`;\n  let route = start ? \"^\" : \"\";\n\n  // Iterate over the tokens and create our regexp string.\n  for (const token of tokens) {\n    if (typeof token === \"string\") {\n      route += escapeString(encode(token));\n    } else {\n      const prefix = escapeString(encode(token.prefix));\n      const suffix = escapeString(encode(token.suffix));\n\n      if (token.pattern) {\n        if (keys) keys.push(token);\n\n        if (prefix || suffix) {\n          if (token.modifier === \"+\" || token.modifier === \"*\") {\n            const mod = token.modifier === \"*\" ? \"?\" : \"\";\n            route += `(?:${prefix}((?:${token.pattern})(?:${suffix}${prefix}(?:${token.pattern}))*)${suffix})${mod}`;\n          } else {\n            route += `(?:${prefix}(${token.pattern})${suffix})${token.modifier}`;\n          }\n        } else {\n          if (token.modifier === \"+\" || token.modifier === \"*\") {\n            route += `((?:${token.pattern})${token.modifier})`;\n          } else {\n            route += `(${token.pattern})${token.modifier}`;\n          }\n        }\n      } else {\n        route += `(?:${prefix}${suffix})${token.modifier}`;\n      }\n    }\n  }\n\n  if (end) {\n    if (!strict) route += `${delimiterRe}?`;\n\n    route += !options.endsWith ? \"$\" : `(?=${endsWithRe})`;\n  } else {\n    const endToken = tokens[tokens.length - 1];\n    const isEndDelimited =\n      typeof endToken === \"string\"\n        ? delimiterRe.indexOf(endToken[endToken.length - 1]) > -1\n        : endToken === undefined;\n\n    if (!strict) {\n      route += `(?:${delimiterRe}(?=${endsWithRe}))?`;\n    }\n\n    if (!isEndDelimited) {\n      route += `(?=${delimiterRe}|${endsWithRe})`;\n    }\n  }\n\n  return new RegExp(route, flags(options));\n}\n\n/**\n * Supported `path-to-regexp` input types.\n */\nexport type Path = string | RegExp | Array<string | RegExp>;\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n */\nexport function pathToRegexp(\n  path: Path,\n  keys?: Key[],\n  options?: TokensToRegexpOptions & ParseOptions\n) {\n  if (path instanceof RegExp) return regexpToRegexp(path, keys);\n  if (Array.isArray(path)) return arrayToRegexp(path, keys, options);\n  return stringToRegexp(path, keys, options);\n}\n","import e from\"@swup/plugin\";function t(e){return\"title\"!==e.localName&&!e.matches(\"[data-swup-theme]\")}function s(e,t){return e.outerHTML===t.outerHTML}function n(e){return e.matches(\"link[rel=stylesheet][href]\")}class o extends e{constructor(e={}){super();const o=this;this.name=\"SwupHeadPlugin\",this.requires={swup:\">=4.6\"},this.defaults={persistTags:!1,persistAssets:!1,awaitAssets:!1,timeout:3e3},this.options=void 0,this.updateHead=function(e,{page:{}}){try{const u=e.to.document,{removed:l,added:a}=function(e,n,{shouldPersist:o=(()=>!1)}={}){const r=Array.from(e.children),i=Array.from(n.children),u=(l=r,i.reduce((e,t,n)=>(l.some(e=>s(t,e))||e.push({el:t,index:n}),e),[]));var l;const a=function(e,t){return e.reduce((e,n)=>(t.some(e=>s(n,e))||e.push({el:n}),e),[])}(r,i);return a.reverse().filter(({el:e})=>t(e)).filter(({el:e})=>!o(e)).forEach(({el:t})=>e.removeChild(t)),u.filter(({el:e})=>t(e)).forEach(({el:t,index:s=0})=>{e.insertBefore(t.cloneNode(!0),e.children[s+1]||null)}),{removed:a.map(({el:e})=>e),added:u.map(({el:e})=>e)}}(document.head,u.head,{shouldPersist:e=>o.isPersistentTag(e)});o.swup.log(`Removed ${l.length} / added ${a.length} tags in head`);const c=(r=document.documentElement).lang!==(i=u.documentElement).lang?(r.lang=i.lang,r.lang):null;c&&o.swup.log(`Updated lang attribute: ${c}`);const d=function(){if(o.options.awaitAssets){const e=function(e,t=0){return e.filter(n).map(e=>function(e,t=0){const s=t=>{(({href:e})=>Array.from(document.styleSheets).map(({href:e})=>e).includes(e))(e)?t():setTimeout(()=>s(t),10)};return new Promise(e=>{s(e),t>0&&setTimeout(e,t)})}(e,t))}(a,o.options.timeout),t=function(){if(e.length)return o.swup.log(`Waiting for ${e.length} assets to load`),Promise.resolve(Promise.all(e)).then(function(){})}();if(t&&t.then)return t.then(function(){})}}();return Promise.resolve(d&&d.then?d.then(function(){}):void 0)}catch(e){return Promise.reject(e)}var r,i},this.options={...this.defaults,...e},this.options.persistAssets&&!this.options.persistTags&&(this.options.persistTags=\"link[rel=stylesheet], script[src], style\")}mount(){this.before(\"content:replace\",this.updateHead)}isPersistentTag(e){const{persistTags:t}=this.options;return\"function\"==typeof t?t(e):\"string\"==typeof t?e.matches(t):Boolean(t)}}export{o as default};\n//# sourceMappingURL=index.module.js.map\n","type ElementCollection = { el: Element; index?: number }[];\n\nexport default function mergeHeadContents(\n\tcurrentHead: HTMLHeadElement,\n\tnewHead: HTMLHeadElement,\n\t{ shouldPersist = () => false }: { shouldPersist?: (el: Element) => boolean } = {}\n) {\n\tconst currentTags = Array.from(currentHead.children);\n\tconst newChildren = Array.from(newHead.children);\n\n\tconst addTags = getTagsToAdd(currentTags, newChildren);\n\tconst removeTags = getTagsToRemove(currentTags, newChildren);\n\n\t// Remove tags in reverse to keep indexes, keep persistant elements\n\tremoveTags\n\t\t.reverse()\n\t\t.filter(({ el }) => shouldManageTag(el))\n\t\t.filter(({ el }) => !shouldPersist(el))\n\t\t.forEach(({ el }) => currentHead.removeChild(el));\n\n\t// Insert tag *after* previous version of itself to preserve JS variable scope and CSS cascade\n\taddTags\n\t\t.filter(({ el }) => shouldManageTag(el))\n\t\t.forEach(({ el, index = 0 }) => {\n\t\t\tcurrentHead.insertBefore(el.cloneNode(true), currentHead.children[index + 1] || null);\n\t\t});\n\n\treturn {\n\t\tremoved: removeTags.map(({ el }) => el),\n\t\tadded: addTags.map(({ el }) => el)\n\t};\n}\n\nfunction getTagsToRemove(currentEls: Element[], newEls: Element[]): ElementCollection {\n\treturn currentEls.reduce((tags, el) => {\n\t\tconst isAmongNew = newEls.some((newEl) => compareTags(el, newEl));\n\t\tif (!isAmongNew) {\n\t\t\ttags.push({ el });\n\t\t}\n\t\treturn tags;\n\t}, [] as ElementCollection);\n}\n\nfunction getTagsToAdd(currentEls: Element[], newEls: Element[]): ElementCollection {\n\treturn newEls.reduce((tags, el, index) => {\n\t\tconst isAmongCurrent = currentEls.some((currentEl) => compareTags(el, currentEl));\n\t\tif (!isAmongCurrent) {\n\t\t\ttags.push({ el, index });\n\t\t}\n\t\treturn tags;\n\t}, [] as ElementCollection);\n}\n\nfunction shouldManageTag(el: Element) {\n\t// Let swup manage the title tag\n\tif (el.localName === 'title') {\n\t\treturn false;\n\t}\n\t// Leave swup theme styles untouched\n\tif (el.matches('[data-swup-theme]')) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\nfunction compareTags(oldTag: Element, newTag: Element) {\n\treturn oldTag.outerHTML === newTag.outerHTML;\n}\n","import waitForStylesheet from './waitForStylesheet.js';\n\nfunction isStylesheet(el: Element): el is HTMLLinkElement {\n\treturn el.matches('link[rel=stylesheet][href]');\n}\n\nexport default function waitForAssets(elements: Element[], timeoutMs: number = 0) {\n\treturn elements.filter(isStylesheet).map((el) => waitForStylesheet(el, timeoutMs));\n}\n","import { Handler } from 'swup';\nimport Plugin from '@swup/plugin';\n\nimport mergeHeadContents from './mergeHeadContents.js';\nimport updateLangAttribute from './updateLangAttribute.js';\nimport waitForAssets from './waitForAssets.js';\n\ntype Options = {\n\t/** Whether to keep orphaned `link`, `style` and `script` tags from the old page. Default: `false` */\n\tpersistAssets: boolean;\n\t/** Tags that will be persisted when a new page is loaded. Boolean, selector or predicate function. Default: `false` */\n\tpersistTags: boolean | string | ((el: Element) => boolean);\n\t/** Delay the transition to the new page until all newly added assets have finished loading. Default: `false` */\n\tawaitAssets: boolean;\n\t/** How long to wait for assets before continuing anyway. Only applies if `awaitAssets` is enabled. Default: `3000` */\n\ttimeout: number;\n};\n\nexport default class SwupHeadPlugin extends Plugin {\n\tname = 'SwupHeadPlugin';\n\n\trequires = { swup: '>=4.6' };\n\n\tdefaults: Options = {\n\t\tpersistTags: false,\n\t\tpersistAssets: false,\n\t\tawaitAssets: false,\n\t\ttimeout: 3000\n\t};\n\toptions: Options;\n\n\tconstructor(options: Partial<Options> = {}) {\n\t\tsuper();\n\n\t\tthis.options = { ...this.defaults, ...options };\n\n\t\t// persistAssets is a shortcut for: persistTags with a default asset selector for scripts & styles\n\t\tif (this.options.persistAssets && !this.options.persistTags) {\n\t\t\tthis.options.persistTags = 'link[rel=stylesheet], script[src], style';\n\t\t}\n\t}\n\n\tmount() {\n\t\tthis.before('content:replace', this.updateHead);\n\t}\n\n\tupdateHead: Handler<'content:replace'> = async (visit, { page: { html } }) => {\n\t\tconst newDocument = visit.to.document!;\n\n\t\tconst { removed, added } = mergeHeadContents(document.head, newDocument.head, {\n\t\t\tshouldPersist: (el) => this.isPersistentTag(el)\n\t\t});\n\t\tthis.swup.log(`Removed ${removed.length} / added ${added.length} tags in head`);\n\n\t\tconst lang = updateLangAttribute(document.documentElement, newDocument.documentElement);\n\t\tif (lang) {\n\t\t\tthis.swup.log(`Updated lang attribute: ${lang}`);\n\t\t}\n\n\t\tif (this.options.awaitAssets) {\n\t\t\tconst assetLoadPromises = waitForAssets(added, this.options.timeout);\n\t\t\tif (assetLoadPromises.length) {\n\t\t\t\tthis.swup.log(`Waiting for ${assetLoadPromises.length} assets to load`);\n\t\t\t\tawait Promise.all(assetLoadPromises);\n\t\t\t}\n\t\t}\n\t};\n\n\tisPersistentTag(el: Element) {\n\t\tconst { persistTags } = this.options;\n\t\tif (typeof persistTags === 'function') {\n\t\t\treturn persistTags(el);\n\t\t}\n\t\tif (typeof persistTags === 'string') {\n\t\t\treturn el.matches(persistTags);\n\t\t}\n\t\treturn Boolean(persistTags);\n\t}\n}\n","export default function updateLangAttribute(\n\tcurrentHtml: HTMLElement,\n\tnewHtml: HTMLElement\n): string | null {\n\tif (currentHtml.lang !== newHtml.lang) {\n\t\tcurrentHtml.lang = newHtml.lang;\n\t\treturn currentHtml.lang;\n\t} else {\n\t\treturn null;\n\t}\n}\n","export default function waitForStylesheet(element: HTMLLinkElement, timeoutMs: number = 0) {\n\tconst isLoaded = ({ href }: HTMLLinkElement) => {\n\t\treturn Array.from(document.styleSheets)\n\t\t\t.map(({ href }) => href)\n\t\t\t.includes(href);\n\t};\n\n\tconst whenLoaded = (cb: (value?: unknown) => void) => {\n\t\tif (isLoaded(element)) {\n\t\t\tcb();\n\t\t} else {\n\t\t\tsetTimeout(() => whenLoaded(cb), 10);\n\t\t}\n\t};\n\n\treturn new Promise((resolve) => {\n\t\twhenLoaded(resolve);\n\t\tif (timeoutMs > 0) {\n\t\t\tsetTimeout(resolve, timeoutMs);\n\t\t}\n\t});\n}\n","const r=r=>String(r).split(\".\").map(r=>String(parseInt(r||\"0\",10))).concat([\"0\",\"0\"]).slice(0,3).join(\".\");class e{constructor(){this.isSwupPlugin=!0,this.swup=void 0,this.version=void 0,this.requires={},this.handlersToUnregister=[]}mount(){}unmount(){this.handlersToUnregister.forEach(r=>r()),this.handlersToUnregister=[]}_beforeMount(){if(!this.name)throw new Error(\"You must define a name of plugin when creating a class.\")}_afterUnmount(){}_checkRequirements(){return\"object\"!=typeof this.requires||Object.entries(this.requires).forEach(e=>{let[t,n]=e;if(n=Array.isArray(n)?n:[n],!function(e,t,n){const s=function(r,e){if(\"swup\"===r)return e.version??\"\";{const t=e.findPlugin(r);return t?.version??\"\"}}(e,n);return!!s&&((e,t)=>t.every(t=>{const[,n,s]=t.match(/^([\\D]+)?(.*)$/)||[];var o,i;return((r,e)=>{const t={\"\":r=>0===r,\">\":r=>r>0,\">=\":r=>r>=0,\"<\":r=>r<0,\"<=\":r=>r<=0};return(t[e]||t[\"\"])(r)})((i=s,o=r(o=e),i=r(i),o.localeCompare(i,void 0,{numeric:!0})),n||\">=\")}))(s,t)}(t,n,this.swup)){const r=`${t} ${n.join(\", \")}`;throw new Error(`Plugin version mismatch: ${this.name} requires ${r}`)}}),!0}on(r,e,t){var n;void 0===t&&(t={}),e=!(n=e).name.startsWith(\"bound \")||n.hasOwnProperty(\"prototype\")?e.bind(this):e;const s=this.swup.hooks.on(r,e,t);return this.handlersToUnregister.push(s),s}once(r,e,t){return void 0===t&&(t={}),this.on(r,e,{...t,once:!0})}before(r,e,t){return void 0===t&&(t={}),this.on(r,e,{...t,before:!0})}replace(r,e,t){return void 0===t&&(t={}),this.on(r,e,{...t,replace:!0})}off(r,e){return this.swup.hooks.off(r,e)}}export{e as default};\n//# sourceMappingURL=index.module.js.map\n","type Comparator = '>' | '>=' | '<' | '<=';\n\n// Fill versions to exactly 3 decimals\nexport const normalizeVersion = (version: string): string => {\n\treturn String(version)\n\t\t.split('.')\n\t\t.map(segment => String(parseInt(segment || '0', 10)))\n\t\t.concat(['0', '0'])\n\t\t.slice(0, 3)\n\t\t.join('.');\n};\n\n// Numerically compare version strings after normalizing them\nexport const compareVersion = (a: string, b: string): number => {\n\ta = normalizeVersion(a);\n\tb = normalizeVersion(b);\n\treturn a.localeCompare(b, undefined, { numeric: true });\n};\n\n// Apply a comparator (equals, greater-than, etc) by its symbol to a sort comparison\nconst applyComparator = (comparisonResult: number, comparator: Comparator) => {\n\tconst comparators = {\n\t\t'': (r: number) => r === 0,\n\t\t'>': (r: number) => r > 0,\n\t\t'>=': (r: number) => r >= 0,\n\t\t'<': (r: number) => r < 0,\n\t\t'<=': (r: number) => r <= 0\n\t};\n\tconst comparatorFn = comparators[comparator] || comparators[''];\n\treturn comparatorFn(comparisonResult);\n};\n\n/**\n * Check if a version satisfies all given version requirements\n *\n * versionSatisfies('2.1.0', ['>=2', '<4']) // true\n * versionSatisfies('2.1.0', ['5']) // false\n *\n * @param {string} installed Installed version\n * @param {Array.<string>} requirements Array of requirements that must be satisfied\n * @returns boolean\n */\nexport const versionSatisfies = (installed: string, requirements: string[]) => {\n\treturn requirements.every((required) => {\n\t\tconst [, comparator, version] = required.match(/^([\\D]+)?(.*)$/) || [];\n\t\tconst comparisonResult = compareVersion(installed, version);\n\t\treturn applyComparator(comparisonResult, (comparator as Comparator) || '>=');\n\t});\n};\n","import type Swup from 'swup';\nimport type { Plugin, HookName, HookOptions, HookUnregister, Handler } from 'swup';\nimport { checkDependencyVersion } from './pluginRequirements.js';\n\nfunction isBound(func: Function) {\n\treturn func.name.startsWith('bound ') && !func.hasOwnProperty('prototype');\n}\n\nexport default abstract class SwupPlugin implements Plugin {\n\t/** Name of the plugin */\n\tabstract name: string;\n\n\t/** Identify as a swup plugin */\n\tisSwupPlugin: true = true;\n\n\t// Swup instance, assigned by swup itself\n\tswup!: Swup;\n\n\t/** Version of this plugin. Currently not in use, defined here for backward compatiblity. */\n\tversion?: string;\n\n\t/** Version requirements of this plugin. Example: `{ swup: '>=4' }` */\n\trequires?: Record<string, string | string[]> = {};\n\n\t// List of hook handlers to unregister on unmount\n\tprivate handlersToUnregister: HookUnregister[] = [];\n\n\t/** Run on mount */\n\tmount() {\n\t\t// this is mount method rewritten by class extending\n\t\t// and is executed when swup is enabled with plugin\n\t}\n\n\t/** Run on unmount */\n\tunmount() {\n\t\t// this is unmount method rewritten by class extending\n\t\t// and is executed when swup with plugin is disabled\n\n\t\t// Unsubscribe all registered hook handlers\n\t\tthis.handlersToUnregister.forEach((unregister) => unregister());\n\t\tthis.handlersToUnregister = [];\n\t}\n\n\t_beforeMount(): void {\n\t\tif (!this.name) {\n\t\t\tthrow new Error('You must define a name of plugin when creating a class.');\n\t\t}\n\t}\n\n\t_afterUnmount(): void {\n\t\t// here for any future hidden auto-cleanup\n\t}\n\n\t_checkRequirements(): boolean {\n\t\tif (typeof this.requires !== 'object') {\n\t\t\treturn true;\n\t\t}\n\n\t\tObject.entries(this.requires).forEach(([dependency, versions]) => {\n\t\t\tversions = Array.isArray(versions) ? versions : [versions];\n\t\t\tif (!checkDependencyVersion(dependency, versions, this.swup)) {\n\t\t\t\tconst requirement = `${dependency} ${versions.join(', ')}`;\n\t\t\t\tthrow new Error(`Plugin version mismatch: ${this.name} requires ${requirement}`);\n\t\t\t}\n\t\t});\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Register a new hook handler.\n\t *\n\t * On plugin unmount, the handler will automatically be unregistered.\n\t * The handler function is lexically bound to the plugin instance for convenience.\n\t * @see swup.hooks.on\n\t */\n\tprotected on<T extends HookName>(hook: T, handler: Handler<T>, options: HookOptions = {}): HookUnregister {\n\t\thandler = !isBound(handler) ? handler.bind(this) : handler;\n\t\tconst unregister = this.swup.hooks.on(hook, handler, options);\n\t\tthis.handlersToUnregister.push(unregister);\n\t\treturn unregister;\n\t}\n\n\tprotected once<T extends HookName>(hook: T, handler: Handler<T>, options: HookOptions = {}): HookUnregister {\n\t\treturn this.on(hook, handler, { ...options, once: true });\n\t}\n\n\tprotected before<T extends HookName>(hook: T, handler: Handler<T>, options: HookOptions = {}): HookUnregister {\n\t\treturn this.on(hook, handler, { ...options, before: true });\n\t}\n\n\tprotected replace<T extends HookName>(hook: T, handler: Handler<T>, options: HookOptions = {}): HookUnregister {\n\t\treturn this.on(hook, handler, { ...options, replace: true });\n\t}\n\n\tprotected off<T extends HookName>(hook: T, handler?: Handler<T>): void {\n\t\treturn this.swup.hooks.off(hook, handler!);\n\t}\n}\n","import type Swup from 'swup';\n\nimport { versionSatisfies } from './versionSatisfies.js';\n\nfunction getInstalledDependencyVersion(dependency: string, swup: Swup): string {\n\tif (dependency === 'swup') {\n\t\treturn swup.version ?? '';\n\t} else {\n\t\t// Circular type dependency?\n\t\t// findPlugin returns swup's Plugin type which is not up-to-date\n\t\t// with the actual Plugin type from index.ts\n\t\tconst plugin = swup.findPlugin(dependency);\n\t\treturn plugin?.version ?? '';\n\t}\n}\n\nexport function checkDependencyVersion(\n\tdependency: string,\n\trequirements: string[],\n\tswup: Swup\n): boolean {\n\tconst version = getInstalledDependencyVersion(dependency, swup);\n\tif (version) {\n\t\treturn versionSatisfies(version, requirements);\n\t} else {\n\t\treturn false;\n\t}\n}\n","import t from\"@swup/plugin\";class e extends t{constructor(t){void 0===t&&(t={}),super(),this.name=\"SwupScriptsPlugin\",this.requires={swup:\">=4\"},this.defaults={head:!0,body:!0,optin:!1},this.options=void 0,this.options={...this.defaults,...t}}mount(){this.on(\"content:replace\",this.runScripts)}runScripts(){const{head:t,body:e,optin:s}=this.options,o=this.getScope({head:t,body:e});if(!o)return;const r=Array.from(o.querySelectorAll(s?\"script[data-swup-reload-script]\":\"script:not([data-swup-ignore-script])\"));r.forEach(t=>this.runScript(t)),this.swup.log(`Executed ${r.length} scripts.`)}runScript(t){const e=document.createElement(\"script\");for(const{name:s,value:o}of t.attributes)e.setAttribute(s,o);return e.textContent=t.textContent,t.replaceWith(e),e}getScope(t){let{head:e,body:s}=t;return e&&s?document:e?document.head:s?document.body:null}}export{e as default};\n//# sourceMappingURL=index.module.js.map\n","import Plugin from '@swup/plugin';\n\nexport type Options = {\n\thead: boolean;\n\tbody: boolean;\n\toptin: boolean;\n};\n\nexport default class SwupScriptsPlugin extends Plugin {\n\tname = 'SwupScriptsPlugin';\n\n\trequires = {\n\t\tswup: '>=4'\n\t};\n\n\tdefaults: Options = {\n\t\thead: true,\n\t\tbody: true,\n\t\toptin: false\n\t};\n\n\toptions: Options;\n\n\tconstructor(options: Partial<Options> = {}) {\n\t\tsuper();\n\t\tthis.options = { ...this.defaults, ...options };\n\t}\n\n\tmount() {\n\t\tthis.on('content:replace', this.runScripts);\n\t}\n\n\trunScripts() {\n\t\tconst { head, body, optin } = this.options;\n\t\tconst scope = this.getScope({ head, body });\n\t\tif (!scope) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selector = optin\n\t\t\t? 'script[data-swup-reload-script]'\n\t\t\t: 'script:not([data-swup-ignore-script])';\n\n\t\tconst scripts = Array.from(scope.querySelectorAll<HTMLScriptElement>(selector));\n\t\tscripts.forEach((script) => this.runScript(script));\n\n\t\tthis.swup.log(`Executed ${scripts.length} scripts.`);\n\t}\n\n\trunScript(script: HTMLScriptElement) {\n\t\tconst element = document.createElement('script');\n\t\tfor (const { name, value } of script.attributes) {\n\t\t\telement.setAttribute(name, value);\n\t\t}\n\t\telement.textContent = script.textContent;\n\t\tscript.replaceWith(element);\n\n\t\treturn element;\n\t}\n\n\tgetScope({ head, body }: Pick<Options, 'head' | 'body'>) {\n\t\tif (head && body) return document;\n\n\t\tif (head) return document.head;\n\n\t\tif (body) return document.body;\n\n\t\treturn null;\n\t}\n}\n","import t from\"@swup/plugin\";import\"focus-options-polyfill\";import{Location as e}from\"swup\";function n(t,e){return Object.keys(e).reduce((t,n)=>t.replace(`{${n}}`,e[n]||\"\"),t||\"\")}class o{constructor(){this.id=\"swup-announcer\",this.style=\"position:absolute;top:0;left:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;word-wrap:normal;width:1px;height:1px;\",this.region=void 0,this.region=this.getRegion()??this.createRegion()}getRegion(){return document.getElementById(this.id)}createRegion(){const t=function(t){const e=document.createElement(\"template\");return e.innerHTML=t,e.content.children[0]}(`<p aria-live=\"assertive\" aria-atomic=\"true\" id=\"${this.id}\" style=\"${this.style}\"></p>`);return document.body.appendChild(t),t}announce(t,e=0){return new Promise(n=>{setTimeout(()=>{this.region.textContent===t&&(t=`${t}.`),this.region.textContent=\"\",this.region.textContent=t,n()},e)})}}function i(t){let e;if(e=\"string\"==typeof t?document.querySelector(t):t,!(e instanceof HTMLElement))return;const n=e.getAttribute(\"tabindex\");e.setAttribute(\"tabindex\",\"-1\"),e.focus({preventScroll:!0}),null!==n&&e.setAttribute(\"tabindex\",n)}class s extends t{constructor(t={}){super(),this.name=\"SwupA11yPlugin\",this.requires={swup:\">=4\"},this.defaults={headingSelector:\"h1\",respectReducedMotion:!0,autofocus:!1,announcements:{visit:\"Navigated to: {title}\",url:\"New page at {url}\"}},this.options=void 0,this.announcer=void 0,this.announcementDelay=100,this.rootSelector=\"body\",this.handleAnchorScroll=(t,{hash:e})=>{const n=this.swup.getAnchorElement(e);n instanceof HTMLElement&&i(n)},this.options={...this.defaults,...t},this.announcer=new o}mount(){this.swup.hooks.create(\"content:announce\"),this.swup.hooks.create(\"content:focus\"),this.before(\"visit:start\",this.prepareVisit),this.on(\"visit:start\",this.markAsBusy),this.on(\"visit:end\",this.unmarkAsBusy),this.on(\"visit:end\",this.focusContent),this.on(\"visit:end\",this.announceContent),this.on(\"scroll:anchor\",this.handleAnchorScroll),this.before(\"visit:start\",this.disableAnimations),this.before(\"link:self\",this.disableAnimations),this.before(\"link:anchor\",this.disableAnimations),this.swup.announce=this.announce.bind(this)}unmount(){this.swup.announce=void 0}announce(t){try{return Promise.resolve(this.announcer.announce(t)).then(function(){})}catch(t){return Promise.reject(t)}}markAsBusy(){document.documentElement.setAttribute(\"aria-busy\",\"true\")}unmarkAsBusy(){document.documentElement.removeAttribute(\"aria-busy\")}prepareVisit(t){t.a11y={announce:void 0,focus:this.rootSelector}}announceContent(t){this.swup.hooks.callSync(\"content:announce\",t,void 0,t=>{void 0===t.a11y.announce&&(t.a11y.announce=this.getPageAnnouncement()),t.a11y.announce&&this.announcer.announce(t.a11y.announce,this.announcementDelay)})}focusContent(t){this.swup.hooks.callSync(\"content:focus\",t,void 0,t=>{t.a11y.focus&&(this.options.autofocus&&!0===function(){const t=function(){const t=document.querySelector(\"body [autofocus]\");if(t&&!t.closest('[inert], [aria-disabled], [aria-hidden=\"true\"]'))return t}();return!!t&&(t!==document.activeElement&&t.focus(),!0)}()||i(t.a11y.focus))})}getPageAnnouncement(){const{headingSelector:t,announcements:o}=this.options;return function({headingSelector:t=\"h1\",announcements:o={}}){const i=document.documentElement.lang||\"*\",{href:s,url:r,pathname:u}=e.fromUrl(window.location.href),c=o[i]??o[\"*\"]??o;if(\"object\"!=typeof c)return;const a=document.querySelector(t);a||console.warn(`SwupA11yPlugin: No main heading (${t}) found on new page`);const h=a?.getAttribute(\"aria-label\")||a?.textContent||document.title||n(c.url,{href:s,url:r,path:u});return n(c.visit,{title:h,href:s,url:r,path:u})}({headingSelector:t,announcements:o})}disableAnimations(t){this.options.respectReducedMotion&&window.matchMedia(\"(prefers-reduced-motion: reduce)\").matches&&(t.animation.animate=!1,t.scroll.animate=!1)}}export{s as default};\n//# sourceMappingURL=index.module.js.map\n","export function createElement(html: string): HTMLElement {\n\tconst template = document.createElement('template');\n\ttemplate.innerHTML = html;\n\treturn template.content.children[0] as HTMLElement;\n}\n\nexport function parseTemplate(str: string, replacements: Record<string, string>): string {\n\treturn Object.keys(replacements).reduce((str, key) => {\n\t\treturn str.replace(`{${key}}`, replacements[key] || '');\n\t}, str || '');\n}\n\nexport function prefersReducedMotion(): boolean {\n\treturn window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n}\n","import { Location } from 'swup';\nimport { AnnouncementTranslations, Options } from './index.js';\nimport { createElement, parseTemplate } from './util.js';\n\nexport class Announcer {\n\tid: string = 'swup-announcer';\n\tstyle: string = `position:absolute;top:0;left:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;word-wrap:normal;width:1px;height:1px;`;\n\tregion: HTMLElement;\n\n\tconstructor() {\n\t\tthis.region = this.getRegion() ?? this.createRegion();\n\t}\n\n\tgetRegion(): HTMLElement | null {\n\t\treturn document.getElementById(this.id);\n\t}\n\n\tcreateRegion(): HTMLElement {\n\t\tconst liveRegion = createElement(\n\t\t\t`<p aria-live=\"assertive\" aria-atomic=\"true\" id=\"${this.id}\" style=\"${this.style}\"></p>`\n\t\t);\n\t\tdocument.body.appendChild(liveRegion);\n\t\treturn liveRegion;\n\t}\n\n\tannounce(message: string, delay: number = 0): Promise<void> {\n\t\treturn new Promise((resolve) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\t// Make each message unique to allow reading identical page titles twice in a row\n\t\t\t\tif (this.region.textContent === message) {\n\t\t\t\t\tmessage = `${message}.`;\n\t\t\t\t}\n\t\t\t\t// Clear before announcing\n\t\t\t\tthis.region.textContent = '';\n\t\t\t\tthis.region.textContent = message;\n\n\t\t\t\tresolve();\n\t\t\t}, delay);\n\t\t});\n\t}\n}\n\nexport type PageAnnouncementOptions = Pick<Options, 'headingSelector' | 'announcements'>;\n\nexport function getPageAnnouncement({\n\theadingSelector = 'h1',\n\tannouncements = {}\n}: PageAnnouncementOptions): string | undefined {\n\tconst lang = document.documentElement.lang || '*';\n\tconst { href, url, pathname: path } = Location.fromUrl(window.location.href);\n\n\tconst templates =\n\t\t(announcements as AnnouncementTranslations)[lang] ??\n\t\t(announcements as AnnouncementTranslations)['*'] ??\n\t\tannouncements;\n\tif (typeof templates !== 'object') return;\n\n\t// Look for first heading on page\n\tconst headingEl = document.querySelector(headingSelector);\n\tif (!headingEl) {\n\t\tconsole.warn(`SwupA11yPlugin: No main heading (${headingSelector}) found on new page`);\n\t}\n\n\t// Get page heading from aria attribute or text content\n\tconst heading = headingEl?.getAttribute('aria-label') || headingEl?.textContent;\n\n\t// Fall back to document title, then url if no title was found\n\tconst title = heading || document.title || parseTemplate(templates.url, { href, url, path });\n\n\t// Replace {variables} in template\n\treturn parseTemplate(templates.visit, { title, href, url, path });\n}\n","export function focusElement(elementOrSelector: string | HTMLElement) {\n\tlet el: HTMLElement | null;\n\tif (typeof elementOrSelector === 'string') {\n\t\tel = document.querySelector<HTMLElement>(elementOrSelector);\n\t} else {\n\t\tel = elementOrSelector;\n\t}\n\n\tif (!(el instanceof HTMLElement)) return;\n\n\t// Apply a tabindex attribute to allow focusing non-focusable elements\n\tconst tabindex = el.getAttribute('tabindex');\n\tel.setAttribute('tabindex', '-1');\n\tel.focus({ preventScroll: true });\n\tif (tabindex !== null) {\n\t\tel.setAttribute('tabindex', tabindex);\n\t} else {\n\t\t// Removing the tabindex will reset screen reader position, so we'll keep it\n\t\t// el.removeAttribute('tabindex');\n\t}\n}\n\nexport function focusAutofocusElement(): boolean {\n\tconst autofocusEl = getAutofocusElement();\n\tif (!autofocusEl) return false;\n\n\tif (autofocusEl !== document.activeElement) {\n\t\t// Only focus if not already focused\n\t\t// No preventScroll flag here, as probably intended with autofocus\n\t\tautofocusEl.focus();\n\t}\n\treturn true;\n}\n\nexport function getAutofocusElement(): HTMLElement | undefined {\n\tconst focusEl = document.querySelector<HTMLElement>('body [autofocus]');\n\tif (focusEl && !focusEl.closest('[inert], [aria-disabled], [aria-hidden=\"true\"]')) {\n\t\treturn focusEl;\n\t}\n}\n","import { HookHandler, Visit } from 'swup';\nimport Plugin from '@swup/plugin';\n\nimport 'focus-options-polyfill';\n\nimport { Announcer, getPageAnnouncement } from './announcements.js';\nimport { focusAutofocusElement, focusElement } from './focus.js';\nimport { prefersReducedMotion } from './util.js';\n\nexport interface VisitA11y {\n\t/** How to announce the new content after it inserted */\n\tannounce: string | false | undefined;\n\t/** The element to focus after the content is replaced */\n\tfocus: string | false;\n}\n\ndeclare module 'swup' {\n\texport interface Visit {\n\t\t/** Accessibility settings for this visit */\n\t\ta11y: VisitA11y;\n\t}\n\texport interface HookDefinitions {\n\t\t'content:announce': undefined;\n\t\t'content:focus': undefined;\n\t}\n\texport interface Swup {\n\t\t/**\n\t\t * Announce something programmatically\n\t\t */\n\t\tannounce?: SwupA11yPlugin['announce'];\n\t}\n}\n\n/** Templates for announcements of the new page content. */\nexport type Announcements = {\n\t/** How to announce the new page. */\n\tvisit: string;\n\t/** How to read a page url. Used as fallback if no heading was found. */\n\turl: string;\n};\n\n/** Translations of announcements, keyed by language. */\nexport type AnnouncementTranslations = {\n\t[lang: string]: Announcements;\n};\n\nexport type Options = {\n\t/** The selector for finding headings inside the main content area. */\n\theadingSelector: string;\n\t/** Whether to skip animations for users that prefer reduced motion. */\n\trespectReducedMotion: boolean;\n\t/** How to announce the new page title and url. */\n\tannouncements: Announcements | AnnouncementTranslations;\n\t/** Whether to focus elements with an [autofocus] attribute after navigation. */\n\tautofocus: boolean;\n};\n\nexport default class SwupA11yPlugin extends Plugin {\n\tname = 'SwupA11yPlugin';\n\n\trequires = { swup: '>=4' };\n\n\tdefaults: Options = {\n\t\theadingSelector: 'h1',\n\t\trespectReducedMotion: true,\n\t\tautofocus: false,\n\t\tannouncements: {\n\t\t\tvisit: 'Navigated to: {title}',\n\t\t\turl: 'New page at {url}'\n\t\t}\n\t};\n\n\toptions: Options;\n\n\t/**\n\t * The announcer instance for reading new page content.\n\t */\n\tannouncer: Announcer;\n\n\t/**\n\t * The delay before announcing new page content.\n\t * Why 100ms? see research at https://github.com/swup/a11y-plugin/pull/50\n\t */\n\tannouncementDelay: number = 100;\n\n\t/**\n\t * The selector for the main content area of the page, to focus after navigation.\n\t */\n\trootSelector: string = 'body';\n\n\tconstructor(options: Partial<Options> = {}) {\n\t\tsuper();\n\n\t\t// Merge default options with user defined options\n\t\tthis.options = { ...this.defaults, ...options };\n\n\t\t// Create announcer instance for announcing new page content\n\t\tthis.announcer = new Announcer();\n\t}\n\n\tmount() {\n\t\t// Prepare new hooks\n\t\tthis.swup.hooks.create('content:announce');\n\t\tthis.swup.hooks.create('content:focus');\n\n\t\t// Prepare visit by adding a11y settings to visit object\n\t\tthis.before('visit:start', this.prepareVisit);\n\n\t\t// Mark page as busy during transitions\n\t\tthis.on('visit:start', this.markAsBusy);\n\t\tthis.on('visit:end', this.unmarkAsBusy);\n\n\t\t// Focus new page content after visit completes\n\t\tthis.on('visit:end', this.focusContent);\n\n\t\t// Announce new page title after visit completes\n\t\tthis.on('visit:end', this.announceContent);\n\n\t\t// Move focus start point when clicking on-page anchors\n\t\tthis.on('scroll:anchor', this.handleAnchorScroll);\n\n\t\t// Disable transition and scroll animations if user prefers reduced motion\n\t\tthis.before('visit:start', this.disableAnimations);\n\t\tthis.before('link:self', this.disableAnimations);\n\t\tthis.before('link:anchor', this.disableAnimations);\n\n\t\t// Announce something programmatically\n\t\tthis.swup.announce = this.announce.bind(this);\n\t}\n\n\tunmount() {\n\t\tthis.swup.announce = undefined;\n\t}\n\n\tasync announce(message: string): Promise<void> {\n\t\tawait this.announcer.announce(message);\n\t}\n\n\tmarkAsBusy() {\n\t\tdocument.documentElement.setAttribute('aria-busy', 'true');\n\t}\n\n\tunmarkAsBusy() {\n\t\tdocument.documentElement.removeAttribute('aria-busy');\n\t}\n\n\tprepareVisit(visit: Visit) {\n\t\tvisit.a11y = {\n\t\t\tannounce: undefined,\n\t\t\tfocus: this.rootSelector\n\t\t};\n\t}\n\n\tannounceContent(visit: Visit) {\n\t\tthis.swup.hooks.callSync('content:announce', visit, undefined, (visit) => {\n\t\t\t// Allow customizing announcement before this hook\n\t\t\tif (typeof visit.a11y.announce === 'undefined') {\n\t\t\t\tvisit.a11y.announce = this.getPageAnnouncement();\n\t\t\t}\n\n\t\t\tif (!visit.a11y.announce) return;\n\n\t\t\tthis.announcer.announce(visit.a11y.announce, this.announcementDelay);\n\t\t});\n\t}\n\n\tfocusContent(visit: Visit) {\n\t\tthis.swup.hooks.callSync('content:focus', visit, undefined, (visit) => {\n\t\t\tif (!visit.a11y.focus) return;\n\n\t\t\t// Found and focused [autofocus] element? Return early\n\t\t\tif (this.options.autofocus && focusAutofocusElement() === true) return;\n\n\t\t\t// Otherwise, find and focus actual content container\n\t\t\tfocusElement(visit.a11y.focus);\n\t\t});\n\t}\n\n\thandleAnchorScroll: HookHandler<'scroll:anchor'> = (visit, { hash }) => {\n\t\tconst anchor = this.swup.getAnchorElement(hash);\n\t\tif (anchor instanceof HTMLElement) {\n\t\t\tfocusElement(anchor);\n\t\t}\n\t};\n\n\tgetPageAnnouncement(): string | undefined {\n\t\tconst { headingSelector, announcements } = this.options;\n\t\treturn getPageAnnouncement({ headingSelector, announcements });\n\t}\n\n\tdisableAnimations(visit: Visit) {\n\t\tif (this.options.respectReducedMotion && prefersReducedMotion()) {\n\t\t\tvisit.animation.animate = false;\n\t\t\t// @ts-expect-error: animate is undefined unless Scroll Plugin installed\n\t\t\tvisit.scroll.animate = false;\n\t\t}\n\t}\n}\n","// focus - focusOptions - preventScroll polyfill\n(function() {\n  if (\n    typeof window === \"undefined\" ||\n    typeof document === \"undefined\" ||\n    typeof HTMLElement === \"undefined\"\n  ) {\n    return;\n  }\n\n  var supportsPreventScrollOption = false;\n  try {\n    var focusElem = document.createElement(\"div\");\n    focusElem.addEventListener(\n      \"focus\",\n      function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n      },\n      true\n    );\n    focusElem.focus(\n      Object.defineProperty({}, \"preventScroll\", {\n        get: function() {\n          // Edge v18 gives a false positive for supporting inputs\n          if (\n            navigator &&\n            typeof navigator.userAgent !== 'undefined' &&\n            navigator.userAgent &&\n            navigator.userAgent.match(/Edge\\/1[7-8]/)) {\n              return supportsPreventScrollOption = false\n          }\n\n          supportsPreventScrollOption = true;\n        }\n      })\n    );\n  } catch (e) {}\n\n  if (\n    HTMLElement.prototype.nativeFocus === undefined &&\n    !supportsPreventScrollOption\n  ) {\n    HTMLElement.prototype.nativeFocus = HTMLElement.prototype.focus;\n\n    var calcScrollableElements = function(element) {\n      var parent = element.parentNode;\n      var scrollableElements = [];\n      var rootScrollingElement =\n        document.scrollingElement || document.documentElement;\n\n      while (parent && parent !== rootScrollingElement) {\n        if (\n          parent.offsetHeight < parent.scrollHeight ||\n          parent.offsetWidth < parent.scrollWidth\n        ) {\n          scrollableElements.push([\n            parent,\n            parent.scrollTop,\n            parent.scrollLeft\n          ]);\n        }\n        parent = parent.parentNode;\n      }\n      parent = rootScrollingElement;\n      scrollableElements.push([parent, parent.scrollTop, parent.scrollLeft]);\n\n      return scrollableElements;\n    };\n\n    var restoreScrollPosition = function(scrollableElements) {\n      for (var i = 0; i < scrollableElements.length; i++) {\n        scrollableElements[i][0].scrollTop = scrollableElements[i][1];\n        scrollableElements[i][0].scrollLeft = scrollableElements[i][2];\n      }\n      scrollableElements = [];\n    };\n\n    var patchedFocus = function(args) {\n      if (args && args.preventScroll) {\n        var evScrollableElements = calcScrollableElements(this);\n        if (typeof setTimeout === 'function') {\n          var thisElem = this;\n          setTimeout(function () {\n            thisElem.nativeFocus();\n            restoreScrollPosition(evScrollableElements);\n          }, 0);\n        } else {\n          this.nativeFocus();\n          restoreScrollPosition(evScrollableElements);\n        }\n      }\n      else {\n        this.nativeFocus();\n      }\n    };\n\n    HTMLElement.prototype.focus = patchedFocus;\n  }\n})();\n"],"names":["$parcel$export","e","n","v","s","Object","defineProperty","get","set","enumerable","configurable","$parcel$global","globalThis","self","window","global","$parcel$modules","$parcel$inits","parcelRequire","id","exports","init","module","call","err","Error","code","register","parcelRegister","$006d4b43846b4e5a$export$6503ec6e8aabbaf","$006d4b43846b4e5a$export$f7ad0328861e2f03","$006d4b43846b4e5a$var$mapping","Map","baseUrl","manifest","i","length","path","resolved","URL","toString","$2a7c6f5202362115$export$bdfd709ae4826697","$2a7c6f5202362115$var$bundleURL","value","$2a7c6f5202362115$var$getBundleURL","matches","stack","match","replace","resolve","then","$igfKR","bundle","Promise","reject","concat","document","getElementsByTagName","some","script","src","preloadLink","createElement","href","rel","as","head","appendChild","async","type","onerror","error","TypeError","message","onload","remove","$d4b5f137e6587370$var$cachedBundles","$d4b5f137e6587370$var$cachedPreloads","$d4b5f137e6587370$var$cachedPrefetches","loader","cache","$d4b5f137e6587370$var$getCache","apply","arguments","catch","all","getBundleURL","JSON","parse","$0866d6a7a27b1ca1$var$ledger","WeakMap","$0866d6a7a27b1ca1$var$editLedger","wanted","baseElement","callback","setup","has","elementMap","setups","Set","existed","add","delete","$0866d6a7a27b1ca1$export$2e2bcd8739ae039","selector","options","signal","base","aborted","once","nativeListenerOptions","Document","documentElement","capture","Boolean","listenerFunction","event","delegateTarget","$0866d6a7a27b1ca1$var$safeClosest","target","Text","parentElement","Element","currentTarget","closest","contains","delegateEvent","assign","removeEventListener","stringify","addEventListener","$6c9437c8078b0d3b$export$b04d9b8d414ba5e8","t","String","toLowerCase","$6c9437c8078b0d3b$export$dc90482e4ef07afd","hash","location","pathname","search","$6c9437c8078b0d3b$export$c38a4311235454af","url","random","Math","source","history","pushState","$6c9437c8078b0d3b$export$9dd2847e0d2d8b0","state","replaceState","$6c9437c8078b0d3b$export$b93d41a1bb659592","o","r","AbortController","destroy","abort","$6c9437c8078b0d3b$export$18a2be9195644f38","constructor","baseURI","setPrototypeOf","prototype","fromElement","getAttribute","fromUrl","$6c9437c8078b0d3b$var$l","status","u","text","hooks","response","$6c9437c8078b0d3b$var$h","c","l","html","write","method","visit","requestHeaders","headers","timeout","d","m","setTimeout","f","fetch","clearTimeout","timedOut","name","p","$6c9437c8078b0d3b$var$u","swup","pages","size","forEach","callSync","page","update","clear","prune","resolveUrl","$6c9437c8078b0d3b$export$2fa187e846a241c4","querySelector","$6c9437c8078b0d3b$export$dcd0d083aa86c355","Array","from","querySelectorAll","$6c9437c8078b0d3b$export$bdd553fddd433dcb","requestAnimationFrame","$6c9437c8078b0d3b$export$4369c812aac99591","$6c9437c8078b0d3b$var$w","swupClasses","selectors","scope","animation","containers","isArray","join","targets","trim","classList","slice","className","split","filter","isSwupClass","startsWith","$6c9437c8078b0d3b$var$y","to","trigger","scroll","currentPageUrl","el","animate","wait","native","animationScope","animationSelector","read","action","popstate","direction","reset","advance","done","$6c9437c8078b0d3b$var$P","$6c9437c8078b0d3b$var$k","Symbol","iterator","$6c9437c8078b0d3b$var$b","$6c9437c8078b0d3b$var$S","bind","$6c9437c8078b0d3b$var$E","$6c9437c8078b0d3b$var$U","registry","create","exists","console","on","warn","hook","handler","off","before","a","parseCallArgs","after","h","getHandlers","run","dispatchDomEvent","runSync","next","return","push","defaultHandler","$6c9437c8078b0d3b$export$8586fbe018c72b76","found","replaced","values","sortRegistrations","sort","priority","args","dispatchEvent","CustomEvent","detail","bubbles","$6c9437c8078b0d3b$var$C","charAt","substring","decodeURIComponent","getElementById","CSS","escape","body","$6c9437c8078b0d3b$var$$","elements","map","propCount","getComputedStyle","$6c9437c8078b0d3b$var$H","$6c9437c8078b0d3b$var$x","$6c9437c8078b0d3b$var$j","$6c9437c8078b0d3b$var$A","max","performance","now","includes","elapsedTime","$6c9437c8078b0d3b$var$V","parseFloat","$6c9437c8078b0d3b$var$I","navigating","referrer","classes","animatePageOut","animatePageIn","startViewTransition","renderPage","finished","onVisitEnd","fetchPage","DOMParser","parseFromString","currentHistoryIndex","index","skipPopStateHandling","back","performNavigation","$6c9437c8078b0d3b$var$L","shouldIgnoreVisit","createVisit","$6c9437c8078b0d3b$var$T","skip","awaitAnimations","$6c9437c8078b0d3b$var$q","innerText","title","replaceWith","cloneNode","$6c9437c8078b0d3b$var$R","behavior","getAnchorElement","scrollIntoView","scrollTo","top","left","$6c9437c8078b0d3b$var$N","$6c9437c8078b0d3b$var$D","isSameResolvedUrl","replaceContent","scrollToContent","$6c9437c8078b0d3b$var$M","isSwupPlugin","_checkRequirements","_beforeMount","mount","plugins","$6c9437c8078b0d3b$var$O","findPlugin","unmount","_afterUnmount","$6c9437c8078b0d3b$var$W","find","$6c9437c8078b0d3b$var$B","$6c9437c8078b0d3b$var$_","$6c9437c8078b0d3b$var$F","animateHistoryBrowsing","ignoreVisit","linkSelector","linkToSelf","Accept","$a0934a80bbb330d2$var$r","parseInt","$a0934a80bbb330d2$export$2e2bcd8739ae039","version","requires","handlersToUnregister","entries","every","localeCompare","numeric","hasOwnProperty","$f106feef94b846aa$var$t","localName","$f106feef94b846aa$var$s","outerHTML","$f106feef94b846aa$var$n","$f5c3d6a9f79a08f6$var$n","keys","reduce","HTMLElement","supportsPreventScrollOption","focusElem","preventDefault","stopPropagation","focus","navigator","userAgent","undefined","nativeFocus","calcScrollableElements","element","parent","parentNode","scrollableElements","rootScrollingElement","scrollingElement","offsetHeight","scrollHeight","offsetWidth","scrollWidth","scrollTop","scrollLeft","restoreScrollPosition","preventScroll","evScrollableElements","thisElem","$f5c3d6a9f79a08f6$var$o","style","region","getRegion","createRegion","innerHTML","content","children","announce","textContent","$f5c3d6a9f79a08f6$var$i","setAttribute","$8e91ccc6b8b0af63$var$swup","defaults","clickDelegate","use","unuse","log","navigate","getCurrentUrl","handleLinkClick","handlePopState","enable","scrollRestoration","toggle","origin","triggerWillOpenNewWindow","metaKey","ctrlKey","shiftKey","altKey","button","persistTags","persistAssets","awaitAssets","updateHead","removed","added","shouldPersist","reverse","removeChild","insertBefore","isPersistentTag","lang","styleSheets","optin","runScripts","getScope","runScript","attributes","headingSelector","respectReducedMotion","autofocus","announcements","announcer","announcementDelay","rootSelector","handleAnchorScroll","prepareVisit","markAsBusy","unmarkAsBusy","focusContent","announceContent","disableAnimations","removeAttribute","a11y","getPageAnnouncement","activeElement","matchMedia","main","block","vw","clientWidth","innerWidth","lazyLoadImages","default","Menu","Bookmarks","ViewToggle","TaskButtons","MinimizeWindows","WindowManager","createDraggables","classify","fallback","createHistoryRecord","data","updateHistoryRecord","controller","delegate","Location","super","this","matchPath","_this","_temp2","_result","responseUrl","FetchError","finalUrl","timeoutId","_temp","_this$hooks$call","_catch","details","Cache","copy","key","result","payload","predicate","urlToResolve","query","context","queryAll","nextTick","isPromise","obj","runAsPromise","func","forceReflow","getBoundingClientRect","Classes","Visit","_iteratorSymbol","pact","_Pact","_settle","observer","onFulfilled","onRejected","thenable","Hooks","ledger","registration","arg1","arg2","arg3","registrations","rethrow","_exit","_this2","results","check","step","_cycle","_fixup","array","_isSettledPact","_forTo","_forOf","_result2","T","createDefaultHandler","b","decoded","animatedElements","awaitedAnimations","styles","transitionDelays","getStyleProperties","TRANSITION","transitionDurations","transitionTimeout","calculateTimeout","animationDelays","ANIMATION","animationDurations","animationTimeout","getTransitionInfo","endEvent","startTime","propsTransitioned","end","onEnd","isTransitionOrAnimationEvent","awaitAnimationsOnElement","delays","durations","duration","toMs","time","_temp4","_exit2","_temp8","_result4","_temp6","_temp5","_renderPage3","_page3","_renderPage2","_page2","_temp7","_renderPage","_page","_temp9","_this$fetchPage","cachedPage","newUrl","_finallyRethrows","_wasThrown","_result3","_temp3","incomingDocument","persistedElements","currentEl","incomingEl","existing","replacement","scrollTarget","scrolled","anchor","plugin","maybeInvalidPlugin","pluginOrName","url1","url2","Swup","triggerEl","shouldManageTag","compareTags","oldTag","newTag","isStylesheet","SwupHeadPlugin","Plugin","newDocument","currentHead","newHead","currentTags","newChildren","addTags","currentEls","tags","removeTags","newEls","newEl","getTagsToRemove","mergeHeadContents","currentHtml","newHtml","assetLoadPromises","timeoutMs","whenLoaded","cb","isLoaded","waitForStylesheet","waitForAssets","normalizeVersion","segment","SwupPlugin","unregister","_ref","dependency","versions","requirements","getInstalledDependencyVersion","versionSatisfies","installed","required","comparator","compareVersion","applyComparator","comparisonResult","comparators","checkDependencyVersion","requirement","SwupScriptsPlugin","scripts","parseTemplate","str","replacements","Announcer","liveRegion","template","delay","focusElement","elementOrSelector","tabindex","SwupA11yPlugin","autofocusEl","focusEl","getAutofocusElement","focusAutofocusElement","templates","headingEl"],"version":3,"file":"swup.js.map"}